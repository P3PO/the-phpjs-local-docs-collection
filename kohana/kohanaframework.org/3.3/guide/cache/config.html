<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Configuration | Kohana User Guide</title>

<script type="text/javascript">
//<![CDATA[
try{if (!window.CloudFlare) {var CloudFlare=[{verbose:0,p:0,byc:0,owlid:"cf",bag2:1,mirage2:0,oracle:0,paths:{cloudflare:"/cdn-cgi/nexp/dok8v=02fcfa4f56/"},atok:"eee59e90a8282bcfc7cd8af99a42a3da",petok:"30207b93fb055efbe63a48e03cbe60f7bfad1b4d-1394799561-1800",zone:"kohanaframework.org",rocket:"0",apps:{"ga_key":{"ua":"UA-27864271-1","ga_bs":"2"}}}];var a=document.createElement("script"),b=document.getElementsByTagName("script")[0];a.async=!0;a.src="//ajax.cloudflare.com/cdn-cgi/nexp/dok8v=b064e16429/cloudflare.min.js";b.parentNode.insertBefore(a,b);}}catch(e){};
//]]>
</script>
<link type="text/css" href="../../guide-media/css/print.css" rel="stylesheet" media="print" />
<link type="text/css" href="../../guide-media/css/screen.css" rel="stylesheet" media="screen" />
<link type="text/css" href="../../guide-media/css/kodoc.css" rel="stylesheet" media="screen" />
<link type="text/css" href="../../guide-media/css/shCore.css" rel="stylesheet" media="screen" />
<link type="text/css" href="../../guide-media/css/shThemeKodoc.css" rel="stylesheet" media="screen" />

<script type="text/javascript" src="../../guide-media/js/jquery.min.js"></script>
<script type="text/javascript" src="../../guide-media/js/jquery.cookie.js"></script>
<script type="text/javascript" src="../../guide-media/js/kodoc.js"></script>
<script type="text/javascript" src="../../guide-media/js/shCore.js"></script>
<script type="text/javascript" src="../../guide-media/js/shBrushPhp.js"></script>

<!--[if lt IE 9]>
<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
<![endif]-->
<script type="text/javascript">
/* <![CDATA[ */
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-27864271-1']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

(function(b){(function(a){"__CF"in b&&"DJS"in b.__CF?b.__CF.DJS.push(a):"addEventListener"in b?b.addEventListener("load",a,!1):b.attachEvent("onload",a)})(function(){"FB"in b&&"Event"in FB&&"subscribe"in FB.Event&&(FB.Event.subscribe("edge.create",function(a){_gaq.push(["_trackSocial","facebook","like",a])}),FB.Event.subscribe("edge.remove",function(a){_gaq.push(["_trackSocial","facebook","unlike",a])}),FB.Event.subscribe("message.send",function(a){_gaq.push(["_trackSocial","facebook","send",a])}));"twttr"in b&&"events"in twttr&&"bind"in twttr.events&&twttr.events.bind("tweet",function(a){if(a){var b;if(a.target&&a.target.nodeName=="IFRAME")a:{if(a=a.target.src){a=a.split("#")[0].match(/[^?=&]+=([^&]*)?/g);b=0;for(var c;c=a[b];++b)if(c.indexOf("url")===0){b=unescape(c.split("=")[1]);break a}}b=void 0}_gaq.push(["_trackSocial","twitter","tweet",b])}})})})(window);
/* ]]> */
</script>
</head>
<body>

	<div id="kodoc-header">
		<div class="container">
			<a href="http://kohanaframework.org/" id="kodoc-logo">
				<img src="../../guide-media/img/kohana.png" />
			</a>
			<div id="kodoc-menu">
				<ul>
					<li class="guide first">
						<a href="../../guide.1.html">User Guide</a>
					</li>
										<li class="api">
						<a href="../../guide-api.html">API Browser</a>
					</li>
									</ul>
			</div>
		</div>
	</div>

	<div id="kodoc-content">
		<div class="wrapper">
			<div class="container">
				<div class="span-22 prefix-1 suffix-1">
					<ul id="kodoc-breadcrumb">
																				<li><a href="../../guide.1.html">User Guide</a></li>
																											<li><a href="../cache.1.html">Cache</a></li>
																											<li class="last">Configuration</li>
																		</ul>
				</div>
				<div class="span-6 prefix-1">
					<div id="kodoc-topics">
						<h2 id="cache"><a href="index.html">Cache</a></h2>

<ul>
<li><a href="config.html">Configuration</a></li>
<li><a href="usage.html">Usage</a></li>
</ul>
					</div>
				</div>
				<div id="kodoc-body" class="span-16 suffix-1 last">
					<h1 id="kohana-cache-configuration">Kohana Cache configuration</h1>

<div class="page-toc">
					<a href="config.html#kohana-cache-configuration">Kohana Cache configuration</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;				<a href="config.html#group-settings">Group settings</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;				<a href="config.html#memcache-memcached-tag-settings">Memcache & Memcached-tag settings</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="config.html#memcache-server-configuration">Memcache server configuration</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;				<a href="config.html#apc-settings">APC settings</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;				<a href="config.html#sqlite-settings">SQLite settings</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;				<a href="config.html#file-settings">File settings</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;				<a href="config.html#wincache-settings">Wincache settings</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;				<a href="config.html#override-existing-configuration-group">Override existing configuration group</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;				<a href="config.html#add-new-configuration-group">Add new configuration group</a><br />
	</div>
<p>Kohana Cache uses configuration groups to create cache instances. A configuration group can
use any supported driver, with successive groups using multiple instances of the same driver type.</p>

<p>The default cache group is loaded based on the <code>Cache::$default</code> setting. It is set to the <code>file</code> driver as standard, however this can be changed within the <code>/application/boostrap.php</code> file.</p>

<pre><code> // Change the default cache driver to memcache
 Cache::$default = 'memcache';

 // Load the memcache cache driver using default setting
 $memcache = Cache::instance();
</code></pre>

<h2 id="group-settings">Group settings</h2>

<p>Below are the default cache configuration groups for each supported driver. Add to- or override these settings
within the <code>application/config/cache.php</code> file.</p>

<table>
<thead>
<tr>
  <th>Name</th>
  <th>Required</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td>driver</td>
  <td><strong>YES</strong></td>
  <td>(<em>string</em>) The driver type to use</td>
</tr>
<tr>
  <td>default_expire</td>
  <td><strong>NO</strong></td>
  <td>(<em>string</em>) The driver type to use</td>
</tr>
</tbody>
</table>

<pre><code>'file'  =&gt; array
(
    'driver'             =&gt; 'file',
    'cache_dir'          =&gt; APPPATH.'cache/.kohana_cache',
    'default_expire'     =&gt; 3600,
),
</code></pre>

<h2 id="memcache-memcached-tag-settings">Memcache &amp; Memcached-tag settings</h2>

<table>
<thead>
<tr>
  <th>Name</th>
  <th>Required</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td>driver</td>
  <td><strong>YES</strong></td>
  <td>(<em>string</em>) The driver type to use</td>
</tr>
<tr>
  <td>servers</td>
  <td><strong>YES</strong></td>
  <td>(<em>array</em>) Associative array of server details, must include a <strong>host</strong> key. (see <em>Memcache server configuration</em> below)</td>
</tr>
<tr>
  <td>compression</td>
  <td><strong>NO</strong></td>
  <td>(<em>boolean</em>) Use data compression when caching</td>
</tr>
</tbody>
</table>

<h3 id="memcache-server-configuration">Memcache server configuration</h3>

<table>
<thead>
<tr>
  <th>Name</th>
  <th>Required</th>
  <th>Description</th>
</tr>
</thead>
<tbody>
<tr>
  <td>host</td>
  <td><strong>YES</strong></td>
  <td>(<em>string</em>) The host of the memcache server, i.e. <strong>localhost</strong>; or <strong>127.0.0.1</strong>; or <strong>memcache.domain.tld</strong></td>
</tr>
<tr>
  <td>port</td>
  <td><strong>NO</strong></td>
  <td>(<em>integer</em>) Point to the port where memcached is listening for connections. Set this parameter to 0 when using UNIX domain sockets.  Default <strong>11211</strong></td>
</tr>
<tr>
  <td>persistent</td>
  <td><strong>NO</strong></td>
  <td>(<em>boolean</em>) Controls the use of a persistent connection. Default <strong>TRUE</strong></td>
</tr>
<tr>
  <td>weight</td>
  <td><strong>NO</strong></td>
  <td>(<em>integer</em>) Number of buckets to create for this server which in turn control its probability of it being selected. The probability is relative to the total weight of all servers. Default <strong>1</strong></td>
</tr>
<tr>
  <td>timeout</td>
  <td><strong>NO</strong></td>
  <td>(<em>integer</em>) Value in seconds which will be used for connecting to the daemon. Think twice before changing the default value of 1 second - you can lose all the advantages of caching if your connection is too slow. Default <strong>1</strong></td>
</tr>
<tr>
  <td>retry_interval</td>
  <td><strong>NO</strong></td>
  <td>(<em>integer</em>) Controls how often a failed server will be retried, the default value is 15 seconds. Setting this parameter to -1 disables automatic retry. Default <strong>15</strong></td>
</tr>
<tr>
  <td>status</td>
  <td><strong>NO</strong></td>
  <td>(<em>boolean</em>) Controls if the server should be flagged as online. Default <strong>TRUE</strong></td>
</tr>
<tr>
  <td>failure_callback</td>
  <td><strong>NO</strong></td>
  <td>(<em><a href="http://www.php.net/manual/en/language.pseudo-types.php#language.types.callback">callback</a></em>) Allows the user to specify a callback function to run upon encountering an error. The callback is run before failover is attempted. The function takes two parameters, the hostname and port of the failed server. Default <strong>NULL</strong></td>
</tr>
</tbody>
</table>

<pre><code>'memcache' =&gt; array
(
    'driver'             =&gt; 'memcache',
    'default_expire'     =&gt; 3600,
    'compression'        =&gt; FALSE,              // Use Zlib compression 
                                                (can cause issues with integers)
    'servers'            =&gt; array
    (
        'local' =&gt; array
        (
            'host'             =&gt; 'localhost',  // Memcache Server
            'port'             =&gt; 11211,        // Memcache port number
            'persistent'       =&gt; FALSE,        // Persistent connection
        ),
    ),
),
'memcachetag' =&gt; array
(
    'driver'             =&gt; 'memcachetag',
    'default_expire'     =&gt; 3600,
    'compression'        =&gt; FALSE,              // Use Zlib compression 
                                                (can cause issues with integers)
    'servers'            =&gt; array
    (
        'local' =&gt; array
        (
            'host'             =&gt; 'localhost',  // Memcache Server
            'port'             =&gt; 11211,        // Memcache port number
            'persistent'       =&gt; FALSE,        // Persistent connection
        ),
    ),
),
</code></pre>

<h2 id="apc-settings">APC settings</h2>

<pre><code>'apc'      =&gt; array
(
    'driver'             =&gt; 'apc',
    'default_expire'     =&gt; 3600,
),
</code></pre>

<h2 id="sqlite-settings">SQLite settings</h2>

<pre><code>'sqlite'   =&gt; array
(
    'driver'             =&gt; 'sqlite',
    'default_expire'     =&gt; 3600,
    'database'           =&gt; APPPATH.'cache/kohana-cache.sql3',
    'schema'             =&gt; 'CREATE TABLE caches(id VARCHAR(127) PRIMARY KEY, 
                                      tags VARCHAR(255), expiration INTEGER, cache TEXT)',
),
</code></pre>

<h2 id="file-settings">File settings</h2>

<pre><code>'file'    =&gt; array
(
    'driver'             =&gt; 'file',
    'cache_dir'          =&gt; 'cache/.kohana_cache',
    'default_expire'     =&gt; 3600,
)
</code></pre>

<h2 id="wincache-settings">Wincache settings</h2>

<pre><code>'wincache' =&gt; array
(
    'driver'             =&gt; 'wincache',
    'default_expire'     =&gt; 3600,
),
</code></pre>

<h2 id="override-existing-configuration-group">Override existing configuration group</h2>

<p>The following example demonstrates how to override an existing configuration setting, using the config file in <code>/application/config/cache.php</code>.</p>

<pre><code>&lt;?php defined('SYSPATH') or die('No direct script access.');
return array
(
    // Override the default configuration
    'memcache'   =&gt; array
    (
        'driver'         =&gt; 'memcache',  // Use Memcached as the default driver
        'default_expire' =&gt; 8000,        // Overide default expiry
        'servers'        =&gt; array
        (
            // Add a new server
            array
            (
                'host'       =&gt; 'cache.domain.tld',
                'port'       =&gt; 11211,
                'persistent' =&gt; FALSE
            )
        ),
        'compression'    =&gt; FALSE
    )
);
</code></pre>

<h2 id="add-new-configuration-group">Add new configuration group</h2>

<p>The following example demonstrates how to add a new configuration setting, using the config file in <code>/application/config/cache.php</code>.</p>

<pre><code>&lt;?php defined('SYSPATH') or die('No direct script access.');
return array
(
    // Override the default configuration
    'fastkv'   =&gt; array
    (
        'driver'         =&gt; 'apc',  // Use Memcached as the default driver
        'default_expire' =&gt; 1000,   // Overide default expiry
    )
);
</code></pre>

									</div>
			</div>
		</div>
	</div>

	<div id="kodoc-footer">
		<div class="container">
			<div class="span-12">
							<p>&copy; 2008–2012 Kohana Team</p>
						</div>
			<div class="span-12 last right">
			<p>Powered by <a href="http://kohanaframework.org/">Kohana</a> v3.3.1</p>
			</div>
		</div>
	</div>

</body>
</html>
