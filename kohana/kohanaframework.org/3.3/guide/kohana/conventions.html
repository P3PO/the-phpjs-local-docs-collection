<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Conventions and Style | Kohana User Guide</title>

<script type="text/javascript">
//<![CDATA[
try{if (!window.CloudFlare) {var CloudFlare=[{verbose:0,p:0,byc:0,owlid:"cf",bag2:1,mirage2:0,oracle:0,paths:{cloudflare:"/cdn-cgi/nexp/dok8v=02fcfa4f56/"},atok:"eee59e90a8282bcfc7cd8af99a42a3da",petok:"be27fb120b12357f7533ba725a2f4f60c3538723-1394799545-1800",zone:"kohanaframework.org",rocket:"0",apps:{"ga_key":{"ua":"UA-27864271-1","ga_bs":"2"}}}];var a=document.createElement("script"),b=document.getElementsByTagName("script")[0];a.async=!0;a.src="//ajax.cloudflare.com/cdn-cgi/nexp/dok8v=b064e16429/cloudflare.min.js";b.parentNode.insertBefore(a,b);}}catch(e){};
//]]>
</script>
<link type="text/css" href="../../guide-media/css/print.css" rel="stylesheet" media="print" />
<link type="text/css" href="../../guide-media/css/screen.css" rel="stylesheet" media="screen" />
<link type="text/css" href="../../guide-media/css/kodoc.css" rel="stylesheet" media="screen" />
<link type="text/css" href="../../guide-media/css/shCore.css" rel="stylesheet" media="screen" />
<link type="text/css" href="../../guide-media/css/shThemeKodoc.css" rel="stylesheet" media="screen" />

<script type="text/javascript" src="../../guide-media/js/jquery.min.js"></script>
<script type="text/javascript" src="../../guide-media/js/jquery.cookie.js"></script>
<script type="text/javascript" src="../../guide-media/js/kodoc.js"></script>
<script type="text/javascript" src="../../guide-media/js/shCore.js"></script>
<script type="text/javascript" src="../../guide-media/js/shBrushPhp.js"></script>

<!--[if lt IE 9]>
<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
<![endif]-->
<script type="text/javascript">
/* <![CDATA[ */
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-27864271-1']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

(function(b){(function(a){"__CF"in b&&"DJS"in b.__CF?b.__CF.DJS.push(a):"addEventListener"in b?b.addEventListener("load",a,!1):b.attachEvent("onload",a)})(function(){"FB"in b&&"Event"in FB&&"subscribe"in FB.Event&&(FB.Event.subscribe("edge.create",function(a){_gaq.push(["_trackSocial","facebook","like",a])}),FB.Event.subscribe("edge.remove",function(a){_gaq.push(["_trackSocial","facebook","unlike",a])}),FB.Event.subscribe("message.send",function(a){_gaq.push(["_trackSocial","facebook","send",a])}));"twttr"in b&&"events"in twttr&&"bind"in twttr.events&&twttr.events.bind("tweet",function(a){if(a){var b;if(a.target&&a.target.nodeName=="IFRAME")a:{if(a=a.target.src){a=a.split("#")[0].match(/[^?=&]+=([^&]*)?/g);b=0;for(var c;c=a[b];++b)if(c.indexOf("url")===0){b=unescape(c.split("=")[1]);break a}}b=void 0}_gaq.push(["_trackSocial","twitter","tweet",b])}})})})(window);
/* ]]> */
</script>
</head>
<body>

	<div id="kodoc-header">
		<div class="container">
			<a href="http://kohanaframework.org/" id="kodoc-logo">
				<img src="../../guide-media/img/kohana.png" />
			</a>
			<div id="kodoc-menu">
				<ul>
					<li class="guide first">
						<a href="../../guide.1.html">User Guide</a>
					</li>
										<li class="api">
						<a href="../../guide-api.html">API Browser</a>
					</li>
									</ul>
			</div>
		</div>
	</div>

	<div id="kodoc-content">
		<div class="wrapper">
			<div class="container">
				<div class="span-22 prefix-1 suffix-1">
					<ul id="kodoc-breadcrumb">
																				<li><a href="../../guide.1.html">User Guide</a></li>
																											<li><a href="../kohana.1.html">Kohana</a></li>
																											<li class="last">Conventions and Style</li>
																		</ul>
				</div>
				<div class="span-6 prefix-1">
					<div id="kodoc-topics">
						<h2 id="kohana"><a href="index.html">Kohana</a></h2>

<ul>
<li><a href="install.html">Installation</a></li>
<li><span>Getting Started</span>

<ul>
<li><a href="conventions.html">Conventions and Style</a></li>
<li><a href="mvc.1.html">Model View Controller</a>

<ul>
<li><a href="mvc/controllers.html">Controllers</a></li>
<li><a href="mvc/models.html">Models</a></li>
<li><a href="mvc/views.html">Views</a></li>
</ul></li>
<li><a href="files.1.html">Cascading Filesystem</a>

<ul>
<li><a href="files/classes.html">Class Files</a></li>
<li><a href="files/config.html">Config Files</a></li>
<li><a href="files/i18n.html">Translation Files</a></li>
<li><a href="files/messages.html">Message Files</a></li>
</ul></li>
<li><a href="config.html">Configuration</a></li>
<li><a href="flow.html">Request Flow</a></li>
<li><a href="bootstrap.html">Bootstrap</a></li>
<li><a href="modules.html">Modules</a></li>
<li><a href="routing.html">Routing</a></li>
<li><a href="errors.html">Error Handling</a></li>
<li><a href="tips.html">Tips &amp; Common Mistakes</a></li>
<li><a href="upgrading.html">Upgrading from v3.2</a></li>
</ul></li>
<li><span>Basic Usage</span>

<ul>
<li><a href="debugging.html">Debugging</a></li>
<li><a href="autoloading.html">Loading Classes</a></li>
<li><a href="extension.html">Transparent Extension</a></li>
<li><a href="helpers.html">Helpers</a></li>
<li><a href="requests.html">Requests</a></li>
<li><a href="sessions.html">Sessions</a></li>
<li><a href="cookies.html">Cookies</a></li>
<li><a href="fragments.html">Fragments</a></li>
<li><a href="profiling.html">Profiling</a></li>
</ul></li>
<li><a href="security.1.html">Security</a>

<ul>
<li><a href="security/xss.html">XSS</a></li>
<li><a href="security/validation.html">Validation</a></li>
<li><a href="security/cookies.html">Cookies</a></li>
<li><a href="security/database.html">Database</a></li>
<li><a href="security/encryption.html">Encryption</a></li>
<li><a href="security/deploying.html">Deploying</a></li>
</ul></li>
<li><span>Tutorials</span>

<ul>
<li><a href="tutorials/hello-world.html">Hello World</a></li>
<li><a href="tutorials/simple-mvc.html">Simple MVC</a></li>
<li><a href="tutorials/error-pages.html">Custom Error Pages</a></li>
<li><a href="tutorials/clean-urls.html">Clean URLs</a></li>
<li><a href="tutorials/sharing-kohana.html">Sharing Kohana</a></li>
<li><a href="tutorials/library-kohana.html">Kohana as a Library</a></li>
<li><a href="tutorials/git.html">Working with Git</a></li>
</ul></li>
</ul>
					</div>
				</div>
				<div id="kodoc-body" class="span-16 suffix-1 last">
					<h1 id="conventions-and-coding-style">Conventions and Coding Style</h1>

<div class="page-toc">
					<a href="conventions.html#conventions-and-coding-style">Conventions and Coding Style</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#class-names-and-file-location">Class Names and File Location</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#class-name-examples">Examples</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#coding-standards">Coding Standards</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#brackets">Brackets</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#curly-brackets">Curly Brackets</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#class-brackets">Class Brackets</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#empty-brackets">Empty Brackets</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#array-brackets">Array Brackets</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#opening-parenthesis">Opening Parenthesis</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#closing-parenthesis">Closing parenthesis</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#single-dimension">Single Dimension</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#multidimensional">Multidimensional</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#arrays-as-function-arguments">Arrays as Function Arguments</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#naming-conventions">Naming Conventions</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#classes">Classes</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#functions-and-methods">Functions and Methods</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#variables">Variables</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#indentation">Indentation</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#string-concatenation">String Concatenation</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#single-line-statements">Single Line Statements</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#comparison-operations">Comparison Operations</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#switch-structures">Switch Structures</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#parentheses">Parentheses</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#ternaries">Ternaries</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#type-casting">Type Casting</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#constants">Constants</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#comments">Comments</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#one-line-comments">One-line Comments</a><br />
					&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;				<a href="conventions.html#regular-expressions">Regular Expressions</a><br />
	</div>
<p>It is encouraged that you follow Kohana's coding style. This makes code more readable and allows for easier code sharing and contributing.</p>

<h2 id="class-names-and-file-location">Class Names and File Location</h2>

<p>Class names in Kohana follow a strict convention to facilitate <a href="autoloading.html">autoloading</a>. Class names should have uppercase first letters with underscores to separate words. Underscores are significant as they directly reflect the file location in the filesystem.</p>

<p>The following conventions apply:</p>

<ol>
<li>CamelCased class names should be used when it is undesirable to create a new directory level.</li>
<li>All class file names and directory names must match the case of the class as per <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md">PSR-0</a>.</li>
<li>All classes should be in the <code>classes</code> directory. This may be at any level in the <a href="files.1.html">cascading filesystem</a>.</li>
</ol>

<h3 id="class-name-examples">Examples</h3>

<p>Remember that in a class, an underscore means a new directory. Consider the following examples:</p>

<table>
<thead>
<tr>
  <th>Class Name</th>
  <th>File Path</th>
</tr>
</thead>
<tbody>
<tr>
  <td>Controller_Template</td>
  <td>classes/Controller/Template.php</td>
</tr>
<tr>
  <td>Model_User</td>
  <td>classes/Model/User.php</td>
</tr>
<tr>
  <td>Model_BlogPost</td>
  <td>classes/Model/BlogPost.php</td>
</tr>
<tr>
  <td>Database</td>
  <td>classes/Database.php</td>
</tr>
<tr>
  <td>Database_Query</td>
  <td>classes/Database/Query.php</td>
</tr>
<tr>
  <td>Form</td>
  <td>classes/Form.php</td>
</tr>
</tbody>
</table>

<h2 id="coding-standards">Coding Standards</h2>

<p>In order to produce highly consistent source code, we ask that everyone follow the coding standards as closely as possible.</p>

<h3 id="brackets">Brackets</h3>

<p>Please use <a href="http://en.wikipedia.org/wiki/Indent_style#BSD.2FAllman_style">BSD/Allman Style</a> bracketing.</p>

<h4 id="curly-brackets">Curly Brackets</h4>

<p>Curly brackets are placed on their own line, indented to the same level as the control statement.</p>

<pre><code>// Correct
if ($a === $b)
{
    ...
}
else
{
    ...
}

// Incorrect
if ($a === $b) {
    ...
} else {
    ...
}
</code></pre>

<h4 id="class-brackets">Class Brackets</h4>

<p>The only exception to the curly bracket rule is, the opening bracket of a class goes on the same line.</p>

<pre><code>// Correct
class Foo {

// Incorrect
class Foo
{
</code></pre>

<h4 id="empty-brackets">Empty Brackets</h4>

<p>Don't put any characters inside empty brackets.</p>

<pre><code>// Correct
class Foo {}

// Incorrect
class Foo { }
</code></pre>

<h4 id="array-brackets">Array Brackets</h4>

<p>Arrays may be single line or multi-line.</p>

<pre><code>array('a' =&gt; 'b', 'c' =&gt; 'd')

array(
    'a' =&gt; 'b', 
    'c' =&gt; 'd',
)
</code></pre>

<h5 id="opening-parenthesis">Opening Parenthesis</h5>

<p>The opening array parenthesis goes on the same line.</p>

<pre><code>// Correct
array(
    ...
)

// Incorrect:
array
(
    ...
)
</code></pre>

<h5 id="closing-parenthesis">Closing parenthesis</h5>

<h6 id="single-dimension">Single Dimension</h6>

<p>The closing parenthesis of a multi-line single dimension array is placed on its own line, indented to the same level as the assignment or statement.</p>

<pre><code>// Correct
$array = array(
    ...
)

// Incorrect
$array = array(
    ...
    )
</code></pre>

<h6 id="multidimensional">Multidimensional</h6>

<p>The nested array is indented one tab to the right, following the single dimension rules.</p>

<pre><code>// Correct
array(
    'arr' =&gt; array(
        ...
    ),
    'arr' =&gt; array(
        ...
    ),
)

array(
    'arr' =&gt; array(...),
    'arr' =&gt; array(...),
)
</code></pre>

<h5 id="arrays-as-function-arguments">Arrays as Function Arguments</h5>

<pre><code>// Correct
do(array(
    ...
))

// Incorrect
do(array(
    ...
    ))
</code></pre>

<p>As noted at the start of the array bracket section, single line syntax is also valid.</p>

<pre><code>// Correct
do(array(...))

// Alternative for wrapping long lines
do($bar, 'this is a very long line',
    array(...));
</code></pre>

<h3 id="naming-conventions">Naming Conventions</h3>

<p>Kohana uses under_score naming, not camelCase naming.</p>

<h4 id="classes">Classes</h4>

<pre><code>// Controller class, uses Controller_ prefix
class Controller_Apple extends Controller {

// Model class, uses Model_ prefix
class Model_Cheese extends Model {

// Regular class
class Peanut {
</code></pre>

<p>When creating an instance of a class, don't use parentheses if you're not passing something on to the constructor:</p>

<pre><code>// Correct:
$db = new Database;

// Incorrect:
$db = new Database();
</code></pre>

<h4 id="functions-and-methods">Functions and Methods</h4>

<p>Functions should be all lowercase, and use under_scores to separate words:</p>

<pre><code>function drink_beverage($beverage)
{
</code></pre>

<h4 id="variables">Variables</h4>

<p>All variables should be lowercase and use under_score, not camelCase:</p>

<pre><code>// Correct:
$foo = 'bar';
$long_example = 'uses underscores';

// Incorrect:
$weDontWantThis = 'understood?';
</code></pre>

<h3 id="indentation">Indentation</h3>

<p>You must use tabs to indent your code. Using spaces for tabbing is strictly forbidden.</p>

<p>Vertical spacing (for multi-line) is done with spaces. Tabs are not good for vertical alignment because different people have different tab widths.</p>

<pre><code>$text = 'this is a long text block that is wrapped. Normally, we aim for '
      .'wrapping at 80 chars. Vertical alignment is very important for '
      .'code readability. Remember that all indentation is done with tabs,'
      .'but vertical alignment should be completed with spaces, after '
      .'indenting with tabs.';
</code></pre>

<h3 id="string-concatenation">String Concatenation</h3>

<p>Do not put spaces around the concatenation operator:</p>

<pre><code>// Correct:
$str = 'one'.$var.'two';

// Incorrect:
$str = 'one'. $var .'two';
$str = 'one' . $var . 'two';
</code></pre>

<h3 id="single-line-statements">Single Line Statements</h3>

<p>Single-line IF statements should only be used when breaking normal execution (e.g. return or continue):</p>

<pre><code>// Acceptable:
if ($foo == $bar)
    return $foo;

if ($foo == $bar)
    continue;

if ($foo == $bar)
    break;

if ($foo == $bar)
    throw new Exception('You screwed up!');

// Not acceptable:
if ($baz == $bun)
    $baz = $bar + 2;
</code></pre>

<h3 id="comparison-operations">Comparison Operations</h3>

<p>Please use OR and AND for comparison:</p>

<pre><code>// Correct:
if (($foo AND $bar) OR ($b AND $c))

// Incorrect:
if (($foo &amp;&amp; $bar) || ($b &amp;&amp; $c))
</code></pre>

<p>Please use elseif, not else if:</p>

<pre><code>// Correct:
elseif ($bar)

// Incorrect:
else if($bar)
</code></pre>

<h3 id="switch-structures">Switch Structures</h3>

<p>Each case, break and default should be on a separate line. The block inside a case or default must be indented by 1 tab.</p>

<pre><code>switch ($var)
{
    case 'bar':
    case 'foo':
        echo 'hello';
    break;
    case 1:
        echo 'one';
    break;
    default:
        echo 'bye';
    break;
}
</code></pre>

<h3 id="parentheses">Parentheses</h3>

<p>There should be one space after statement name, followed by a parenthesis. The ! (bang) character must have a space on either side to ensure maximum readability. Except in the case of a bang or type casting, there should be no whitespace after an opening parenthesis or before a closing parenthesis.</p>

<pre><code>// Correct:
if ($foo == $bar)
if ( ! $foo)

// Incorrect:
if($foo == $bar)
if(!$foo)
if ((int) $foo)
if ( $foo == $bar )
if (! $foo)
</code></pre>

<h3 id="ternaries">Ternaries</h3>

<p>All ternary operations should follow a standard format. Use parentheses around expressions only, not around just variables.</p>

<pre><code>$foo = ($bar == $foo) ? $foo : $bar;
$foo = $bar ? $foo : $bar;
</code></pre>

<p>All comparisons and operations must be done inside of a parentheses group:</p>

<pre><code>$foo = ($bar &gt; 5) ? ($bar + $foo) : strlen($bar);
</code></pre>

<p>When separating complex ternaries (ternaries where the first part goes beyond ~80 chars) into multiple lines, spaces should be used to line up operators, which should be at the front of the successive lines:</p>

<pre><code>$foo = ($bar == $foo)
     ? $foo
     : $bar;
</code></pre>

<h3 id="type-casting">Type Casting</h3>

<p>Type casting should be done with spaces on each side of the cast:</p>

<pre><code>// Correct:
$foo = (string) $bar;
if ( (string) $bar)

// Incorrect:
$foo = (string)$bar;
</code></pre>

<p>When possible, please use type casting instead of ternary operations:</p>

<pre><code>// Correct:
$foo = (bool) $bar;

// Incorrect:
$foo = ($bar == TRUE) ? TRUE : FALSE;
</code></pre>

<p>When casting type to integer or boolean, use the short format:</p>

<pre><code>// Correct:
$foo = (int) $bar;
$foo = (bool) $bar;

// Incorrect:
$foo = (integer) $bar;
$foo = (boolean) $bar;
</code></pre>

<h3 id="constants">Constants</h3>

<p>Always use uppercase for constants:</p>

<pre><code>// Correct:
define('MY_CONSTANT', 'my_value');
$a = TRUE;
$b = NULL;

// Incorrect:
define('MyConstant', 'my_value');
$a = True;
$b = null;
</code></pre>

<p>Place constant comparisons at the end of tests:</p>

<pre><code>// Correct:
if ($foo !== FALSE)

// Incorrect:
if (FALSE !== $foo)
</code></pre>

<p>This is a slightly controversial choice, so I will explain the reasoning. If we were to write the previous example in plain English, the correct example would read:</p>

<pre><code>if variable $foo is not exactly FALSE
</code></pre>

<p>And the incorrect example would read:</p>

<pre><code>if FALSE is not exactly variable $foo
</code></pre>

<p>Since we are reading left to right, it simply doesn't make sense to put the constant first.</p>

<h3 id="comments">Comments</h3>

<h4 id="one-line-comments">One-line Comments</h4>

<p>Use //, preferably above the line of code you're commenting on. Leave a space after it and start with a capital. Never use #.</p>

<pre><code>// Correct

//Incorrect
// incorrect
# Incorrect
</code></pre>

<h3 id="regular-expressions">Regular Expressions</h3>

<p>When coding regular expressions please use PCRE rather than the POSIX flavor. PCRE is considered more powerful and faster.</p>

<pre><code>// Correct:
if (preg_match('/abc/i', $str))

// Incorrect:
if (eregi('abc', $str))
</code></pre>

<p>Use single quotes around your regular expressions rather than double quotes. Single-quoted strings are more convenient because of their simplicity. Unlike double-quoted strings they don't support variable interpolation nor integrated backslash sequences like \n or \t, etc.</p>

<pre><code>// Correct:
preg_match('/abc/', $str);

// Incorrect:
preg_match("/abc/", $str);
</code></pre>

<p>When performing a regular expression search and replace, please use the $n notation for backreferences. This is preferred over &#92;n.</p>

<pre><code>// Correct:
preg_replace('/(\d+) dollar/', '$1 euro', $str);

// Incorrect:
preg_replace('/(\d+) dollar/', '\\1 euro', $str);
</code></pre>

<p>Finally, please note that the $ character for matching the position at the end of the line allows for a following newline character. Use the D modifier to fix this if needed. <a href="http://blog.php-security.org/archives/76-Holes-in-most-preg_match-filters.html">More info</a>.</p>

<pre><code>$str = "<a class="__cf_email__" href="http://www.cloudflare.com/email-protection" data-cfemail="b4d1d9d5ddd8f4d1ccd5d9c4d8d19ad7dbd9">[email&nbsp;protected]</a><script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l,b=document.getElementsByTagName("script");l=b[b.length-1].previousSibling;a=l.getAttribute('data-cfemail');if(a){s='';r=parseInt(a.substr(0,2),16);for(j=2;a.length-j;j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}s=document.createTextNode(s);l.parentNode.replaceChild(s,l);}}catch(e){}})();
/* ]]> */
</script>\n";

preg_match('/^.+@.+$/', $str);  // TRUE
preg_match('/^.+@.+$/D', $str); // FALSE
</code></pre>

									</div>
			</div>
		</div>
	</div>

	<div id="kodoc-footer">
		<div class="container">
			<div class="span-12">
							<p>&copy; 2008–2012 Kohana Team</p>
						</div>
			<div class="span-12 last right">
			<p>Powered by <a href="http://kohanaframework.org/">Kohana</a> v3.3.1</p>
			</div>
		</div>
	</div>

</body>
</html>
