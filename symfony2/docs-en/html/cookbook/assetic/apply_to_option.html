
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>How to Apply an Assetic Filter to a Specific File Extension &mdash; Symfony2Docs 2.2 documentation</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-2.3.1/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootswatch/2.3.1/spacelab/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-2.3.1/css/bootstrap-responsive.min.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-2.3.1/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="Symfony2Docs 2.2 documentation" href="../../index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>
<div class="container">
  
  <div id="navbar" class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <a class="brand" href="../../index.html">Symfony</a>
      <span class="navbar-text pull-left"><b>2.2</b></span>

      <div class="nav-collapse">
        <ul class="nav">
          <li class="divider-vertical"></li>
          
            <li class="dropdown globaltoc-container">
  <a href="../../index.html"
     class="dropdown-toggle"
     data-toggle="dropdown">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
    ><ul class="simple">
</ul>
</ul>
</li>
            <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"><ul>
<li><a class="reference internal" href="#">How to Apply an Assetic Filter to a Specific File Extension</a><ul>
<li><a class="reference internal" href="#filter-a-single-file">Filter a Single File</a></li>
<li><a class="reference internal" href="#filter-multiple-files">Filter Multiple Files</a></li>
<li><a class="reference internal" href="#filtering-based-on-a-file-extension">Filtering based on a File Extension</a></li>
</ul>
</li>
</ul>
</ul>
</li>
          
          
            
          
          
            <li>
  <a href="../../_sources/cookbook/assetic/apply_to_option.txt"
     rel="nofollow">Source</a></li>
          
        </ul>

        
          
<form class="navbar-search pull-right" style="margin-bottom:-3px;" action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        
      </div>
    </div>
  </div>

  
  <div class="section" id="how-to-apply-an-assetic-filter-to-a-specific-file-extension">
<span id="index-0"></span><h1>How to Apply an Assetic Filter to a Specific File Extension<a class="headerlink" href="#how-to-apply-an-assetic-filter-to-a-specific-file-extension" title="Permalink to this headline">¶</a></h1>
<p>Assetic filters can be applied to individual files, groups of files or even,
as you&#8217;ll see here, files that have a specific extension. To show you how
to handle each option, let&#8217;s suppose that you want to use Assetic&#8217;s CoffeeScript
filter, which compiles CoffeeScript files into Javascript.</p>
<p>The main configuration is just the paths to coffee and node. These default
respectively to <tt class="docutils literal"><span class="pre">/usr/bin/coffee</span></tt> and <tt class="docutils literal"><span class="pre">/usr/bin/node</span></tt>:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># app/config/config.yml</span>
<span class="l-Scalar-Plain">assetic</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">filters</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">coffee</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">bin</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/usr/bin/coffee</span>
            <span class="l-Scalar-Plain">node</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/usr/bin/node</span>
</pre></div>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/config.xml --&gt;</span>
<span class="nt">&lt;assetic:config&gt;</span>
    <span class="nt">&lt;assetic:filter</span>
        <span class="na">name=</span><span class="s">&quot;coffee&quot;</span>
        <span class="na">bin=</span><span class="s">&quot;/usr/bin/coffee&quot;</span>
        <span class="na">node=</span><span class="s">&quot;/usr/bin/node&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/assetic:config&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/config.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;assetic&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;filters&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;coffee&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;bin&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/usr/bin/coffee&#39;</span><span class="p">,</span>
            <span class="s1">&#39;node&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/usr/bin/node&#39;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="filter-a-single-file">
<h2>Filter a Single File<a class="headerlink" href="#filter-a-single-file" title="Permalink to this headline">¶</a></h2>
<p>You can now serve up a single CoffeeScript file as JavaScript from within your
templates:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">javascripts</span> <span class="s1">&#39;@AcmeFooBundle/Resources/public/js/example.coffee&#39;</span> <span class="nv">filter</span><span class="o">=</span><span class="s1">&#39;coffee&#39;</span> <span class="cp">%}</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">asset_url</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="cp">{%</span> <span class="k">endjavascripts</span> <span class="cp">%}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-html+php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;assetic&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">javascripts</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;@AcmeFooBundle/Resources/public/js/example.coffee&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;coffee&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="nv">$url</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">escape</span><span class="p">(</span><span class="nv">$url</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="s">&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>This is all that&#8217;s needed to compile this CoffeeScript file and server it
as the compiled JavaScript.</p>
</div>
<div class="section" id="filter-multiple-files">
<h2>Filter Multiple Files<a class="headerlink" href="#filter-multiple-files" title="Permalink to this headline">¶</a></h2>
<p>You can also combine multiple CoffeeScript files into a single output file:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">javascripts</span> <span class="s1">&#39;@AcmeFooBundle/Resources/public/js/example.coffee&#39;</span>
               <span class="s1">&#39;@AcmeFooBundle/Resources/public/js/another.coffee&#39;</span>
    <span class="nv">filter</span><span class="o">=</span><span class="s1">&#39;coffee&#39;</span> <span class="cp">%}</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">asset_url</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="cp">{%</span> <span class="k">endjavascripts</span> <span class="cp">%}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-html+php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;assetic&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">javascripts</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;@AcmeFooBundle/Resources/public/js/example.coffee&#39;</span><span class="p">,</span>
          <span class="s1">&#39;@AcmeFooBundle/Resources/public/js/another.coffee&#39;</span><span class="p">),</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;coffee&#39;</span><span class="p">))</span> <span class="k">as</span> <span class="nv">$url</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">escape</span><span class="p">(</span><span class="nv">$url</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="s">&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>Both the files will now be served up as a single file compiled into regular
JavaScript.</p>
</div>
<div class="section" id="filtering-based-on-a-file-extension">
<span id="cookbook-assetic-apply-to"></span><h2>Filtering based on a File Extension<a class="headerlink" href="#filtering-based-on-a-file-extension" title="Permalink to this headline">¶</a></h2>
<p>One of the great advantages of using Assetic is reducing the number of asset
files to lower HTTP requests. In order to make full use of this, it would
be good to combine <em>all</em> your JavaScript and CoffeeScript files together
since they will ultimately all be served as JavaScript. Unfortunately just
adding the JavaScript files to the files to be combined as above will not
work as the regular JavaScript files will not survive the CoffeeScript compilation.</p>
<p>This problem can be avoided by using the <tt class="docutils literal"><span class="pre">apply_to</span></tt> option in the config,
which allows you to specify that a filter should always be applied to particular
file extensions. In this case you can specify that the Coffee filter is
applied to all <tt class="docutils literal"><span class="pre">.coffee</span></tt> files:</p>
<div class="configuration-block">
<ul class="simple">
<li><em>YAML</em><div class="highlight-yaml"><pre># app/config/config.yml
assetic:
    filters:
        coffee:
            bin: /usr/bin/coffee
            node: /usr/bin/node
            apply_to: "\.coffee$"</pre>
</div>
</li>
<li><em>XML</em><div class="highlight-xml"><div class="highlight"><pre><span class="c">&lt;!-- app/config/config.xml --&gt;</span>
<span class="nt">&lt;assetic:config&gt;</span>
    <span class="nt">&lt;assetic:filter</span>
        <span class="na">name=</span><span class="s">&quot;coffee&quot;</span>
        <span class="na">bin=</span><span class="s">&quot;/usr/bin/coffee&quot;</span>
        <span class="na">node=</span><span class="s">&quot;/usr/bin/node&quot;</span>
        <span class="na">apply_to=</span><span class="s">&quot;\.coffee$&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/assetic:config&gt;</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-php"><div class="highlight"><pre><span class="c1">// app/config/config.php</span>
<span class="nv">$container</span><span class="o">-&gt;</span><span class="na">loadFromExtension</span><span class="p">(</span><span class="s1">&#39;assetic&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;filters&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;coffee&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;bin&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/usr/bin/coffee&#39;</span><span class="p">,</span>
            <span class="s1">&#39;node&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;/usr/bin/node&#39;</span><span class="p">,</span>
            <span class="s1">&#39;apply_to&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;\.coffee$&#39;</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">),</span>
<span class="p">));</span>
</pre></div>
</div>
</li>
</ul>
</div>
<p>With this, you no longer need to specify the <tt class="docutils literal"><span class="pre">coffee</span></tt> filter in the template.
You can also list regular JavaScript files, all of which will be combined
and rendered as a single JavaScript file (with only the <tt class="docutils literal"><span class="pre">.coffee</span></tt> files
being run through the CoffeeScript filter):</p>
<div class="configuration-block">
<ul class="simple">
<li><em>Twig</em><div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">javascripts</span> <span class="s1">&#39;@AcmeFooBundle/Resources/public/js/example.coffee&#39;</span>
               <span class="s1">&#39;@AcmeFooBundle/Resources/public/js/another.coffee&#39;</span>
               <span class="s1">&#39;@AcmeFooBundle/Resources/public/js/regular.js&#39;</span> <span class="cp">%}</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">asset_url</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="cp">{%</span> <span class="k">endjavascripts</span> <span class="cp">%}</span>
</pre></div>
</div>
</li>
<li><em>PHP</em><div class="highlight-html+php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="k">foreach</span> <span class="p">(</span><span class="nv">$view</span><span class="p">[</span><span class="s1">&#39;assetic&#39;</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">javascripts</span><span class="p">(</span>
    <span class="k">array</span><span class="p">(</span><span class="s1">&#39;@AcmeFooBundle/Resources/public/js/example.coffee&#39;</span><span class="p">,</span>
          <span class="s1">&#39;@AcmeFooBundle/Resources/public/js/another.coffee&#39;</span><span class="p">,</span>
          <span class="s1">&#39;@AcmeFooBundle/Resources/public/js/regular.js&#39;</span><span class="p">),</span>
    <span class="k">as</span> <span class="nv">$url</span><span class="p">)</span><span class="o">:</span> <span class="cp">?&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;</span><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">escape</span><span class="p">(</span><span class="nv">$url</span><span class="p">)</span> <span class="cp">?&gt;</span><span class="s">&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="cp">&lt;?php</span> <span class="k">endforeach</span><span class="p">;</span> <span class="cp">?&gt;</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
</div>


</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2013, Symfony Team.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.<br/>
    </p>
  </div>
</footer>
  </body>
</html>