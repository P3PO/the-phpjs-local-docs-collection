

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Technology &mdash; Doctrine 1.2.4 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.2.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Doctrine 1.2.4 documentation" href="../../index.html" />
    <link rel="up" title="Doctrine 1.2 ORM Manual" href="index.html" />
    <link rel="next" title="Exceptions and Warnings" href="exceptions-and-warnings.html" />
    <link rel="prev" title="Improving Performance" href="improving-performance.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="exceptions-and-warnings.html" title="Exceptions and Warnings"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="improving-performance.html" title="Improving Performance"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">Doctrine 1.2.4 documentation</a> &raquo;</li>
          <li><a href="../index.html" >English Documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Doctrine 1.2 ORM Manual</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="technology">
<h1>Technology<a class="headerlink" href="#technology" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Doctrine is a product of the work of many people. Not just the people
who have coded and documented this software are the only ones
responsible for this great framework. Other ORMs in other languages are
a major resource for us as we can learn from what they have already
done.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Doctrine has also borrowed pieces of code from other open
source projects instead of re-inventing the wheel. Two of the
projects borrowed from are <a class="reference external" href="http://www.symfony-project.com">symfony</a>
and the <a class="reference external" href="http://framework.zend.com">Zend Framework</a>. The relevant
license information can be found in the root of Doctrine when you
<a class="reference external" href="http://www.doctrine-project.org">download</a> it in a file named
<tt class="docutils literal"><span class="pre">LICENSE</span></tt>.</p>
</div>
</div>
<div class="section" id="architecture">
<h2>Architecture<a class="headerlink" href="#architecture" title="Permalink to this headline">¶</a></h2>
<p>Doctrine is divided into three main packages: CORE, ORM and DBAL. Below
is a list of some of the main classes that make up each of the packages.</p>
<div class="section" id="doctrine-core">
<h3>Doctrine CORE<a class="headerlink" href="#doctrine-core" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Doctrine</li>
<li><a class="reference internal" href="component-overview.html#component-overview-manager"><em>Doctrine_Manager</em></a></li>
<li><a class="reference internal" href="component-overview.html#component-overview-connection"><em>Doctrine_Connection</em></a></li>
<li><a class="reference internal" href="improving-performance.html#improving-performance-compile"><em>Doctrine_Compiler</em></a></li>
<li><a class="reference internal" href="exceptions-and-warnings.html"><em>Doctrine_Exception</em></a></li>
<li>Doctrine_Formatter</li>
<li>Doctrine_Object</li>
<li>Doctrine_Null</li>
<li><a class="reference internal" href="event-listeners.html"><em>Doctrine_Event</em></a></li>
<li>Doctrine_Overloadable</li>
<li>Doctrine_Configurable</li>
<li><a class="reference internal" href="event-listeners.html"><em>Doctrine_EventListener</em></a></li>
</ul>
</div>
<div class="section" id="doctrine-dbal">
<h3>Doctrine DBAL<a class="headerlink" href="#doctrine-dbal" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="component-overview.html#component-overview-using-expression-values"><em>Doctrine_Expression_Driver</em></a></li>
<li><a class="reference internal" href="database-abstraction-layer.html#database-abstraction-layer-export"><em>Doctrine_Export</em></a></li>
<li><a class="reference internal" href="database-abstraction-layer.html#database-abstraction-layer-import"><em>Doctrine_Import</em></a></li>
<li>Doctrine_Sequence</li>
<li><a class="reference internal" href="transactions.html"><em>Doctrine_Transaction</em></a></li>
<li><a class="reference internal" href="database-abstraction-layer.html#database-abstraction-layer-datadict"><em>Doctrine_DataDict</em></a></li>
</ul>
<p>Doctrine DBAL is also divided into driver packages.</p>
</div>
<div class="section" id="doctrine-orm">
<h3>Doctrine ORM<a class="headerlink" href="#doctrine-orm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="component-overview.html#component-overview-record"><em>Doctrine_Record</em></a></li>
<li><a class="reference internal" href="component-overview.html#component-overview-table"><em>Doctrine_Table</em></a></li>
<li><a class="reference internal" href="defining-models.html#defining-models-relationships"><em>Doctrine_Relation</em></a></li>
<li><a class="reference internal" href="component-overview.html#component-overview-using-expression-values"><em>Doctrine_Expression</em></a></li>
<li><a class="reference internal" href="dql-doctrine-query-language.html"><em>Doctrine_Query</em></a></li>
<li><a class="reference internal" href="native-sql.html"><em>Doctrine_RawSql</em></a></li>
<li><a class="reference internal" href="component-overview.html#component-overview-collection"><em>Doctrine_Collection</em></a></li>
<li>Doctrine_Tokenizer</li>
</ul>
<p>Other miscellaneous packages.</p>
<ul class="simple">
<li><a class="reference internal" href="data-validation.html"><em>Doctrine_Validator</em></a></li>
<li>Doctrine_Hook</li>
<li><a class="reference internal" href="component-overview.html#component-overview-views"><em>Doctrine_View</em></a></li>
</ul>
<p>There are also behaviors for Doctrine:</p>
<ul class="simple">
<li><a class="reference internal" href="behaviors.html#behaviors-core-behaviors-geographical"><em>Geographical</em></a></li>
<li><a class="reference internal" href="behaviors.html#behaviors-core-behaviors-i18n"><em>I18n</em></a></li>
<li><a class="reference internal" href="behaviors.html#behaviors-core-behaviors-nestedset"><em>NestedSet</em></a></li>
<li><a class="reference internal" href="behaviors.html#behaviors-core-behaviors-searchable"><em>Searchable</em></a></li>
<li><a class="reference internal" href="behaviors.html#behaviors-core-behaviors-sluggable"><em>Sluggable</em></a></li>
<li><a class="reference internal" href="behaviors.html#behaviors-core-behaviors-softdelete"><em>SoftDelete</em></a></li>
<li><a class="reference internal" href="behaviors.html#behaviors-core-behaviors-timestampable"><em>Timestampable</em></a></li>
<li><a class="reference internal" href="behaviors.html#behaviors-core-behaviors-versionable"><em>Versionable</em></a></li>
</ul>
</div>
</div>
<div class="section" id="design-patterns-used">
<h2>Design Patterns Used<a class="headerlink" href="#design-patterns-used" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">GoF</span> <span class="pre">(Gang</span> <span class="pre">of</span> <span class="pre">Four)</span></tt> design patterns used:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.dofactory.com/Patterns/PatternSingleton.aspx">Singleton</a>, for forcing only one instance of <a href="#id1"><span class="problematic" id="id2">:php:class:`Doctrine_Manager`</span></a></li>
<li><a class="reference external" href="http://www.dofactory.com/Patterns/PatternComposite.aspx">Composite</a>, for leveled configuration</li>
<li><a class="reference external" href="http://www.dofactory.com/Patterns/PatternFactory.aspx">Factory</a>, for connection driver loading and many other things</li>
<li><a class="reference external" href="http://www.dofactory.com/Patterns/PatternObserver.aspx">Observer</a>, for event listening</li>
<li><a class="reference external" href="http://www.dofactory.com/Patterns/PatternFlyweight.aspx">Flyweight</a>, for efficient usage of validators</li>
<li><a class="reference external" href="http://www.dofactory.com/Patterns/PatternFlyweight.aspx">Iterator</a>, for iterating through components (Tables, Connections, Records etc.)</li>
<li><a class="reference external" href="http://www.dofactory.com/Patterns/PatternState.aspx">State</a>, for state-wise connections</li>
<li><a class="reference external" href="http://www.dofactory.com/Patterns/PatternStrategy.aspx">Strategy</a>, for algorithm strategies</li>
</ul>
<p>Enterprise application design patterns used:</p>
<ul class="simple">
<li><a class="reference external" href="http://www.martinfowler.com/eaaCatalog/activeRecord.html">Active Record</a>, Doctrine is an implementation of this pattern</li>
<li><a class="reference external" href="http://www.martinfowler.com/eaaCatalog/unitOfWork.html">UnitOfWork</a>, for maintaining a list of objects affected in a transaction</li>
<li><a class="reference external" href="http://www.martinfowler.com/eaaCatalog/identityField.html">Identity Field</a>, for maintaining the identity between record and database row</li>
<li><a class="reference external" href="http://www.martinfowler.com/eaaCatalog/metadataMapping.html">Metadata Mapping</a>, for Doctrine DataDict</li>
<li><a class="reference external" href="http://www.martinfowler.com/eaaCatalog/dependentMapping.html">Dependent Mapping</a>, for mapping in general, since all records extend <a href="#id3"><span class="problematic" id="id4">:php:class:`Doctrine_Record`</span></a> which performs all mappings</li>
<li><a class="reference external" href="http://www.martinfowler.com/eaaCatalog/foreignKeyMapping.html">Foreign Key Mapping</a>, for one-to-one, one-to-many and many-to-one relationships</li>
<li><a class="reference external" href="http://www.martinfowler.com/eaaCatalog/associationTableMapping.html">Association Table Mapping</a>, for association table mapping (most commonly many-to-many relationships)</li>
<li><a class="reference external" href="http://www.martinfowler.com/eaaCatalog/lazyLoad.html">Lazy Load</a>, for lazy loading of objects and object properties</li>
<li><a class="reference external" href="http://www.martinfowler.com/eaaCatalog/queryObject.html">Query Object</a>, DQL API is actually an extension to the basic idea of Query Object pattern</li>
</ul>
</div>
<div class="section" id="speed">
<h2>Speed<a class="headerlink" href="#speed" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Lazy initialization</strong> - For collection elements</li>
<li><strong>Subselect fetching</strong> - Doctrine knows how to fetch collections
efficiently using a subselect.</li>
<li><strong>Executing SQL statements later, when needed</strong> : The connection
never issues an INSERT or UPDATE until it is actually needed. So if
an exception occurs and you need to abort the transaction, some
statements will never actually be issued. Furthermore, this keeps
lock times in the database as short as possible (from the late UPDATE
to the transaction end).</li>
<li><strong>Join fetching</strong> - Doctrine knows how to fetch complex object graphs
using joins and subselects</li>
<li><strong>Multiple collection fetching strategies</strong> - Doctrine has multiple
collection fetching strategies for performance tuning.</li>
<li><strong>Dynamic mixing of fetching strategies</strong> - Fetching strategies can
be mixed and for example users can be fetched in a batch collection
while users&#8217; phonenumbers are loaded in offset collection using only
one query.</li>
<li><strong>Driver specific optimizations</strong> - Doctrine knows things like
bulk-insert on mysql.</li>
<li><strong>Transactional single-shot delete</strong> - Doctrine knows how to gather
all the primary keys of the pending objects in delete list and
performs only one sql delete statement per table.</li>
<li><strong>Updating only the modified columns.</strong> - Doctrine always knows which
columns have been changed.</li>
<li><strong>Never inserting/updating unmodified objects.</strong> - Doctrine knows if
the the state of the record has changed.</li>
<li><strong>PDO for database abstraction</strong> - PDO is by far the fastest
availible database abstraction layer for php.</li>
</ul>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>This chapter should have given you a complete birds eye view of all the
components of Doctrine and how they are organized. Up until now you have
seen them all used a part from each other but the separate lists of the
three main packages should have made things very clear for you if it was
not already.</p>
<p>Now we are ready to move on and learn about how to deal with Doctrine
throwing exceptions in the <a class="reference internal" href="exceptions-and-warnings.html"><em>Exceptions and Warnings</em></a> chapter.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Technology</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#architecture">Architecture</a><ul>
<li><a class="reference internal" href="#doctrine-core">Doctrine CORE</a></li>
<li><a class="reference internal" href="#doctrine-dbal">Doctrine DBAL</a></li>
<li><a class="reference internal" href="#doctrine-orm">Doctrine ORM</a></li>
</ul>
</li>
<li><a class="reference internal" href="#design-patterns-used">Design Patterns Used</a></li>
<li><a class="reference internal" href="#speed">Speed</a></li>
<li><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="improving-performance.html"
                        title="previous chapter">Improving Performance</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="exceptions-and-warnings.html"
                        title="next chapter">Exceptions and Warnings</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/en/manual/technology.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="exceptions-and-warnings.html" title="Exceptions and Warnings"
             >next</a> |</li>
        <li class="right" >
          <a href="improving-performance.html" title="Improving Performance"
             >previous</a> |</li>
        <li><a href="../../index.html">Doctrine 1.2.4 documentation</a> &raquo;</li>
          <li><a href="../index.html" >English Documentation</a> &raquo;</li>
          <li><a href="index.html" >Doctrine 1.2 ORM Manual</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Jonathan Wage and Contributors.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>