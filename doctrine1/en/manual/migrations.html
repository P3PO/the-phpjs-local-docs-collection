

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Migrations &mdash; Doctrine 1.2.4 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.2.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Doctrine 1.2.4 documentation" href="../../index.html" />
    <link rel="up" title="Doctrine 1.2 ORM Manual" href="index.html" />
    <link rel="next" title="Extensions" href="extensions.html" />
    <link rel="prev" title="Caching" href="caching.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="extensions.html" title="Extensions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="caching.html" title="Caching"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">Doctrine 1.2.4 documentation</a> &raquo;</li>
          <li><a href="../index.html" >English Documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Doctrine 1.2 ORM Manual</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="migrations">
<h1>Migrations<a class="headerlink" href="#migrations" title="Permalink to this headline">¶</a></h1>
<p>The Doctrine migration package allows you to easily update your
production databases through a nice programmatic interface. The changes
are done in a way so that your database is versioned and you can walk
backwards and forwards through the database versions.</p>
<div class="section" id="performing-migrations">
<h2>Performing Migrations<a class="headerlink" href="#performing-migrations" title="Permalink to this headline">¶</a></h2>
<p>Before we learn how to create the migration classes lets take a look at
how we can run migrations so that we can implement them in our Doctrine
test environment in the next section.</p>
<p>First lets create a new instance of <a href="#id1"><span class="problematic" id="id2">:php:class:`Doctrine_Migration`</span></a> and pass it
the path to our migration classes:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$migration</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Doctrine_Migration</span><span class="p">(</span> <span class="s1">&#39;/path/to/migration_classes&#39;</span><span class="p">,</span> <span class="nv">$conn</span> <span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Notice the second argument to the <a href="#id3"><span class="problematic" id="id4">:php:class:`Doctrine_Migration`</span></a>
constructor. You can pass an optional <a href="#id5"><span class="problematic" id="id6">:php:class:`Doctrine_Connection`</span></a>
instance. If you do not pass the connection for the migration class
to use, it will simply grab the current connection.</p>
</div>
<p>Now we can migrate to the latest version by calling the <tt class="docutils literal"><span class="pre">migrate()</span></tt>
method:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$migration</span><span class="o">-&gt;</span><span class="na">migrate</span><span class="p">();</span>
</pre></div>
</div>
<p>If you want to migrate to a specific version you can pass an argument to
<tt class="docutils literal"><span class="pre">migrate()</span></tt>. For example we can migrate to version 3 from 0:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$migration</span><span class="o">-&gt;</span><span class="na">migrate</span><span class="p">(</span> <span class="mi">3</span> <span class="p">);</span>
</pre></div>
</div>
<p>Now you can migrate back to version 0 from 3:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nv">$migration</span><span class="o">-&gt;</span><span class="na">migrate</span><span class="p">(</span> <span class="mi">0</span> <span class="p">);</span>
</pre></div>
</div>
<p>If you want to get the current version of the database you can use the
<tt class="docutils literal"><span class="pre">getCurrentVersion()</span></tt> method:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">echo</span> <span class="nv">$migration</span><span class="o">-&gt;</span><span class="na">getCurrentVersion</span><span class="p">();</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Omitting the version number argument for the <tt class="docutils literal"><span class="pre">migrate()</span></tt>
method means that internally Doctrine will try and migrate to the
latest class version number that it could find in the directory you
passed.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><strong>Transactions in Migrations</strong> Internally Doctrine does not
wrap migration versions in transactions. It is up to you as the
developer to handle exceptions and transactions in your migration
classes. Remember though, that very few databases support
transactional DDL. So on most databases, even if you wrap the
migrations in a transaction, any DDL statements like create, alter,
drop, rename, etc., will take effect anyway.</p>
</div>
</div>
<div class="section" id="implement">
<h2>Implement<a class="headerlink" href="#implement" title="Permalink to this headline">¶</a></h2>
<p>Now that we know how to perform migrations lets implement a little
script in our Doctrine test environment named <tt class="docutils literal"><span class="pre">migrate.php</span></tt>.</p>
<p>First we need to create a place for our migration classes to be stored
so lets create a directory named <tt class="docutils literal"><span class="pre">migrations</span></tt>:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">$ </span>mkdir migrations
</pre></div>
</div>
<p>Now create the <tt class="docutils literal"><span class="pre">migrate.php</span></tt> script in your favorite editor and place
the following code inside:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// migrate.php</span>
<span class="k">require_once</span><span class="p">(</span><span class="s1">&#39;bootstrap.php&#39;</span><span class="p">);</span>

<span class="nv">$migration</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Doctrine_Migration</span><span class="p">(</span> <span class="s1">&#39;migrations&#39;</span> <span class="p">);</span>
<span class="nv">$migration</span><span class="o">-&gt;</span><span class="na">migrate</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="writing-migration-classes">
<h2>Writing Migration Classes<a class="headerlink" href="#writing-migration-classes" title="Permalink to this headline">¶</a></h2>
<p>Migration classes consist of a simple class that extends from
<a href="#id7"><span class="problematic" id="id8">:php:class:`Doctrine_Migration`</span></a>. You can define a <tt class="docutils literal"><span class="pre">up()</span></tt> and <tt class="docutils literal"><span class="pre">down()</span></tt> method
that is meant for doing and undoing changes to a database for that
migration version.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The name of the class can be whatever you want, but the
name of the file which contains the class must have a prefix
containing a number that is used for loading the migrations in the
correct order.</p>
</div>
<p>Below are a few examples of some migration classes you can use to build
your database starting from version 1.</p>
<p>For the first version lets create a new table named <tt class="docutils literal"><span class="pre">migration_test</span></tt>:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// migrations/1_add_table.php</span>
<span class="k">class</span> <span class="nc">AddTable</span> <span class="k">extends</span> <span class="nx">Doctrine_Migration_Base</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createTable</span><span class="p">(</span> <span class="s1">&#39;migration_test&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span> <span class="s1">&#39;field1&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span> <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;string&#39;</span> <span class="p">)</span> <span class="p">)</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dropTable</span><span class="p">(</span> <span class="s1">&#39;migration_test&#39;</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now lets create a second version where we add a new column to the table
we added in the previous version:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// migrations/2_add_column.php</span>
<span class="k">class</span> <span class="nc">AddColumn</span> <span class="k">extends</span> <span class="nx">Doctrine_Migration_Base</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addColumn</span><span class="p">(</span> <span class="s1">&#39;migration_test&#39;</span><span class="p">,</span> <span class="s1">&#39;field2&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">removeColumn</span><span class="p">(</span> <span class="s1">&#39;migration_test&#39;</span><span class="p">,</span> <span class="s1">&#39;field2&#39;</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Finally, lets change the type of the <tt class="docutils literal"><span class="pre">field1</span></tt> column in the table we
created previously:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// migrations/3_change_column.php</span>
<span class="k">class</span> <span class="nc">ChangeColumn</span> <span class="k">extends</span> <span class="nx">Doctrine_Migration_Base</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">changeColumn</span><span class="p">(</span> <span class="s1">&#39;migration_test&#39;</span><span class="p">,</span> <span class="s1">&#39;field2&#39;</span><span class="p">,</span> <span class="s1">&#39;integer&#39;</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">changeColumn</span><span class="p">(</span> <span class="s1">&#39;migration_test&#39;</span><span class="p">,</span> <span class="s1">&#39;field2&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now that we have created the three migration classes above we can run
our <tt class="docutils literal"><span class="pre">migrate.php</span></tt> script we implemented earlier:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">$ </span>php migrate.php
</pre></div>
</div>
<p>If you look in the database you will see that we have the table named
<tt class="docutils literal"><span class="pre">migrate_test</span></tt> created and the version number in the
<tt class="docutils literal"><span class="pre">migration_version</span></tt> is set to three.</p>
<p>If you want to migrate back to where we started you can pass a version
number to the <tt class="docutils literal"><span class="pre">migrate()</span></tt> method in the <tt class="docutils literal"><span class="pre">migrate.php</span></tt> script:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// migrate.php</span>

<span class="c1">// ...</span>
<span class="nv">$migration</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Doctrine_Migration</span><span class="p">(</span> <span class="s1">&#39;migrations&#39;</span> <span class="p">);</span>
<span class="nv">$migration</span><span class="o">-&gt;</span><span class="na">migrate</span><span class="p">(</span> <span class="mi">0</span> <span class="p">);</span>
</pre></div>
</div>
<p>Now run the <tt class="docutils literal"><span class="pre">migrate.php</span></tt> script:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">$ </span>php migrate.php
</pre></div>
</div>
<p>If you look in the database now, everything we did in the <tt class="docutils literal"><span class="pre">up()</span></tt>
methods has been reversed by the contents of the <tt class="docutils literal"><span class="pre">down()</span></tt> method.</p>
<div class="section" id="available-operations">
<h3>Available Operations<a class="headerlink" href="#available-operations" title="Permalink to this headline">¶</a></h3>
<p>Here is a list of the available methods you can use to alter your
database in your migration classes.</p>
<div class="section" id="create-table">
<h4>Create Table<a class="headerlink" href="#create-table" title="Permalink to this headline">¶</a></h4>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$columns</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;type&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;integer&#39;</span><span class="p">,</span>
            <span class="s1">&#39;unsigned&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;notnull&#39;</span>  <span class="o">=&gt;</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s1">&#39;default&#39;</span>  <span class="o">=&gt;</span> <span class="mi">0</span>
        <span class="p">),</span>
        <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;type&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
            <span class="s1">&#39;length&#39;</span> <span class="o">=&gt;</span> <span class="mi">12</span>
        <span class="p">),</span>
        <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;type&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span>
            <span class="s1">&#39;length&#39;</span> <span class="o">=&gt;</span> <span class="mi">12</span>
        <span class="p">)</span>
    <span class="p">);</span>

    <span class="nv">$options</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;type&#39;</span>    <span class="o">=&gt;</span> <span class="s1">&#39;INNODB&#39;</span><span class="p">,</span>
        <span class="s1">&#39;charset&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;utf8&#39;</span>
    <span class="p">);</span>

    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createTable</span><span class="p">(</span> <span class="s1">&#39;table_name&#39;</span><span class="p">,</span> <span class="nv">$columns</span><span class="p">,</span> <span class="nv">$options</span> <span class="p">);</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You might notice already that the data structures used to
manipulate the your schema are the same as the data structures used
with the database abstraction layer. This is because internally the
migration package uses the database abstraction layer to perform the
operations specified in the migration classes.</p>
</div>
</div>
<div class="section" id="drop-table">
<h4>Drop Table<a class="headerlink" href="#drop-table" title="Permalink to this headline">¶</a></h4>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dropTable</span><span class="p">(</span> <span class="s1">&#39;table_name&#39;</span> <span class="p">);</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</div>
<div class="section" id="rename-table">
<h4>Rename Table<a class="headerlink" href="#rename-table" title="Permalink to this headline">¶</a></h4>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">renameTable</span><span class="p">(</span> <span class="s1">&#39;old_table_name&#39;</span><span class="p">,</span> <span class="s1">&#39;new_table_name&#39;</span> <span class="p">);</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</div>
<div class="section" id="create-constraint">
<h4>Create Constraint<a class="headerlink" href="#create-constraint" title="Permalink to this headline">¶</a></h4>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$definition</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;fields&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">()</span>
        <span class="p">),</span>
        <span class="s1">&#39;unique&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span>
    <span class="p">);</span>

    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createConstraint</span><span class="p">(</span> <span class="s1">&#39;table_name&#39;</span><span class="p">,</span> <span class="s1">&#39;constraint_name&#39;</span><span class="p">,</span> <span class="nv">$definition</span> <span class="p">);</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</div>
<div class="section" id="drop-constraint">
<h4>Drop Constraint<a class="headerlink" href="#drop-constraint" title="Permalink to this headline">¶</a></h4>
<p><strong>Now the opposite</strong> <tt class="docutils literal"><span class="pre">down()</span></tt> <strong>would look like the following:</strong></p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dropConstraint</span><span class="p">(</span> <span class="s1">&#39;table_name&#39;</span><span class="p">,</span> <span class="s1">&#39;constraint_name&#39;</span> <span class="p">);</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</div>
<div class="section" id="create-foreign-key">
<h4>Create Foreign Key<a class="headerlink" href="#create-foreign-key" title="Permalink to this headline">¶</a></h4>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$definition</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;local&#39;</span>        <span class="o">=&gt;</span> <span class="s1">&#39;email_id&#39;</span><span class="p">,</span>
        <span class="s1">&#39;foreign&#39;</span>      <span class="o">=&gt;</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span>
        <span class="s1">&#39;foreignTable&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;email&#39;</span><span class="p">,</span>
        <span class="s1">&#39;onDelete&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;CASCADE&#39;</span><span class="p">,</span>
    <span class="p">);</span>

    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createForeignKey</span><span class="p">(</span> <span class="s1">&#39;table_name&#39;</span><span class="p">,</span> <span class="s1">&#39;email_foreign_key&#39;</span><span class="p">,</span> <span class="nv">$definition</span> <span class="p">);</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</pre></div>
</div>
<p>The valid options for the <tt class="docutils literal"><span class="pre">$definition</span></tt> are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td>Optional constraint name</td>
</tr>
<tr class="row-odd"><td>local</td>
<td>The local field(s)</td>
</tr>
<tr class="row-even"><td>foreign</td>
<td>The foreign reference field(s)</td>
</tr>
<tr class="row-odd"><td>foreignTable</td>
<td>The name of the foreign table</td>
</tr>
<tr class="row-even"><td>onDelete</td>
<td>Referential delete action</td>
</tr>
<tr class="row-odd"><td>onUpdate</td>
<td>Referential update action</td>
</tr>
<tr class="row-even"><td>deferred</td>
<td>Deferred constraint checking</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="drop-foreign-key">
<h4>Drop Foreign Key<a class="headerlink" href="#drop-foreign-key" title="Permalink to this headline">¶</a></h4>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dropForeignKey</span><span class="p">(</span> <span class="s1">&#39;table_name&#39;</span><span class="p">,</span> <span class="s1">&#39;email_foreign_key&#39;</span> <span class="p">);</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</div>
<div class="section" id="add-column">
<h4>Add Column<a class="headerlink" href="#add-column" title="Permalink to this headline">¶</a></h4>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addColumn</span><span class="p">(</span> <span class="s1">&#39;table_name&#39;</span><span class="p">,</span> <span class="s1">&#39;column_name&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="nv">$length</span><span class="p">,</span> <span class="nv">$options</span> <span class="p">);</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</div>
<div class="section" id="rename-column">
<h4>Rename Column<a class="headerlink" href="#rename-column" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Some DBMS like sqlite do not implement the rename column
operation. An exception is thrown if you try and rename a column
when using a sqlite connection.</p>
</div>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">renameColumn</span><span class="p">(</span> <span class="s1">&#39;table_name&#39;</span><span class="p">,</span> <span class="s1">&#39;old_column_name&#39;</span><span class="p">,</span> <span class="s1">&#39;new_column_name&#39;</span> <span class="p">);</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</div>
<div class="section" id="change-column">
<h4>Change Column<a class="headerlink" href="#change-column" title="Permalink to this headline">¶</a></h4>
<p><strong>Change any aspect of an existing column:</strong></p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$options</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span> <span class="s1">&#39;length&#39;</span> <span class="o">=&gt;</span> <span class="mi">1</span> <span class="p">);</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">changeColumn</span><span class="p">(</span> <span class="s1">&#39;table_name&#39;</span><span class="p">,</span> <span class="s1">&#39;column_name&#39;</span><span class="p">,</span> <span class="s1">&#39;tinyint&#39;</span><span class="p">,</span> <span class="nv">$options</span> <span class="p">);</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</div>
<div class="section" id="remove-column">
<h4>Remove Column<a class="headerlink" href="#remove-column" title="Permalink to this headline">¶</a></h4>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">removeColumn</span><span class="p">(</span> <span class="s1">&#39;table_name&#39;</span><span class="p">,</span> <span class="s1">&#39;column_name&#39;</span> <span class="p">);</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</div>
<div class="section" id="irreversible-migration">
<h4>Irreversible Migration<a class="headerlink" href="#irreversible-migration" title="Permalink to this headline">¶</a></h4>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">Sometimes you may perform some operations in the <tt class="docutils literal"><span class="pre">up()</span></tt>
method that cannot be reversed. For example if you remove a column
from a table. In this case you need to throw a new
<a href="#id9"><span class="problematic" id="id10">:php:class:`Doctrine_Migration_IrreversibleMigrationException`</span></a> exception.</p>
</div>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nx">Doctrine_Migration_IrreversibleMigrationException</span><span class="p">(</span> <span class="s1">&#39;The remove column operation cannot be undone!&#39;</span> <span class="p">);</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</div>
<div class="section" id="add-index">
<h4>Add Index<a class="headerlink" href="#add-index" title="Permalink to this headline">¶</a></h4>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$options</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
        <span class="s1">&#39;fields&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;username&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;sorting&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;ascending&#39;</span>
            <span class="p">),</span>
            <span class="s1">&#39;last_login&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">()</span>
        <span class="p">)</span>
    <span class="p">);</span>

    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addIndex</span><span class="p">(</span> <span class="s1">&#39;table_name&#39;</span><span class="p">,</span> <span class="s1">&#39;index_name&#39;</span><span class="p">,</span> <span class="nv">$options</span> <span class="p">);</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</div>
<div class="section" id="remove-index">
<h4>Remove Index<a class="headerlink" href="#remove-index" title="Permalink to this headline">¶</a></h4>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// ...</span>
<span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span>
<span class="p">{</span>
    <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">removeIndex</span><span class="p">(</span> <span class="s1">&#39;table_name&#39;</span><span class="p">,</span> <span class="s1">&#39;index_name&#39;</span> <span class="p">);</span>
<span class="p">}</span>
<span class="c1">// ...</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="pre-and-post-hooks">
<h3>Pre and Post Hooks<a class="headerlink" href="#pre-and-post-hooks" title="Permalink to this headline">¶</a></h3>
<p>Sometimes you may need to alter the data in the database with your
models. Since you may create a table or make a change, you have to do
the data altering after the <tt class="docutils literal"><span class="pre">up()</span></tt> or <tt class="docutils literal"><span class="pre">down()</span></tt> method is processed.
We have hooks in place for this named <tt class="docutils literal"><span class="pre">preUp()</span></tt>, <tt class="docutils literal"><span class="pre">postUp()</span></tt>,
<tt class="docutils literal"><span class="pre">preDown()</span></tt>, and <tt class="docutils literal"><span class="pre">postDown()</span></tt>. Define these methods and they will be
triggered:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// migrations/1_add_table.php</span>
<span class="k">class</span> <span class="nc">AddTable</span> <span class="k">extends</span> <span class="nx">Doctrine_Migration_Base</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">createTable</span><span class="p">(</span> <span class="s1">&#39;migration_test&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">(</span>
            <span class="s1">&#39;field1&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                <span class="s1">&#39;type&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;string&#39;</span>
            <span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">postUp</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$migrationTest</span>         <span class="o">=</span> <span class="k">new</span> <span class="nx">MigrationTest</span><span class="p">();</span>
        <span class="nv">$migrationTest</span><span class="o">-&gt;</span><span class="na">field1</span> <span class="o">=</span> <span class="s1">&#39;Initial record created by migrations&#39;</span><span class="p">;</span>
        <span class="nv">$migrationTest</span><span class="o">-&gt;</span><span class="na">save</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">dropTable</span><span class="p">(</span> <span class="s1">&#39;migration_test&#39;</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The above example assumes you have created and made
available the <tt class="docutils literal"><span class="pre">MigrationTest</span></tt> model. Once the <tt class="docutils literal"><span class="pre">up()</span></tt> method is
executed the <tt class="docutils literal"><span class="pre">migration_test</span></tt> table is created so the
<tt class="docutils literal"><span class="pre">MigrationTest</span></tt> model can be used. We have provided the definition
of this model below.</p>
</div>
<div class="highlight-php"><div class="highlight"><pre><span class="c1">// models/MigrationTest.php</span>
<span class="k">class</span> <span class="nc">MigrationTest</span> <span class="k">extends</span> <span class="nx">Doctrine_Record</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">setTableDefinition</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">hasColumn</span><span class="p">(</span> <span class="s1">&#39;field1&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Here is the same example in YAML format. You can read more about YAML in
the <a class="reference internal" href="yaml-schema-files.html"><em>YAML Schema Files</em></a> chapter:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nn">---</span>
<span class="c1"># schema.yml</span>

<span class="l-Scalar-Plain">MigrationTest</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">columns</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">field1</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">string</span>
</pre></div>
</div>
</div>
<div class="section" id="up-down-automation">
<h3>Up/Down Automation<a class="headerlink" href="#up-down-automation" title="Permalink to this headline">¶</a></h3>
<p>In Doctrine migrations it is possible most of the time to automate the
opposite of a migration method. For example if you create a new column
in the up of a migration, we should be able to easily automate the down
since all we need to do is remove the column that was created. This is
possible by using the <tt class="docutils literal"><span class="pre">migrate()</span></tt> function for both the <tt class="docutils literal"><span class="pre">up</span></tt> and
<tt class="docutils literal"><span class="pre">down</span></tt>.</p>
<p>The <tt class="docutils literal"><span class="pre">migrate()</span></tt> method accepts an argument of $direction and it will
either have a value of <tt class="docutils literal"><span class="pre">up</span></tt> or <tt class="docutils literal"><span class="pre">down</span></tt>. This value is passed to the
first argument of functions like <tt class="docutils literal"><span class="pre">column</span></tt>, <tt class="docutils literal"><span class="pre">table</span></tt>, etc.</p>
<p>Here is an example where we automate the adding and removing of a column</p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MigrationTest</span> <span class="k">extends</span> <span class="nx">Doctrine_Migration_Base</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">migrate</span><span class="p">(</span> <span class="nv">$direction</span> <span class="p">)</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">column</span><span class="p">(</span> <span class="nv">$direction</span><span class="p">,</span> <span class="s1">&#39;table_name&#39;</span><span class="p">,</span> <span class="s1">&#39;column_name&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;255&#39;</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now when we run up with the above migration, the column will be added
and when we run down the column will be removed.</p>
<p>Here is a list of the following migration methods that can be automated:</p>
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Automate Method Name</th>
<th class="head">Automates</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>table()</strong></td>
<td><strong>createTable()/dropTable()</strong></td>
</tr>
<tr class="row-odd"><td><strong>constraint()</strong></td>
<td><strong>createConstraint()/dropConstraint()</strong></td>
</tr>
<tr class="row-even"><td><strong>foreignKey()</strong></td>
<td><strong>createForeignKey()/dropForeignKey()</strong></td>
</tr>
<tr class="row-odd"><td><strong>column()</strong></td>
<td><strong>addColumn()/removeColumn()</strong></td>
</tr>
<tr class="row-even"><td><strong>index()</strong></td>
<td><strong>addInex()/removeIndex()</strong></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="generating-migrations">
<h3>Generating Migrations<a class="headerlink" href="#generating-migrations" title="Permalink to this headline">¶</a></h3>
<p>Doctrine offers the ability to generate migration classes a few
different ways. You can generate a set of migrations to re-create an
existing database, or generate migration classes to create a database
for an existing set of models. You can even generate migrations from
differences between two sets of schema information.</p>
<div class="section" id="from-database">
<h4>From Database<a class="headerlink" href="#from-database" title="Permalink to this headline">¶</a></h4>
<p>To generate a set of migrations from the existing database connections
it is simple, just use <tt class="docutils literal"><span class="pre">Doctrine_Core::generateMigrationsFromDb()</span></tt>.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nx">Doctrine_Core</span><span class="o">::</span><span class="na">generateMigrationsFromDb</span><span class="p">(</span> <span class="s1">&#39;/path/to/migration/classes&#39;</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="from-existing-models">
<h4>From Existing Models<a class="headerlink" href="#from-existing-models" title="Permalink to this headline">¶</a></h4>
<p>To generate a set of migrations from an existing set of models it is
just as simple as from a database, just use
<tt class="docutils literal"><span class="pre">Doctrine_Core::generateMigrationsFromModels()</span></tt>.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nx">Doctrine_Core</span><span class="o">::</span><span class="na">generateMigrationsFromModels</span><span class="p">(</span> <span class="s1">&#39;/path/to/migration/classes&#39;</span><span class="p">,</span> <span class="s1">&#39;/path/to/models&#39;</span> <span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="diff-tool">
<h4>Diff Tool<a class="headerlink" href="#diff-tool" title="Permalink to this headline">¶</a></h4>
<p>Sometimes you may want to alter your models and be able to automate the
migration process for your changes. In the past you would have to write
the migration classes manually for your changes. Now with the diff tool
you can make your changes then generate the migration classes for the
changes.</p>
<p>The diff tool is simple to use. It accepts a &#8220;from&#8221; and a &#8220;to&#8221; and they
can be one of the following:</p>
<blockquote>
<div><ul class="simple">
<li>Path to yaml schema files</li>
<li>Name of an existing database connection</li>
<li>Path to an existing set of models</li>
</ul>
</div></blockquote>
<p>A simple example would be to create two YAML schema files, one named
<tt class="docutils literal"><span class="pre">schema1.yml</span></tt> and another named <tt class="docutils literal"><span class="pre">schema2.yml</span></tt>.</p>
<p>The <tt class="docutils literal"><span class="pre">schema1.yml</span></tt> contains a simple <tt class="docutils literal"><span class="pre">User</span></tt> model:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nn">---</span>
<span class="c1"># schema1.yml</span>

<span class="l-Scalar-Plain">User</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">columns</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">username</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">string(255)</span>
    <span class="l-Scalar-Plain">password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">string(255)</span>
</pre></div>
</div>
<p>Now imagine we modify the above schema and want to add a
<tt class="docutils literal"><span class="pre">email_address</span></tt> column:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nn">---</span>
<span class="c1"># schema1.yml</span>

<span class="l-Scalar-Plain">User</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">columns</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">username</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">string(255)</span>
    <span class="l-Scalar-Plain">password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">string(255)</span>
    <span class="l-Scalar-Plain">email_address</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">string(255)</span>
</pre></div>
</div>
<p>Now we can easily generate a migration class which will add the new
column to our database:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="nx">Doctrine_Core</span><span class="o">::</span><span class="na">generateMigrationsFromDiff</span><span class="p">(</span> <span class="s1">&#39;/path/to/migration/classes&#39;</span><span class="p">,</span> <span class="s1">&#39;/path/to/schema1.yml&#39;</span><span class="p">,</span> <span class="s1">&#39;/path/to/schema2.yml&#39;</span> <span class="p">);</span>
</pre></div>
</div>
<p>This will produce a file at the path <tt class="docutils literal"><span class="pre">/path/to/migration/classes/1236199329_version1.php</span></tt></p>
<div class="highlight-php"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Version1</span> <span class="k">extends</span> <span class="nx">Doctrine_Migration_Base</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">addColumn</span><span class="p">(</span> <span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;email_address&#39;</span><span class="p">,</span> <span class="s1">&#39;string&#39;</span><span class="p">,</span> <span class="s1">&#39;255&#39;</span><span class="p">,</span> <span class="k">array</span><span class="p">()</span> <span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">down</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">removeColumn</span><span class="p">(</span> <span class="s1">&#39;user&#39;</span><span class="p">,</span> <span class="s1">&#39;email_address&#39;</span> <span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Now you can easily migrate your database and add the new column!</p>
</div>
</div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>Using migrations is highly recommended for altering your production
database schemas as it is a safe and easy way to make changes to your
schema.</p>
<p>Migrations are the last feature of Doctrine that we will discuss in this
book. The final chapters will discuss some other topics that will help
you be a better Doctrine developers on a day-to-day basis. First lets
discuss some of the other <a class="reference internal" href="utilities.html"><em>Utilities</em></a> that Doctrine provides.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Migrations</a><ul>
<li><a class="reference internal" href="#performing-migrations">Performing Migrations</a></li>
<li><a class="reference internal" href="#implement">Implement</a></li>
<li><a class="reference internal" href="#writing-migration-classes">Writing Migration Classes</a><ul>
<li><a class="reference internal" href="#available-operations">Available Operations</a><ul>
<li><a class="reference internal" href="#create-table">Create Table</a></li>
<li><a class="reference internal" href="#drop-table">Drop Table</a></li>
<li><a class="reference internal" href="#rename-table">Rename Table</a></li>
<li><a class="reference internal" href="#create-constraint">Create Constraint</a></li>
<li><a class="reference internal" href="#drop-constraint">Drop Constraint</a></li>
<li><a class="reference internal" href="#create-foreign-key">Create Foreign Key</a></li>
<li><a class="reference internal" href="#drop-foreign-key">Drop Foreign Key</a></li>
<li><a class="reference internal" href="#add-column">Add Column</a></li>
<li><a class="reference internal" href="#rename-column">Rename Column</a></li>
<li><a class="reference internal" href="#change-column">Change Column</a></li>
<li><a class="reference internal" href="#remove-column">Remove Column</a></li>
<li><a class="reference internal" href="#irreversible-migration">Irreversible Migration</a></li>
<li><a class="reference internal" href="#add-index">Add Index</a></li>
<li><a class="reference internal" href="#remove-index">Remove Index</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pre-and-post-hooks">Pre and Post Hooks</a></li>
<li><a class="reference internal" href="#up-down-automation">Up/Down Automation</a></li>
<li><a class="reference internal" href="#generating-migrations">Generating Migrations</a><ul>
<li><a class="reference internal" href="#from-database">From Database</a></li>
<li><a class="reference internal" href="#from-existing-models">From Existing Models</a></li>
<li><a class="reference internal" href="#diff-tool">Diff Tool</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="caching.html"
                        title="previous chapter">Caching</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="extensions.html"
                        title="next chapter">Extensions</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/en/manual/migrations.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="extensions.html" title="Extensions"
             >next</a> |</li>
        <li class="right" >
          <a href="caching.html" title="Caching"
             >previous</a> |</li>
        <li><a href="../../index.html">Doctrine 1.2.4 documentation</a> &raquo;</li>
          <li><a href="../index.html" >English Documentation</a> &raquo;</li>
          <li><a href="index.html" >Doctrine 1.2 ORM Manual</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Jonathan Wage and Contributors.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>