<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head><title>Deploy a Replica Set &mdash; MongoDB Manual 2.4.3</title><link rel="shortcut icon" href="http://media.mongodb.org/favicon.ico" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="robots" content="index" />
  <meta name="release" content="2.4.3"/>
  <meta name="DC.Source" content="https://github.com/mongodb/docs/blob/master/source/tutorial/deploy-replica-set.txt"/>
      <link rel="canonical" href="http://docs.mongodb.org/manual/tutorial/deploy-replica-set" />
  
   <link rel="stylesheet" href="../_static/mongodb-docs.css" type="text/css" />
   <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      
   <script type="text/javascript">
     var DOCUMENTATION_OPTIONS = {
         URL_ROOT:    '../',
         VERSION:     '2.4',
         COLLAPSE_INDEX: false,
         FILE_SUFFIX: '.html',
         HAS_SOURCE:  false,
     };
   </script>
       <script type="text/javascript" src="../_static/jquery.js"></script>
       <script type="text/javascript" src="../_static/underscore.js"></script>
       <script type="text/javascript" src="../_static/doctools.js"></script>
          <link rel="search" type="application/opensearchdescription+xml" href="http://docs.mongodb.org/osd.xml" title="MongoDB Help"/>
<link rel="author" title="About these documents" href="../about.html" />
<link rel="top" title="MongoDB Manual" href="../index.html" />
<link rel="up" title="Replica Set Administration" href="../administration/replica-sets.html" />
<link rel="next" title="Convert a Standalone to a Replica Set" href="convert-standalone-to-replica-set.html" />
<link rel="prev" title="Replica Set Administration" href="../administration/replica-sets.html" />
          <script>
            (function() {
               var cx = '017213726194841070573:WMX6838984';
               var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
               gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;
               var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
            })();
          </script></head>
<body>
      <div id="header-db" class="spread">
        <div class="split">
          <div id="logo">
            <div><a href="http://www.mongodb.org/"><img class="logo" src="http://media.mongodb.org/logo-mongodb.png" alt="MongoDB Logo"/></a></div>
          </div>
        </div>
      </div>  
      <div class="document">
           <div class="documentwrapper"><div class="bodywrapper">
               <div class="body">
                 
    <div class="bc">
      <ul>
          <li><a href="../replication.html">Replication</a><span class="bcpoint"> > </span></li>
          
          <li><a href="../administration/replica-sets.html">Replica Set Administration</a><span class="bcpoint"> > </span></li>
          <li>Deploy a Replica Set</li> 
      </ul>
    </div>
                 <div id="cse-results">
                   <gcse:searchresults linkTarget="_top"></gcse:searchresults>
                 </div>
                 
  <div class="section" id="deploy-a-replica-set">
<h1>Deploy a Replica Set<a class="headerlink" href="#deploy-a-replica-set" title="Permalink to this headline">¶</a></h1>
<p>This tutorial describes how to create a three-member
<a class="reference internal" href="../reference/glossary.html#term-replica-set"><em class="xref std std-term">replica set</em></a> from three existing <a class="reference internal" href="../reference/program/mongod.html#bin.mongod" title="mongod"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt></a> instances.
The tutorial provides two procedures: one for development and test systems; and
a one for production systems.</p>
<p>To instead deploy a replica set from a single standalone MongoDB
instance, see <a class="reference internal" href="convert-standalone-to-replica-set.html"><em>Convert a Standalone to a Replica Set</em></a>. For
additional information regarding replica set deployments, see
<a class="reference internal" href="../core/replication.html"><em>Replica Set Fundamental Concepts</em></a> and <a class="reference internal" href="../core/replica-set-architectures.html"><em>Replica Set Architectures and Deployment Patterns</em></a>.</p>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Three member <a class="reference internal" href="../reference/glossary.html#term-replica-set"><em class="xref std std-term">replica sets</em></a> provide enough redundancy to survive most
network partitions and other system failures. Additionally, these sets
have sufficient capacity for many distributed read operations. Most
deployments require no additional members or configuration.</p>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>Most replica sets consist of three or more <a class="reference internal" href="../reference/program/mongod.html#bin.mongod" title="mongod"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt></a>
instances. <a class="footnote-reference" href="#odd-numbered-set-sizes" id="id1">[1]</a> This tutorial
describes a three member set. Production environments should have at
least three distinct systems so that each system can run its own
instance of <a class="reference internal" href="../reference/program/mongod.html#bin.mongod" title="mongod"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt></a>. For development systems you can run all three instances
of the <a class="reference internal" href="../reference/program/mongod.html#bin.mongod" title="mongod"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt></a> process on a local system or within a virtual
instance. For production environments, you should maintain as much separation
between members as possible. For example, when using virtual
machines for production deployments, each member
should live on a separate host server, served by redundant power circuits and with
redundant network paths.</p>
<table class="docutils footnote" frame="void" id="odd-numbered-set-sizes" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>To ensure smooth <a class="reference internal" href="../core/replication.html#replica-set-elections"><em>elections</em></a> always design replica sets with odd numbers
of members. Use <a class="reference internal" href="../core/replication.html#replica-set-arbiters"><em>Arbiters</em></a> to ensure the set has
odd number of voting members and avoid tied elections.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="procedures">
<h2>Procedures<a class="headerlink" href="#procedures" title="Permalink to this headline">¶</a></h2>
<p>These procedures assume you already have instances of MongoDB
installed on the systems you will add as members of your
<a class="reference internal" href="../reference/glossary.html#term-replica-set"><em class="xref std std-term">replica set</em></a>. If you have not already installed MongoDB, see the
<a class="reference internal" href="../installation.html#tutorials-installation"><em>installation tutorials</em></a>.</p>
<div class="section" id="deploy-a-development-or-test-replica-set">
<h3>Deploy a Development or Test Replica Set<a class="headerlink" href="#deploy-a-development-or-test-replica-set" title="Permalink to this headline">¶</a></h3>
<p>The examples in this procedure create a new replica set named <tt class="docutils literal"><span class="pre">rs0</span></tt>.</p>
<ol class="arabic">
<li><p class="first">Before creating your replica set, verify that every member can
successfully connect to every other member. The network
configuration must allow all possible connections between any
two members. To test connectivity, see
<a class="reference internal" href="troubleshoot-replica-sets.html#replica-set-troubleshooting-check-connection"><em>Test Connections Between all Members</em></a>.</p>
</li>
<li><p class="first">Start three instances of <a class="reference internal" href="../reference/program/mongod.html#bin.mongod" title="mongod"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt></a> as members of a replica
set named <tt class="docutils literal"><span class="pre">rs0</span></tt>, as described in this step. For ephemeral tests and
the purposes of this guide, you may run the <a class="reference internal" href="../reference/program/mongod.html#bin.mongod" title="mongod"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt></a>
instances in separate windows of GNU Screen. OS X and most Linux
distributions come with screen installed by default <a class="footnote-reference" href="#screen" id="id2">[2]</a>
systems.</p>
<ol class="loweralpha">
<li><p class="first">Create the necessary data directories by issuing a command
similar to the following:</p>
<div class="highlight-sh"><div class="highlight"><pre>mkdir -p /srv/mongodb/rs0-0 /srv/mongodb/rs0-1 /srv/mongodb/rs0-2
</pre></div>
</div>
</li>
<li><p class="first">Issue the following commands, each in a distinct screen window:</p>
<div class="highlight-sh"><div class="highlight"><pre>mongod --port 27017 --dbpath /srv/mongodb/rs0-0 --replSet rs0 --smallfiles --oplogSize 128
mongod --port 27018 --dbpath /srv/mongodb/rs0-1 --replSet rs0 --smallfiles --oplogSize 128
mongod --port 27019 --dbpath /srv/mongodb/rs0-2 --replSet rs0 --smallfiles --oplogSize 128
</pre></div>
</div>
<p>This starts each instance as a member of a replica set named
<tt class="docutils literal"><span class="pre">rs0</span></tt>, each running on a distinct port. If you are already using
these ports, select different ports.</p>
<p>The <a class="reference internal" href="../reference/program/mongod.html#cmdoption-mongod--smallfiles"><em class="xref std std-option">--smallfiles</em></a> and
<tt class="xref mongodb mongodb-setting docutils literal"><span class="pre">--oplogSize</span></tt> reduce the disk
space that each <a class="reference internal" href="../reference/program/mongod.html#bin.mongod" title="mongod"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt></a> uses for the purposes of
testing. For more information on these and other configuration
options, see <a class="reference internal" href="../reference/configuration-options.html"><em>Configuration File Options</em></a>.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Unless otherwise indicated, only use these
invocations for test deployments.</p>
</div>
</li>
</ol>
</li>
<li><p class="first">Open a <a class="reference internal" href="../reference/program/mongo.html#bin.mongo" title="mongo"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongo</span></tt></a> shell and connect to the first
<a class="reference internal" href="../reference/program/mongod.html#bin.mongod" title="mongod"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt></a> instance, with the following command:</p>
<div class="highlight-sh"><div class="highlight"><pre>mongo --port 27017
</pre></div>
</div>
</li>
<li><p class="first">Create a replica set configuration object in the <a class="reference internal" href="../reference/program/mongo.html#bin.mongo" title="mongo"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongo</span></tt></a>
shell environment to use to initiate the replica set with the
following sequence of operations:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">rsconf</span> <span class="o">=</span> <span class="p">{</span>
           <span class="nx">_id</span><span class="o">:</span> <span class="s2">&quot;rs0&quot;</span><span class="p">,</span>
           <span class="nx">members</span><span class="o">:</span> <span class="p">[</span>
                      <span class="p">{</span>
                       <span class="nx">_id</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
                       <span class="nx">host</span><span class="o">:</span> <span class="s2">&quot;&lt;hostname&gt;:27017&quot;</span>
                      <span class="p">}</span>
                    <span class="p">]</span>
         <span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">Use <a class="reference internal" href="../reference/method/rs.initiate.html#rs.initiate" title="rs.initiate()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.initiate()</span></tt></a> to initiate a replica set consisting of
the current member and using the default configuration:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">rs</span><span class="p">.</span><span class="nx">initiate</span><span class="p">(</span> <span class="nx">rsconf</span> <span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Display the current <a class="reference internal" href="../reference/replica-configuration.html"><em>replica configuration</em></a>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">rs</span><span class="p">.</span><span class="nx">conf</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p class="first">Add the second and third <a class="reference internal" href="../reference/program/mongod.html#bin.mongod" title="mongod"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt></a> instances to the replica
set using the <a class="reference internal" href="../reference/method/rs.add.html#rs.add" title="rs.add()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.add()</span></tt></a> method. Replace <tt class="docutils literal"><span class="pre">&lt;hostname&gt;</span></tt> with
your system&#8217;s hostname in the following examples:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">rs</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;&lt;hostname&gt;:27018&quot;</span><span class="p">)</span>
<span class="nx">rs</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;&lt;hostname&gt;:27019&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>After these commands return you have a fully functional replica set.
New replica sets elect a <a class="reference internal" href="../reference/glossary.html#term-primary"><em class="xref std std-term">primary</em></a> within a few seconds.</p>
</li>
<li><p class="first">Check the status of your replica set at any time with the
<a class="reference internal" href="../reference/method/rs.status.html#rs.status" title="rs.status()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.status()</span></tt></a> operation.</p>
</li>
</ol>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p>The documentation of the following shell functions for
more information:</p>
<ul class="simple">
<li><a class="reference internal" href="../reference/method/rs.initiate.html#rs.initiate" title="rs.initiate()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.initiate()</span></tt></a></li>
<li><a class="reference internal" href="../reference/method/rs.conf.html#rs.conf" title="rs.conf()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.conf()</span></tt></a></li>
<li><a class="reference internal" href="../reference/method/rs.reconfig.html#rs.reconfig" title="rs.reconfig()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.reconfig()</span></tt></a></li>
<li><a class="reference internal" href="../reference/method/rs.add.html#rs.add" title="rs.add()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.add()</span></tt></a></li>
</ul>
<p class="last">You may also consider the <a class="reference external" href="https://github.com/mongodb/mongo-snippets/blob/master/replication/simple-setup.py">simple setup script</a>
as an example of a basic automatically configured replica set.</p>
</div>
<table class="docutils footnote" frame="void" id="screen" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[2]</a></td><td><a class="reference external" href="http://www.gnu.org/software/screen/">GNU Screen</a> is packaged as
<tt class="docutils literal"><span class="pre">screen</span></tt> on Debian-based, Fedora/Red Hat-based, and Arch Linux.</td></tr>
</tbody>
</table>
</div>
<div class="section" id="deploy-a-production-replica-set">
<h3>Deploy a Production Replica Set<a class="headerlink" href="#deploy-a-production-replica-set" title="Permalink to this headline">¶</a></h3>
<p>Production replica sets are very similar to the development or testing
deployment described above, with the following differences:</p>
<ul>
<li><p class="first">Each member of the replica set resides on its own machine, and
the MongoDB processes all bind to port <tt class="docutils literal"><span class="pre">27017</span></tt>, which is the
standard MongoDB port.</p>
</li>
<li><p class="first">Each member of the replica set must be accessible by way of
resolvable DNS or hostnames in the following scheme:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">mongodb0.example.net</span></tt></li>
<li><tt class="docutils literal"><span class="pre">mongodb1.example.net</span></tt></li>
<li><tt class="docutils literal"><span class="pre">mongodb2.example.net</span></tt></li>
</ul>
<p>Configure DNS names appropriately, <em>or</em> set up your systems&#8217;
<tt class="docutils literal"><span class="pre">/etc/hosts</span></tt> file to reflect this configuration.</p>
</li>
<li><p class="first">You specify run-time configuration on each system in a
<a class="reference internal" href="../reference/configuration-options.html"><em>configuration file</em></a> stored in
<tt class="docutils literal"><span class="pre">/etc/mongodb.conf</span></tt> or in a related location. You <em>do not</em> specify
run-time configuration through command line options.</p>
<p>For each MongoDB instance, use the following configuration. Set
configuration values appropriate to your systems:</p>
<div class="highlight-cfg"><div class="highlight"><pre><span class="na">port</span> <span class="o">=</span> <span class="s">27017</span>

<span class="na">bind_ip</span> <span class="o">=</span> <span class="s">10.8.0.10</span>

<span class="na">dbpath</span> <span class="o">=</span> <span class="s">/srv/mongodb/</span>

<span class="na">fork</span> <span class="o">=</span> <span class="s">true</span>

<span class="na">replSet</span> <span class="o">=</span> <span class="s">rs0</span>
</pre></div>
</div>
<p>You do not need to specify an interface with <a class="reference internal" href="../reference/configuration-options.html#bind_ip" title="bind_ip"><tt class="xref mongodb mongodb-setting docutils literal"><span class="pre">bind_ip</span></tt></a>.
However, if you do not specify an interface, MongoDB listens for
connections on all available IPv4 interfaces. Modify
<a class="reference internal" href="../reference/configuration-options.html#bind_ip" title="bind_ip"><tt class="xref mongodb mongodb-setting docutils literal"><span class="pre">bind_ip</span></tt></a> to reflect a secure interface on your system that
is able to access all other members of the set <em>and</em> on which all
other members of the replica set can access the current member. The
DNS or host names must point and resolve to this IP address.
Configure network rules or a virtual private network (i.e. &#8220;VPN&#8221;) to
permit this access.</p>
<p>For more documentation on run time options used above and on
additional configuration options, see
<a class="reference internal" href="../reference/configuration-options.html"><em>Configuration File Options</em></a>.</p>
</li>
</ul>
<p>To deploy a production replica set:</p>
<ol class="arabic">
<li><p class="first">Before creating your replica set, verify that every member can
successfully connect to every other member. The network
configuration must allow all possible connections between any
two members. To test connectivity, see
<a class="reference internal" href="troubleshoot-replica-sets.html#replica-set-troubleshooting-check-connection"><em>Test Connections Between all Members</em></a>.</p>
</li>
<li><p class="first">On each system start the <a class="reference internal" href="../reference/program/mongod.html#bin.mongod" title="mongod"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt></a> process by issuing a
command similar to following:</p>
<div class="highlight-sh"><div class="highlight"><pre>mongod --config /etc/mongodb.conf
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In production deployments you likely want to use and configure a
<a class="reference internal" href="../reference/glossary.html#term-100"><em class="xref std std-term">control script</em></a> to manage this process based on this
command. Control scripts are beyond the scope of this document.</p>
</div>
</li>
<li><p class="first">Open a <a class="reference internal" href="../reference/program/mongo.html#bin.mongo" title="mongo"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongo</span></tt></a> shell connected to this host:</p>
<div class="highlight-sh"><div class="highlight"><pre>mongo
</pre></div>
</div>
</li>
<li><p class="first">Use <a class="reference internal" href="../reference/method/rs.initiate.html#rs.initiate" title="rs.initiate()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.initiate()</span></tt></a> to initiate a replica set consisting of
the current member and using the default configuration:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">rs</span><span class="p">.</span><span class="nx">initiate</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p class="first">Display the current <a class="reference internal" href="../reference/replica-configuration.html"><em>replica configuration</em></a>:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">rs</span><span class="p">.</span><span class="nx">conf</span><span class="p">()</span>
</pre></div>
</div>
</li>
<li><p class="first">Add two members to the replica set by issuing a sequence of commands
similar to the following:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">rs</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;mongodb1.example.net&quot;</span><span class="p">)</span>
<span class="nx">rs</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s2">&quot;mongodb2.example.net&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>After these commands return you have a fully functional replica set.
New replica sets elect a <a class="reference internal" href="../reference/glossary.html#term-primary"><em class="xref std std-term">primary</em></a> within a few seconds.</p>
</li>
<li><p class="first">Check the status of your replica set at any time with the
<a class="reference internal" href="../reference/method/rs.status.html#rs.status" title="rs.status()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.status()</span></tt></a> operation.</p>
</li>
</ol>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p>The documentation of the following shell functions for
more information:</p>
<ul class="last simple">
<li><a class="reference internal" href="../reference/method/rs.initiate.html#rs.initiate" title="rs.initiate()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.initiate()</span></tt></a></li>
<li><a class="reference internal" href="../reference/method/rs.conf.html#rs.conf" title="rs.conf()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.conf()</span></tt></a></li>
<li><a class="reference internal" href="../reference/method/rs.reconfig.html#rs.reconfig" title="rs.reconfig()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.reconfig()</span></tt></a></li>
<li><a class="reference internal" href="../reference/method/rs.add.html#rs.add" title="rs.add()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.add()</span></tt></a></li>
</ul>
</div>
</div>
</div>
</div>


    <div id="btnv">
        <ul id="btnvl">
              <li id="btnvpr"><a href="../administration/replica-sets.html" title="Previous Section: Replica Set Administration">&lt; &nbsp; Replica Set Administration</a></li>
              <li id="btnvup"><a href="../replication.html" title="Parent Section: Replication" >&#47;&#92;&nbsp; Replication</a></li>
              <li id="btnvnx"><a href="convert-standalone-to-replica-set.html" title="Next Section: Convert a Standalone to a Replica Set">Convert a Standalone to a Replica Set &nbsp;&gt;</a></li>
        </ul>
    </div></div></div>
           </div>
       <div class="sphinxsidebar">
         <div class="sphinxsidebarwrapper">
  <h3>
    <a href="../index.html">MongoDB Manual</a> <span id="vn">2.4</span>
  </h3>



<div class="site-contents"><a href="../contents.html">Contents</a></div>


<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Install MongoDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../administration.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crud.html">Core MongoDB Operations (CRUD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-modeling.html">Data Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aggregation.html">Aggregation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../indexes.html">Indexes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../replication.html">Replication</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core/replication.html">Replica Set Fundamental Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core/replica-set-architectures.html">Replica Set Architectures and Deployment Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/replication.html">Replica Set Considerations and Behaviors for Applications and Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core/replication-internals.html">Replica Set Internals and Behaviors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core/master-slave.html">Master Slave Replication</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../administration/replica-sets.html">Replica Set Administration</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="">Deploy a Replica Set</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="convert-standalone-to-replica-set.html">Convert a Standalone to a Replica Set</a></li>
<li class="toctree-l3"><a class="reference internal" href="expand-replica-set.html">Add Members to a Replica Set</a></li>
<li class="toctree-l3"><a class="reference internal" href="remove-replica-set-member.html">Remove Members from Replica Set</a></li>
<li class="toctree-l3"><a class="reference internal" href="replace-replica-set-member.html">Replace a Replica Set Member</a></li>
<li class="toctree-l3"><a class="reference internal" href="adjust-replica-set-member-priority.html">Adjust Priority for Replica Set Member</a></li>
<li class="toctree-l3"><a class="reference internal" href="resync-replica-set-member.html">Resync a Member of a Replica Set</a></li>
<li class="toctree-l3"><a class="reference internal" href="deploy-geographically-distributed-replica-set.html">Deploy a Geographically Distributed Replica Set</a></li>
<li class="toctree-l3"><a class="reference internal" href="change-oplog-size.html">Change the Size of the Oplog</a></li>
<li class="toctree-l3"><a class="reference internal" href="force-member-to-be-primary.html">Force a Member to Become Primary</a></li>
<li class="toctree-l3"><a class="reference internal" href="manage-chained-replication.html">Manage Chained Replication</a></li>
<li class="toctree-l3"><a class="reference internal" href="change-hostnames-in-a-replica-set.html">Change Hostnames in a Replica Set</a></li>
<li class="toctree-l3"><a class="reference internal" href="troubleshoot-replica-sets.html">Troubleshoot Replica Sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="add-replica-set-arbiter.html">Add an Arbiter to Replica Set</a></li>
<li class="toctree-l3"><a class="reference internal" href="convert-secondary-into-arbiter.html">Convert a Secondary to an Arbiter</a></li>
<li class="toctree-l3"><a class="reference internal" href="configure-a-delayed-replica-set-member.html">Configure a Delayed Replica Set Member</a></li>
<li class="toctree-l3"><a class="reference internal" href="configure-a-hidden-replica-set-member.html">Configure a Replica Set Member as Hidden</a></li>
<li class="toctree-l3"><a class="reference internal" href="configure-a-non-voting-replica-set-member.html">Configure a Non-Voting Replica Set Member</a></li>
<li class="toctree-l3"><a class="reference internal" href="configure-secondary-only-replica-set-member.html">Prevent Replica Set Member from Becoming Primary</a></li>
<li class="toctree-l3"><a class="reference internal" href="configure-replica-set-secondary-sync-target.html">Configure a Secondary&#8217;s Sync Target</a></li>
<li class="toctree-l3"><a class="reference internal" href="configure-replica-set-tag-sets.html">Configure Replica Set Tag Sets</a></li>
<li class="toctree-l3"><a class="reference internal" href="reconfigure-replica-set-with-unavailable-members.html">Reconfigure a Replica Set with Unavailable Members</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/replica-configuration.html">Replica Set Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/replica-commands.html">Replica Set Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes/replica-set-features.html">Replica Set Features and Version Compatibility</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sharding.html">Sharding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../applications.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mongo.html">The <tt class="docutils literal"><span class="pre">mongo</span></tt> Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use-cases.html">Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About MongoDB Documentation</a></li>
</ul>



<div class="site-index"><a href="../genindex.html">Index</a></div>
<h3>Formats</h3>
<ul class="this-page-menu">
  <li><a href="/manual/single/">MongoDB Manual, Single HTML Page</a></li>
  <li><a href="http://docs.mongodb.org/master/MongoDB-Manual-master.pdf" rel="nofollow">MongoDB Manual, PDF Format</a></li>
  <li><a href="http://docs.mongodb.org/master/MongoDB-Manual-master.epub" rel="nofollow">MongoDB Manual, ePub Format</a></li>
</ul>
<h3><a href="http://www.mongodb.org/about/">About MongoDB</a></h3>
<ul>
  <li><a href="http://www.mongodb.org/about/introduction">Introduction</a></li>
  <li><a href="http://www.mongodb.org/about/community">User Community</a></li>
  <li><a href="http://mongodb.org/about/community/masters">MongoDB Masters</a></li>
  <li><a href="http://planet.mongodb.org">Planet MongoDB</a></li>
</ul>
<h3><a href="http://docs.mongodb.org/ecosystem/">MongoDB Ecosystem</a></h3>
<ul>
 <li><a href="http://docs.mongodb.org/ecosystem/drivers/">Drivers and Client libraries</a>
   <ul>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/c">C</a> (<a href="http://api.mongodb.org/c/current/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/cpp">C++</a> (<a href="http://api.mongodb.org/cplusplus/current/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/csharp">C#</a> (<a href="http://api.mongodb.org/csharp/current/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/erlang">Erlang</a> (<a href="http://api.mongodb.org/erlang">docs</a>)</li>
     <li><a href="http://hackage.haskell.org/package/mongoDB">Haskell</a> (<a href="http://api.mongodb.org/haskell">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/java">Java</a> (<a href="http://api.mongodb.org/java/current">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/javascript">JavaScript</a> (<a href="http://api.mongodb.org/js/current">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/perl">Perl</a> (<a href="http://api.mongodb.org/perl/current/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/php">PHP</a> (<a href="http://php.net/mongo/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/python">Python</a> (<a href="http://api.mongodb.org/python/current">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/ruby">Ruby</a> (<a href="http://api.mongodb.org/ruby/current">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/scala">Scala</a> (<a href="http://api.mongodb.org/scala/casbah/current/">docs</a>)</li>
   </ul>
 </li>
 <li><a href="http://docs.mongodb.org/ecosystem/tools/">Tools and Integration</a></li>
 <li><a href="http://docs.mongodb.org/ecosystem/platforms/">Platform Integration</a></li>
</ul><h3>MongoDB Resources</h3>
<ul>
  <li><a href="http://www.mongodb.org/downloads">Downloads</a></li>
  <li><a href="http://www.10gen.com/events">MongoDB Events</a></li>
  <li><a href="http://www.10gen.com/presentations">Slides and Video</a></li>
  <li><a href="http://www.10gen.com/products/mms/">MongoDB Monitoring Service</a> (<a href="http://mms.10gen.com/help/">docs</a>)</li>
</ul>
         </div>
       </div>
        <div class="clearer"></div>
      </div><div id="top-right">
        <div class="user-right">
          <ul id="header-menu-bar" class="ajs-menu-bar">
            <li class="normal"><a target="_blank" href="http://groups.google.com/group/mongodb-user">Forums</a></li>
            <li class="normal"><a target="_blank" href="http://blog.mongodb.org/">Blog</a></li>
            <li class="normal"><a href="http://www.mongodb.org/downloads">Download</a></li>
            <li class="normal"><a href="http://docs.mongodb.org/ecosystem/drivers/">Drivers</a></li>
            <li class="normal"><a href="http://www.10gen.com/events">Events</a></li>
            <li class="normal last"><a class="last" href="http://docs.mongodb.org/manual/meta/translation">Translations</a></li>
          </ul>
        </div>
      </div>
      <div class="search-db"><gcse:searchbox></gcse:searchbox></div>
          <div id="etp">
            <ul>
              <li><a href="https://github.com/mongodb/docs/blob/master/source/tutorial/deploy-replica-set.txt" target="_blank" title="Edit tutorial/deploy-replica-set.txt on GitHub">Edit this Page</a></li>
              <li><a href="http://github.com/mongodb/docs" target="_blank" title="Fork the documentation on GitHub and contribute.">GitHub</a></li>
              <li><a id="jirafeedback" href="https://jira.mongodb.org/secure/CreateIssueDetails!init.jspa?pid=10380&issuetype=4&priority=4&summary=Comment+on%3a+%22tutorial/deploy-replica-set%2Etxt%22" target="_blank" title="Report a problem with tutorial/deploy-replica-set.txt on Jira">Report a Problem</a></li>
            </ul>
          </div>
      <div class="footer">
        <p>
          &copy; <a href="">Copyright</a> 2011-2013, 10gen, Inc. 
          MongoDB&reg;, Mongo&reg;, and the leaf logo are registered trademarks of <a href="http://www.10gen.com/">10gen, Inc.</a>
        </p>
      </div><script type="text/javascript">
var _gaq = _gaq || [];
var pluginUrl = (('https:' == document.location.protocol) ? 'https://ssl.' : 'http://www.') + 'google-analytics.com/plugins/ga/inpage_linkid.js';
_gaq.push(['_require', 'inpage_linkid', pluginUrl]);
_gaq.push(['_setAccount', 'UA-7301842-8']);
_gaq.push(['_setDomainName', 'docs.mongodb.org']);
_gaq.push(['_trackPageview']);
(function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
        })();
</script>

<script type="text/javascript">var _kiq = _kiq || [];</script>
<script type="text/javascript">
(function(){
setTimeout(function(){ var d = document, f = d.getElementsByTagName('script')[0], s = d.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = '//s3.amazonaws.com/ki.js/49119/a7n.js'; f.parentNode.insertBefore(s, f); }, 1);
})();
</script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-7301842-14', 'mongodb.org');
ga('send', 'pageview');
</script>

<script type="text/javascript">
document.write(unescape("%3Cscript src='" + document.location.protocol + "//munchkin.marketo.net/munchkin.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script>try { mktoMunchkin("017-HGS-593"); } catch(e) {}</script><script type="text/javascript">
jQuery.ajax({
	 url: "https://jira.mongodb.org/s/en_UScn8g8x/782/6/1.2.5/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?collectorId=298ba4e7",
	 type: "get",
	 cache: true,
	 dataType: "script"
	});
window.ATL_JQ_PAGE_PROPS =  {
	"triggerFunction": function(showCollectorDialog) {
		jQuery("#jirafeedback").click(function(e) {e.preventDefault();showCollectorDialog();});},
		fieldValues: {component: 'mongodb-manual', summary: 'Comment on: "manual/tutorial/deploy-replica-set.txt"'},
		environment: {'repo': 'docs','source': 'tutorial/deploy-replica-set'}
		};
</script><script type="text/javascript">
var versions = [{'t': '2.4 (current)', 'v': 'v2.4'}, {'t': '2.2', 'v': 'v2.2'}]
var pagename = 'tutorial/deploy-replica-set'
var stable = 'v2.4'

function vfnav() {
    if ( pagename=='index' ) {
        pn = ''
    }
    else {
        pn = pagename
    }

    v = $(this).children("option:selected").attr('value')

    if ( (v==0) || (v==stable) ) {
        uri = '/manual/' + pn
    }
    else {
        uri = '/' + v + '/' + pn
    }
    window.location.href= uri;
}

$(document).ready(function(){
    $("#vn").html(function(){
        s=$("<select/>");
        o='<option/>';

        $.each(versions,function(index, version) {
            if ( version.v==stable ) {
                dv=true;
            }
            $(o,{value:version.v,text: version.t}).appendTo(s);
        });

        if ( dv==false ) {
            $(o, {value:0,text:'(stable)'}).appendTo(s);
        }
        return(s);
    });

    $("#vn select").bind('change', vfnav);
    $('#vn select').val('v2.4');
});
</script>
</body>
</html>