<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head><title>Sharding Commands &mdash; MongoDB Manual 2.4.3</title><link rel="shortcut icon" href="http://media.mongodb.org/favicon.ico" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="robots" content="index" />
  <meta name="release" content="2.4.3"/>
  <meta name="DC.Source" content="https://github.com/mongodb/docs/blob/master/source/reference/sharding-commands.txt"/>
      <link rel="canonical" href="http://docs.mongodb.org/manual/reference/sharding-commands" />
  
   <link rel="stylesheet" href="../_static/mongodb-docs.css" type="text/css" />
   <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      
   <script type="text/javascript">
     var DOCUMENTATION_OPTIONS = {
         URL_ROOT:    '../',
         VERSION:     '2.4',
         COLLAPSE_INDEX: false,
         FILE_SUFFIX: '.html',
         HAS_SOURCE:  false,
     };
   </script>
       <script type="text/javascript" src="../_static/jquery.js"></script>
       <script type="text/javascript" src="../_static/underscore.js"></script>
       <script type="text/javascript" src="../_static/doctools.js"></script>
          <link rel="search" type="application/opensearchdescription+xml" href="http://docs.mongodb.org/osd.xml" title="MongoDB Help"/>
<link rel="author" title="About these documents" href="../about.html" />
<link rel="top" title="MongoDB Manual" href="../index.html" />
<link rel="up" title="Sharding" href="../sharding.html" />
<link rel="next" title="Config Database" href="config-database.html" />
<link rel="prev" title="Shard GridFS Data Store" href="../tutorial/shard-gridfs-data.html" />
          <script>
            (function() {
               var cx = '017213726194841070573:WMX6838984';
               var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
               gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;
               var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
            })();
          </script></head>
<body>
      <div id="header-db" class="spread">
        <div class="split">
          <div id="logo">
            <div><a href="http://www.mongodb.org/"><img class="logo" src="http://media.mongodb.org/logo-mongodb.png" alt="MongoDB Logo"/></a></div>
          </div>
        </div>
      </div>  
      <div class="document">
           <div class="documentwrapper"><div class="bodywrapper">
               <div class="body">
                 
    <div class="bc">
      <ul>
          <li><a href="../sharding.html">Sharding</a><span class="bcpoint"> > </span></li>
          <li>Sharding Commands</li> 
      </ul>
    </div>
                 <div id="cse-results">
                   <gcse:searchresults linkTarget="_top"></gcse:searchresults>
                 </div>
                 
  <div class="section" id="sharding-commands">
<span id="id1"></span><h1>Sharding Commands<a class="headerlink" href="#sharding-commands" title="Permalink to this headline">¶</a></h1>
<div class="section" id="javascript-methods">
<h2>JavaScript Methods<a class="headerlink" href="#javascript-methods" title="Permalink to this headline">¶</a></h2>
<dl class="method">
<dt id="sh.addShard">
<tt class="descclassname">sh.</tt><tt class="descname">addShard</tt><big>(</big><em>host</em><big>)</big><a class="headerlink" href="#sh.addShard" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>host</strong> (<em>string</em>) &#8211; Specify the hostname of a database instance or a
replica set configuration.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Use this method to add a database instance or replica set to a
<a class="reference internal" href="glossary.html#term-sharded-cluster"><em class="xref std std-term">sharded cluster</em></a>. This method must be run on a
<a class="reference internal" href="program/mongos.html#bin.mongos" title="mongos"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongos</span></tt></a> instance. The <tt class="docutils literal"><span class="pre">host</span></tt> parameter can be in any
of the following forms:</p>
<div class="highlight-none"><div class="highlight"><pre>[hostname]
[hostname]:[port]
[set]/[hostname]
[set]/[hostname],[hostname]:port
</pre></div>
</div>
<p>You can specify shards using the hostname, or a hostname and port
combination if the shard is running on a non-standard port.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Do not use <tt class="docutils literal"><span class="pre">localhost</span></tt> for the hostname unless your
<a class="reference internal" href="glossary.html#term-config-database"><em class="xref std std-term">configuration server</em></a>
is also running on <tt class="docutils literal"><span class="pre">localhost</span></tt>.</p>
</div>
<p>The optimal configuration is to deploy shards across
<a class="reference internal" href="glossary.html#term-replica-set"><em class="xref std std-term">replica sets</em></a>.
To add a shard on a replica set you must specify the name of the
replica set and the hostname of at least one member of the replica
set. You must specify at least one member of the set, but can
specify all members in the set or another subset if
desired. <a class="reference internal" href="method/sh.addShard.html#sh.addShard" title="sh.addShard()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addShard()</span></tt></a> takes the following form:</p>
<p>If you specify additional hostnames, all must be members of the
same replica set.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">sh</span><span class="p">.</span><span class="nx">addShard</span><span class="p">(</span><span class="s2">&quot;set-name/seed-hostname&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<div class="last highlight-javascript"><div class="highlight"><pre><span class="nx">sh</span><span class="p">.</span><span class="nx">addShard</span><span class="p">(</span><span class="s2">&quot;repl0/mongodb3.example.net:27327&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>The <a class="reference internal" href="method/sh.addShard.html#sh.addShard" title="sh.addShard()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addShard()</span></tt></a> method is a helper for the
<a class="reference internal" href="command/addShard.html#dbcmd.addShard" title="addShard"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">addShard</span></tt></a> command.
The <a class="reference internal" href="command/addShard.html#dbcmd.addShard" title="addShard"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">addShard</span></tt></a> command has additional options which are
not available with this helper.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="command/addShard.html#dbcmd.addShard" title="addShard"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">addShard</span></tt></a></li>
<li><a class="reference internal" href="../administration/sharded-clusters.html"><em>Sharded Cluster Administration</em></a></li>
<li><a class="reference internal" href="../tutorial/add-shards-to-shard-cluster.html"><em>Add Shards to a Cluster</em></a></li>
<li><a class="reference internal" href="../tutorial/remove-shards-from-cluster.html"><em>Remove Shards from an Existing Sharded Cluster</em></a></li>
</ul>
</div>
</dd></dl>

<dl class="method">
<dt id="sh.enableSharding">
<tt class="descclassname">sh.</tt><tt class="descname">enableSharding</tt><big>(</big><em>database</em><big>)</big><a class="headerlink" href="#sh.enableSharding" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>database</strong> (<em>string</em>) &#8211; Specify a database name to shard.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Enables sharding on the specified database. This does not
automatically shard any collections, but makes it possible to begin
sharding collections using <a class="reference internal" href="method/sh.shardCollection.html#sh.shardCollection" title="sh.shardCollection()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.shardCollection()</span></tt></a>.</p>
</dd></dl>

<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="method/sh.shardCollection.html#sh.shardCollection" title="sh.shardCollection()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.shardCollection()</span></tt></a></p>
</div>
<dl class="method">
<dt id="sh.shardCollection">
<tt class="descclassname">sh.</tt><tt class="descname">shardCollection</tt><big>(</big><em>namespace</em>, <em>key</em>, <em>unique</em><big>)</big><a class="headerlink" href="#sh.shardCollection" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>namespace</strong> (<em>string</em>) &#8211; The <a class="reference internal" href="glossary.html#term-namespace"><em class="xref std std-term">namespace</em></a> of the collection to shard.</li>
<li><strong>key</strong> (<em>document</em>) &#8211; A <a class="reference internal" href="glossary.html#term-document"><em class="xref std std-term">document</em></a> containing a <a class="reference internal" href="glossary.html#term-shard-key"><em class="xref std std-term">shard key</em></a> that the
sharding system uses to <a class="reference internal" href="glossary.html#term-partition"><em class="xref std std-term">partition</em></a> and distribute objects
among the shards.</li>
<li><strong>unique</strong> (<em>boolean</em>) &#8211; When true, the <tt class="docutils literal"><span class="pre">unique</span></tt> option ensures that the underlying
index enforces a unique constraint. <a class="reference internal" href="glossary.html#term-hashed-shard-key"><em class="xref std std-term">Hashed shard keys</em></a> do not support unique constraints.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Shards the named collection, according to the specified
<a class="reference internal" href="glossary.html#term-shard-key"><em class="xref std std-term">shard key</em></a>. Specify shard keys in the form of a <a class="reference internal" href="glossary.html#term-document"><em class="xref std std-term">document</em></a>.
Shard keys may refer to a single document field, or more typically
several document fields to form a &#8220;compound shard key.&#8221;</p>
<p class="versionadded">
<span class="versionmodified">New in version 2.4: </span>Use the form <tt class="docutils literal"><span class="pre">{field:</span> <span class="pre">&quot;hashed&quot;}</span></tt> to create a
<a class="reference internal" href="glossary.html#term-hashed-shard-key"><em class="xref std std-term">hashed shard key</em></a>.
Hashed shard keys may not be compound indexes.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">MongoDB provides no method to deactivate sharding for a collection
after calling <a class="reference internal" href="command/shardCollection.html#dbcmd.shardCollection" title="shardCollection"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardCollection</span></tt></a>. Additionally, after
<a class="reference internal" href="command/shardCollection.html#dbcmd.shardCollection" title="shardCollection"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardCollection</span></tt></a>, you cannot change shard keys or modify
the value of any field used in your shard key index.</p>
</div>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="command/shardCollection.html#dbcmd.shardCollection" title="shardCollection"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardCollection</span></tt></a> for additional options,
<a class="reference internal" href="../sharding.html"><em>Sharding</em></a>, <a class="reference internal" href="../core/sharded-clusters.html"><em>Sharded Cluster Overview</em></a> for an overview of
sharding with MongoDB and
<a class="reference internal" href="../tutorial/deploy-shard-cluster.html"><em>Deploy a Sharded Cluster</em></a> for a tutorial.
Also review <a class="reference internal" href="../core/sharded-clusters.html#sharding-shard-key"><em>Shard Keys</em></a> regarding choosing a shard
key.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="sh.splitFind">
<tt class="descclassname">sh.</tt><tt class="descname">splitFind</tt><big>(</big><em>namespace</em>, <em>query</em><big>)</big><a class="headerlink" href="#sh.splitFind" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>namespace</strong> (<em>string</em>) &#8211; Specify the namespace
(i.e. &#8220;<tt class="docutils literal"><span class="pre">&lt;database&gt;.&lt;collection&gt;</span></tt>&#8221;) of
the sharded collection that contains the
chunk to split.</li>
<li><strong>query</strong> &#8211; Specify a query to identify a document in a specific
chunk. Typically specify the <a class="reference internal" href="glossary.html#term-shard-key"><em class="xref std std-term">shard key</em></a> for a
document as the query.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Splits the chunk containing the document specified by the <tt class="docutils literal"><span class="pre">query</span></tt>
at its median point, creating two roughly equal chunks. Use
<a class="reference internal" href="method/sh.splitAt.html#sh.splitAt" title="sh.splitAt()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.splitAt()</span></tt></a> to split a collection in a specific point.</p>
<p>In most circumstances, you should leave chunk splitting to the
automated processes. However, when initially deploying a
<a class="reference internal" href="glossary.html#term-sharded-cluster"><em class="xref std std-term">sharded cluster</em></a> it is necessary to perform some measure of
<a class="reference internal" href="glossary.html#term-pre-splitting"><em class="xref std std-term">pre-splitting</em></a> using manual methods including
<a class="reference internal" href="method/sh.splitFind.html#sh.splitFind" title="sh.splitFind()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.splitFind()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="sh.splitAt">
<tt class="descclassname">sh.</tt><tt class="descname">splitAt</tt><big>(</big><em>namespace</em>, <em>query</em><big>)</big><a class="headerlink" href="#sh.splitAt" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>namespace</strong> (<em>string</em>) &#8211; Specify the namespace
(i.e. &#8220;<tt class="docutils literal"><span class="pre">&lt;database&gt;.&lt;collection&gt;</span></tt>&#8221;) of
the sharded collection that contains the
chunk to split.</li>
<li><strong>query</strong> (<em>document</em>) &#8211; Specify a query to identify a document in a
specific chunk. Typically specify the
<a class="reference internal" href="glossary.html#term-shard-key"><em class="xref std std-term">shard key</em></a> for a document as the
query.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Splits the chunk containing the document specified by the <tt class="docutils literal"><span class="pre">query</span></tt>
as if that document were at the &#8220;middle&#8221; of the collection, even if
the specified document is not the actual median of the
collection. Use this command to manually split chunks unevenly. Use
the &#8220;<a class="reference internal" href="method/sh.splitFind.html#sh.splitFind" title="sh.splitFind()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.splitFind()</span></tt></a>&#8221; function to split a chunk at the
actual median.</p>
<p>In most circumstances, you should leave chunk splitting to the
automated processes within MongoDB. However, when initially
deploying a <a class="reference internal" href="glossary.html#term-sharded-cluster"><em class="xref std std-term">sharded cluster</em></a> it is necessary to perform some
measure of <a class="reference internal" href="glossary.html#term-pre-splitting"><em class="xref std std-term">pre-splitting</em></a> using manual methods including
<a class="reference internal" href="method/sh.splitAt.html#sh.splitAt" title="sh.splitAt()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.splitAt()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="sh.moveChunk">
<tt class="descclassname">sh.</tt><tt class="descname">moveChunk</tt><big>(</big><em>collection</em>, <em>query</em>, <em>destination</em><big>)</big><a class="headerlink" href="#sh.moveChunk" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>collection</strong> (<em>string</em>) &#8211; Specifies the sharded collection containing the chunk to
migrate.</li>
<li><strong>query</strong> (<em>document</em>) &#8211; A document that specifies an equality match on the shard key,
which selects the chunk to move.</li>
<li><strong>destination</strong> (<em>string</em>) &#8211; Specifies the name of the shard that you wish to move the
designated chunk to.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Moves the chunk containing the document specified by the <tt class="docutils literal"><span class="pre">query</span></tt>
to the shard described by <tt class="docutils literal"><span class="pre">destination</span></tt>.</p>
<p>This method provides a wrapper around the
<a class="reference internal" href="command/moveChunk.html#dbcmd.moveChunk" title="moveChunk"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">moveChunk</span></tt></a>. In most circumstances, allow the
<a class="reference internal" href="glossary.html#term-balancer"><em class="xref std std-term">balancer</em></a> to automatically migrate <a class="reference internal" href="glossary.html#term-chunk"><em class="xref std std-term">chunks</em></a>,
and avoid calling <a class="reference internal" href="method/sh.moveChunk.html#sh.moveChunk" title="sh.moveChunk()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.moveChunk()</span></tt></a> directly.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="command/moveChunk.html#dbcmd.moveChunk" title="moveChunk"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">moveChunk</span></tt></a>, <a class="reference internal" href="method/sh.splitAt.html#sh.splitAt" title="sh.splitAt()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.splitAt()</span></tt></a>,
<a class="reference internal" href="method/sh.splitFind.html#sh.splitFind" title="sh.splitFind()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.splitFind()</span></tt></a>, <a class="reference internal" href="../sharding.html"><em>Sharding</em></a>, and <a class="reference internal" href="../core/sharded-cluster-internals.html#sharding-chunk-migration"><em>chunk
migration</em></a>.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="sh.setBalancerState">
<tt class="descclassname">sh.</tt><tt class="descname">setBalancerState</tt><big>(</big><em>state</em><big>)</big><a class="headerlink" href="#sh.setBalancerState" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>state</strong> (<em>boolean</em>) &#8211; <tt class="docutils literal"><span class="pre">true</span></tt> enables the balancer if disabled,
and <tt class="docutils literal"><span class="pre">false</span></tt> disables the balancer.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Enables or disables the <a class="reference internal" href="glossary.html#term-balancer"><em class="xref std std-term">balancer</em></a>. Use
<a class="reference internal" href="method/sh.getBalancerState.html#sh.getBalancerState" title="sh.getBalancerState()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.getBalancerState()</span></tt></a> to determine if the balancer is
currently enabled or disabled and <a class="reference internal" href="method/sh.isBalancerRunning.html#sh.isBalancerRunning" title="sh.isBalancerRunning()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.isBalancerRunning()</span></tt></a>
to check its current state.</p>
</dd></dl>

<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="method/sh.enableBalancing.html#sh.enableBalancing" title="sh.enableBalancing()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.enableBalancing()</span></tt></a></li>
<li><a class="reference internal" href="method/sh.disableBalancing.html#sh.disableBalancing" title="sh.disableBalancing()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.disableBalancing()</span></tt></a></li>
<li><a class="reference internal" href="method/sh.getBalancerHost.html#sh.getBalancerHost" title="sh.getBalancerHost()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.getBalancerHost()</span></tt></a></li>
<li><a class="reference internal" href="method/sh.getBalancerState.html#sh.getBalancerState" title="sh.getBalancerState()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.getBalancerState()</span></tt></a></li>
<li><a class="reference internal" href="method/sh.isBalancerRunning.html#sh.isBalancerRunning" title="sh.isBalancerRunning()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.isBalancerRunning()</span></tt></a></li>
<li><a class="reference internal" href="method/sh.startBalancer.html#sh.startBalancer" title="sh.startBalancer()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.startBalancer()</span></tt></a></li>
<li><a class="reference internal" href="method/sh.stopBalancer.html#sh.stopBalancer" title="sh.stopBalancer()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.stopBalancer()</span></tt></a></li>
<li><a class="reference internal" href="method/sh.waitForBalancer.html#sh.waitForBalancer" title="sh.waitForBalancer()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.waitForBalancer()</span></tt></a></li>
<li><a class="reference internal" href="method/sh.waitForBalancerOff.html#sh.waitForBalancerOff" title="sh.waitForBalancerOff()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.waitForBalancerOff()</span></tt></a></li>
</ul>
</div>
<dl class="method">
<dt id="sh.isBalancerRunning">
<tt class="descclassname">sh.</tt><tt class="descname">isBalancerRunning</tt><big>(</big><big>)</big><a class="headerlink" href="#sh.isBalancerRunning" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">boolean</td>
</tr>
</tbody>
</table>
<p>Returns true if the <a class="reference internal" href="glossary.html#term-balancer"><em class="xref std std-term">balancer</em></a> process is currently running
and migrating chunks and false if the balancer process is not
running. Use <a class="reference internal" href="method/sh.getBalancerState.html#sh.getBalancerState" title="sh.getBalancerState()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.getBalancerState()</span></tt></a> to determine if the
balancer is enabled or disabled.</p>
</dd></dl>

<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="method/sh.enableBalancing.html#sh.enableBalancing" title="sh.enableBalancing()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.enableBalancing()</span></tt></a></li>
<li><a class="reference internal" href="method/sh.disableBalancing.html#sh.disableBalancing" title="sh.disableBalancing()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.disableBalancing()</span></tt></a></li>
<li><a class="reference internal" href="method/sh.getBalancerHost.html#sh.getBalancerHost" title="sh.getBalancerHost()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.getBalancerHost()</span></tt></a></li>
<li><a class="reference internal" href="method/sh.getBalancerState.html#sh.getBalancerState" title="sh.getBalancerState()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.getBalancerState()</span></tt></a></li>
<li><a class="reference internal" href="method/sh.setBalancerState.html#sh.setBalancerState" title="sh.setBalancerState()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.setBalancerState()</span></tt></a></li>
<li><a class="reference internal" href="method/sh.startBalancer.html#sh.startBalancer" title="sh.startBalancer()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.startBalancer()</span></tt></a></li>
<li><a class="reference internal" href="method/sh.stopBalancer.html#sh.stopBalancer" title="sh.stopBalancer()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.stopBalancer()</span></tt></a></li>
<li><a class="reference internal" href="method/sh.waitForBalancer.html#sh.waitForBalancer" title="sh.waitForBalancer()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.waitForBalancer()</span></tt></a></li>
<li><a class="reference internal" href="method/sh.waitForBalancerOff.html#sh.waitForBalancerOff" title="sh.waitForBalancerOff()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.waitForBalancerOff()</span></tt></a></li>
</ul>
</div>
<dl class="method">
<dt id="sh.status">
<tt class="descclassname">sh.</tt><tt class="descname">status</tt><big>(</big><big>)</big><a class="headerlink" href="#sh.status" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a formatted report of the sharding configuration and the
information regarding existing chunks in a <a class="reference internal" href="glossary.html#term-sharded-cluster"><em class="xref std std-term">sharded cluster</em></a>.
The default behavior suppresses the detailed chunk information if
the total number of chunks is greater than or equal to 20.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>verbose</strong> (<em>boolean</em>) &#8211; Optional. If <tt class="docutils literal"><span class="pre">true</span></tt>, the method displays details of the
document distribution across chunks when you have 20 or more
chunks.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="method/db.printShardingStatus.html#db.printShardingStatus" title="db.printShardingStatus()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">db.printShardingStatus()</span></tt></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sh.addShardTag">
<tt class="descclassname">sh.</tt><tt class="descname">addShardTag</tt><big>(</big><em>shard</em>, <em>tag</em><big>)</big><a class="headerlink" href="#sh.addShardTag" title="Permalink to this definition">¶</a></dt>
<dd><p class="versionadded">
<span class="versionmodified">New in version 2.2.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>shard</strong> (<em>string</em>) &#8211; Specifies the name of the shard that you want to give
a specific tag.</li>
<li><strong>tag</strong> (<em>string</em>) &#8211; Specifies the name of the tag that you want to add to
the shard.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="method/sh.addShardTag.html#sh.addShardTag" title="sh.addShardTag()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addShardTag()</span></tt></a> associates a shard with a tag or
identifier.
MongoDB uses these identifiers to direct <a class="reference internal" href="glossary.html#term-chunk"><em class="xref std std-term">chunks</em></a>
that fall within a tagged range to specific shards.</p>
<p><a class="reference internal" href="method/sh.addTagRange.html#sh.addTagRange" title="sh.addTagRange()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addTagRange()</span></tt></a> associates chunk ranges with tag
ranges.</p>
<p>Always issue <a class="reference internal" href="method/sh.addShardTag.html#sh.addShardTag" title="sh.addShardTag()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addShardTag()</span></tt></a> when connected to a
<a class="reference internal" href="program/mongos.html#bin.mongos" title="mongos"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongos</span></tt></a> instance.</p>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<p>The following example adds three tags, <tt class="docutils literal"><span class="pre">NYC</span></tt>, <tt class="docutils literal"><span class="pre">LAX</span></tt>, and
<tt class="docutils literal"><span class="pre">NRT</span></tt>, to three shards:</p>
<div class="last highlight-javascript"><div class="highlight"><pre><span class="nx">sh</span><span class="p">.</span><span class="nx">addShardTag</span><span class="p">(</span><span class="s2">&quot;shard0000&quot;</span><span class="p">,</span> <span class="s2">&quot;NYC&quot;</span><span class="p">)</span>
<span class="nx">sh</span><span class="p">.</span><span class="nx">addShardTag</span><span class="p">(</span><span class="s2">&quot;shard0001&quot;</span><span class="p">,</span> <span class="s2">&quot;LAX&quot;</span><span class="p">)</span>
<span class="nx">sh</span><span class="p">.</span><span class="nx">addShardTag</span><span class="p">(</span><span class="s2">&quot;shard0002&quot;</span><span class="p">,</span> <span class="s2">&quot;NRT&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="method/sh.addTagRange.html#sh.addTagRange" title="sh.addTagRange()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addTagRange()</span></tt></a> and</li>
<li><a class="reference internal" href="method/sh.removeShardTag.html#sh.removeShardTag" title="sh.removeShardTag()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.removeShardTag()</span></tt></a></li>
</ul>
</div>
</dd></dl>

<dl class="method">
<dt id="sh.addTagRange">
<tt class="descclassname">sh.</tt><tt class="descname">addTagRange</tt><big>(</big><em>namespace</em>, <em>minimum</em>, <em>maximum</em>, <em>tag</em><big>)</big><a class="headerlink" href="#sh.addTagRange" title="Permalink to this definition">¶</a></dt>
<dd><p class="versionadded">
<span class="versionmodified">New in version 2.2.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>namespace</strong> (<em>string</em>) &#8211; Specifies the namespace, in the form of
<tt class="docutils literal"><span class="pre">&lt;database&gt;.&lt;collection&gt;</span></tt> of the sharded
collection that you would like to tag.</li>
<li><strong>minimum</strong> (<em>document</em>) &#8211; Specifies the minimum value of the
<a class="reference internal" href="glossary.html#term-shard-key"><em class="xref std std-term">shard key</em></a> range to include in the tag.
Specify the minimum value in the form of
<tt class="docutils literal"><span class="pre">&lt;fieldname&gt;:&lt;value&gt;</span></tt>.
This value must be of the same BSON type or types
as the shard key.</li>
<li><strong>maximum</strong> (<em>document</em>) &#8211; Specifies the maximum value of the shard key range
to include in the tag.  Specify the maximum value
in the form of <tt class="docutils literal"><span class="pre">&lt;fieldname&gt;:&lt;value&gt;</span></tt>.
This value must be of the same BSON type or types
as the shard key.</li>
<li><strong>tag</strong> (<em>string</em>) &#8211; Specifies the name of the tag to attach the range
specified by the <tt class="docutils literal"><span class="pre">minimum</span></tt> and <tt class="docutils literal"><span class="pre">maximum</span></tt>
arguments to.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><a class="reference internal" href="method/sh.addTagRange.html#sh.addTagRange" title="sh.addTagRange()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addTagRange()</span></tt></a> attaches a range of values of the shard
key to a shard tag created using the <a class="reference internal" href="method/sh.addShardTag.html#sh.addShardTag" title="sh.addShardTag()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addShardTag()</span></tt></a>
method. Use this operation to ensure that the documents that exist
within the specified range exist on shards that have a matching
tag.</p>
<p>Always issue <a class="reference internal" href="method/sh.addTagRange.html#sh.addTagRange" title="sh.addTagRange()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addTagRange()</span></tt></a> when connected to a
<a class="reference internal" href="program/mongos.html#bin.mongos" title="mongos"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongos</span></tt></a> instance.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you add a tag range to a collection using
<a class="reference internal" href="method/sh.addTagRange.html#sh.addTagRange" title="sh.addTagRange()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addTagRange()</span></tt></a>, and then later drop the collection
or its database, MongoDB does not remove tag association. If you
later create a new collection with the same name, the old tag
association will apply to the new collection.</p>
</div>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<p>Given a shard key of <tt class="docutils literal"><span class="pre">{STATE:1,ZIP:1}</span></tt>, create a tag range covering
ZIP codes in New York State:</p>
<div class="last highlight-javascript"><div class="highlight"><pre><span class="nx">sh</span><span class="p">.</span><span class="nx">addTagRange</span><span class="p">(</span> <span class="s2">&quot;exampledb.collection&quot;</span><span class="p">,</span>
        <span class="p">{</span> <span class="nx">STATE</span><span class="o">:</span> <span class="s2">&quot;NY&quot;</span><span class="p">,</span> <span class="nx">ZIP</span><span class="o">:</span> <span class="nx">MinKey</span> <span class="p">},</span>
        <span class="p">{</span> <span class="nx">STATE</span><span class="o">:</span><span class="s2">&quot;NY&quot;</span><span class="p">,</span> <span class="nx">ZIP</span><span class="o">:</span> <span class="nx">MaxKey</span> <span class="p">},</span>
        <span class="s2">&quot;NY&quot;</span>
        <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="method/sh.addShardTag.html#sh.addShardTag" title="sh.addShardTag()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addShardTag()</span></tt></a>,
<a class="reference internal" href="method/sh.removeShardTag.html#sh.removeShardTag" title="sh.removeShardTag()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.removeShardTag()</span></tt></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sh.removeShardTag">
<tt class="descclassname">sh.</tt><tt class="descname">removeShardTag</tt><big>(</big><em>shard</em>, <em>tag</em><big>)</big><a class="headerlink" href="#sh.removeShardTag" title="Permalink to this definition">¶</a></dt>
<dd><p class="versionadded">
<span class="versionmodified">New in version 2.2.</span></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>shard</strong> (<em>string</em>) &#8211; Specifies the name of the shard that you want
to remove a tag from.</li>
<li><strong>tag</strong> (<em>string</em>) &#8211; Specifies the name of the tag that you want to remove
from the shard.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Removes the association between a tag and a shard.</p>
<p>Always issue <a class="reference internal" href="method/sh.removeShardTag.html#sh.removeShardTag" title="sh.removeShardTag()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.removeShardTag()</span></tt></a> when connected to a
<a class="reference internal" href="program/mongos.html#bin.mongos" title="mongos"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongos</span></tt></a> instance.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="method/sh.addShardTag.html#sh.addShardTag" title="sh.addShardTag()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addShardTag()</span></tt></a>,
<a class="reference internal" href="method/sh.addTagRange.html#sh.addTagRange" title="sh.addTagRange()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addTagRange()</span></tt></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="sh.help">
<tt class="descclassname">sh.</tt><tt class="descname">help</tt><big>(</big><big>)</big><a class="headerlink" href="#sh.help" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a basic help text for all sharding related shell
functions.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="database-commands">
<h2>Database Commands<a class="headerlink" href="#database-commands" title="Permalink to this headline">¶</a></h2>
<p>The following database commands support <a class="reference internal" href="glossary.html#term-sharded-cluster"><em class="xref std std-term">sharded clusters</em></a>.</p>
<dl class="dbcommand">
<dt id="dbcmd.addShard">
<tt class="descname">addShard</tt><a class="headerlink" href="#dbcmd.addShard" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>hostname</strong> (<em>string</em>) &#8211; a hostname or replica-set/hostname string.</li>
<li><strong>name</strong> (<em>string</em>) &#8211; Optional. Unless specified, a name will be
automatically provided to uniquely identify
the shard.</li>
<li><strong>maxSize</strong> (<em>integer</em>) &#8211; Optional, megabytes. Limits the maximum size
of a shard.
If <tt class="docutils literal"><span class="pre">maxSize</span></tt> is <tt class="docutils literal"><span class="pre">0</span></tt> then MongoDB will not
limit the size of the shard.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Use the <a class="reference internal" href="command/addShard.html#dbcmd.addShard" title="addShard"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">addShard</span></tt></a> command to add a database instance
or replica set to a <a class="reference internal" href="glossary.html#term-sharded-cluster"><em class="xref std std-term">sharded cluster</em></a>.
You must run this command when connected a <a class="reference internal" href="program/mongos.html#bin.mongos" title="mongos"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongos</span></tt></a> instance.</p>
<p>The command takes the following form:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">addShard</span><span class="o">:</span> <span class="s2">&quot;&lt;hostname&gt;&lt;:port&gt;&quot;</span> <span class="p">}</span>
</pre></div>
</div>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<div class="last highlight-javascript"><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">runCommand</span><span class="p">({</span><span class="nx">addShard</span><span class="o">:</span> <span class="s2">&quot;mongodb0.example.net:27027&quot;</span><span class="p">})</span>
</pre></div>
</div>
</div>
<p>Replace <tt class="docutils literal"><span class="pre">&lt;hostname&gt;&lt;:port&gt;</span></tt> with the hostname and port of the
database instance you want to add as a shard.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Do not use <tt class="docutils literal"><span class="pre">localhost</span></tt> for the hostname unless your
<a class="reference internal" href="glossary.html#term-config-database"><em class="xref std std-term">configuration server</em></a>
is also running on <tt class="docutils literal"><span class="pre">localhost</span></tt>.</p>
</div>
<p>The optimal configuration is to deploy shards across
<a class="reference internal" href="glossary.html#term-replica-set"><em class="xref std std-term">replica sets</em></a>.
To add a shard on a replica set you must specify the name of the
replica set and the hostname of at least one member of the replica
set. You must specify at least one member of the set, but can
specify all members in the set or another subset if
desired. <a class="reference internal" href="command/addShard.html#dbcmd.addShard" title="addShard"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">addShard</span></tt></a> takes the following form:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">addShard</span><span class="o">:</span> <span class="s2">&quot;replica-set/hostname:port&quot;</span> <span class="p">}</span>
</pre></div>
</div>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<div class="last highlight-javascript"><div class="highlight"><pre><span class="nx">db</span><span class="p">.</span><span class="nx">runCommand</span><span class="p">(</span> <span class="p">{</span> <span class="nx">addShard</span><span class="o">:</span> <span class="s2">&quot;repl0/mongodb3.example.net:27327&quot;</span><span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<p>If you specify additional hostnames, all must be members of the same
replica set.</p>
<p>Send this command to only one <a class="reference internal" href="program/mongos.html#bin.mongos" title="mongos"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongos</span></tt></a> instance, it will
store shard configuration information in the <a class="reference internal" href="glossary.html#term-config-database"><em class="xref std std-term">config database</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Specify a <tt class="docutils literal"><span class="pre">maxSize</span></tt> when you have machines with different disk
capacities, or if you want to limit the amount of data on some
shards.</p>
<p class="last">The <tt class="docutils literal"><span class="pre">maxSize</span></tt> constraint prevents the <a class="reference internal" href="glossary.html#term-balancer"><em class="xref std std-term">balancer</em></a> from
migrating chunks to the shard when the value of
<a class="reference internal" href="command/serverStatus.html#serverStatus.mem.mapped" title="serverStatus.mem.mapped"><tt class="xref mongodb mongodb-data docutils literal"><span class="pre">mem.mapped</span></tt></a> exceeds the value of <tt class="docutils literal"><span class="pre">maxSize</span></tt>.</p>
</div>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="method/sh.addShard.html#sh.addShard" title="sh.addShard()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">sh.addShard()</span></tt></a></li>
<li><a class="reference internal" href="../administration/sharded-clusters.html"><em>Sharded Cluster Administration</em></a></li>
<li><a class="reference internal" href="../tutorial/add-shards-to-shard-cluster.html"><em>Add Shards to a Cluster</em></a></li>
<li><a class="reference internal" href="../tutorial/remove-shards-from-cluster.html"><em>Remove Shards from an Existing Sharded Cluster</em></a></li>
</ul>
</div>
</dd></dl>

<dl class="dbcommand">
<dt id="dbcmd.listShards">
<tt class="descname">listShards</tt><a class="headerlink" href="#dbcmd.listShards" title="Permalink to this definition">¶</a></dt>
<dd><p>Use the <a class="reference internal" href="command/listShards.html#dbcmd.listShards" title="listShards"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">listShards</span></tt></a> command to return a list of
configured shards. The command takes the following form:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">listShards</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="dbcommand">
<dt id="dbcmd.enableSharding">
<tt class="descname">enableSharding</tt><a class="headerlink" href="#dbcmd.enableSharding" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="command/enableSharding.html#dbcmd.enableSharding" title="enableSharding"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">enableSharding</span></tt></a> command enables sharding on a per-database
level. Use the following command form:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">enableSharding</span><span class="o">:</span> <span class="s2">&quot;&lt;database name&gt;&quot;</span> <span class="p">}</span>
</pre></div>
</div>
<p>Once you&#8217;ve enabled sharding in a database, you can use the <a class="reference internal" href="command/shardCollection.html#dbcmd.shardCollection" title="shardCollection"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardCollection</span></tt></a>
command to begin the process of distributing data among the shards.</p>
</dd></dl>

<dl class="dbcommand">
<dt id="dbcmd.shardCollection">
<tt class="descname">shardCollection</tt><a class="headerlink" href="#dbcmd.shardCollection" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="command/shardCollection.html#dbcmd.shardCollection" title="shardCollection"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardCollection</span></tt></a> command marks a collection for sharding and
will allow data to begin distributing among shards. You must run
<a class="reference internal" href="command/enableSharding.html#dbcmd.enableSharding" title="enableSharding"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">enableSharding</span></tt></a> on a database before running the
<a class="reference internal" href="command/shardCollection.html#dbcmd.shardCollection" title="shardCollection"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardCollection</span></tt></a> command.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">shardCollection</span><span class="o">:</span> <span class="s2">&quot;&lt;database&gt;.&lt;collection&gt;&quot;</span><span class="p">,</span> <span class="nx">key</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">shardkey</span><span class="o">&gt;</span> <span class="p">}</span>
</pre></div>
</div>
<p>This enables sharding for the collection specified by
<tt class="docutils literal"><span class="pre">&lt;collection&gt;</span></tt> in the database named <tt class="docutils literal"><span class="pre">&lt;database&gt;</span></tt>, using the key
<tt class="docutils literal"><span class="pre">&lt;shardkey&gt;</span></tt> to distribute documents among the
shard. <tt class="docutils literal"><span class="pre">&lt;shardkey&gt;</span></tt> is a document and takes the same form as an
<a class="reference internal" href="../core/document.html#document-index-specification"><em>index specification document</em></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>shardCollection</strong> (<em>string</em>) &#8211; Specify the namespace of a collection to shard in the form
<tt class="docutils literal"><span class="pre">&lt;database&gt;.&lt;collection&gt;</span></tt>.</li>
<li><strong>key</strong> (<em>document</em>) &#8211; <p>Specify the index specification to use as the shard key.  The
index must exist prior to the <a class="reference internal" href="command/shardCollection.html#dbcmd.shardCollection" title="shardCollection"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardCollection</span></tt></a> command
unless the collection is empty.  If the collection is empty, then
MongoDB will create the index prior to sharding the collection.</p>
<p class="versionadded">
<span class="versionmodified">New in version 2.4: </span>The key may be in the form <tt class="docutils literal"><span class="pre">{</span> <span class="pre">field</span> <span class="pre">:</span> <span class="pre">&quot;hashed&quot;</span> <span class="pre">}</span></tt> which will
use the specified field as a <a class="reference internal" href="../core/sharded-cluster-internals.html#sharding-hashed-shard-key-internals"><em>hashed shard key</em></a> .</p>
</li>
<li><strong>unique</strong> (<em>boolean</em>) &#8211; When true, the <tt class="docutils literal"><span class="pre">unique</span></tt> option ensures that the underlying
index enforces a unique constraint. <a class="reference internal" href="glossary.html#term-hashed-shard-key"><em class="xref std std-term">Hashed shard keys</em></a> do not support unique constraints.</li>
<li><strong>numInitialChunks</strong> (<em>integer</em>) &#8211; <p class="versionadded">
<span class="versionmodified">New in version 2.4.</span></p>
<p>Specify the number of chunks to create upon sharding the
collection. The collection will then be pre-split and balanced
across the specified number of chunks.</p>
<p>You can specify no more than <tt class="docutils literal"><span class="pre">8192</span></tt> chunks using
<tt class="docutils literal"><span class="pre">numInitialChunks</span></tt>.</p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Choosing the right shard key to effectively distribute load among
your shards requires some planning. Also review
<a class="reference internal" href="../core/sharded-clusters.html#sharding-shard-key"><em>Shard Keys</em></a> regarding choosing a shard key.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">MongoDB provides no method to deactivate sharding for a collection
after calling <a class="reference internal" href="command/shardCollection.html#dbcmd.shardCollection" title="shardCollection"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardCollection</span></tt></a>. Additionally, after
<a class="reference internal" href="command/shardCollection.html#dbcmd.shardCollection" title="shardCollection"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardCollection</span></tt></a>, you cannot change shard keys or modify
the value of any field used in your shard key index.</p>
</div>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../sharding.html"><em>Sharding</em></a>, <a class="reference internal" href="../core/sharded-clusters.html"><em>Sharded Cluster Overview</em></a>, and
<a class="reference internal" href="../tutorial/deploy-shard-cluster.html"><em>Deploy a Sharded Cluster</em></a>.</p>
</div>
</dd></dl>

<dl class="dbcommand">
<dt id="dbcmd.shardingState">
<tt class="descname">shardingState</tt><a class="headerlink" href="#dbcmd.shardingState" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="command/shardingState.html#dbcmd.shardingState" title="shardingState"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardingState</span></tt></a> is an admin command that reports if
<a class="reference internal" href="program/mongod.html#bin.mongod" title="mongod"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt></a> is a member of a <a class="reference internal" href="glossary.html#term-sharded-cluster"><em class="xref std std-term">sharded cluster</em></a>.
<a class="reference internal" href="command/shardingState.html#dbcmd.shardingState" title="shardingState"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardingState</span></tt></a> has the following prototype form:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">shardingState</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
<p>For <a class="reference internal" href="command/shardingState.html#dbcmd.shardingState" title="shardingState"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardingState</span></tt></a> to detect that a <a class="reference internal" href="program/mongod.html#bin.mongod" title="mongod"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt></a>
is a member of a sharded cluster, the <a class="reference internal" href="program/mongod.html#bin.mongod" title="mongod"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt></a> must
satisfy the following conditions:</p>
<ol class="arabic simple">
<li>the <a class="reference internal" href="program/mongod.html#bin.mongod" title="mongod"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt></a> is a primary member of a replica set, and</li>
<li>the <a class="reference internal" href="program/mongod.html#bin.mongod" title="mongod"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt></a> instance is a member of a sharded
cluster.</li>
</ol>
<p>If <a class="reference internal" href="command/shardingState.html#dbcmd.shardingState" title="shardingState"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardingState</span></tt></a> detects that a <a class="reference internal" href="program/mongod.html#bin.mongod" title="mongod"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt></a> is a
member of a sharded cluster, <a class="reference internal" href="command/shardingState.html#dbcmd.shardingState" title="shardingState"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardingState</span></tt></a> returns a
document that resembles the following prototype:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
  <span class="s2">&quot;enabled&quot;</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="s2">&quot;configServer&quot;</span> <span class="o">:</span> <span class="s2">&quot;&lt;configdb-string&gt;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;shardName&quot;</span> <span class="o">:</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;shardHost&quot;</span> <span class="o">:</span> <span class="s2">&quot;string:&quot;</span><span class="p">,</span>
  <span class="s2">&quot;versions&quot;</span> <span class="o">:</span> <span class="p">{</span>
       <span class="s2">&quot;&lt;database&gt;.&lt;collection&gt;&quot;</span> <span class="o">:</span> <span class="nx">Timestamp</span><span class="p">(</span><span class="o">&lt;</span><span class="p">...</span><span class="o">&gt;</span><span class="p">),</span>
       <span class="s2">&quot;&lt;database&gt;.&lt;collection&gt;&quot;</span> <span class="o">:</span> <span class="nx">Timestamp</span><span class="p">(</span><span class="o">&lt;</span><span class="p">...</span><span class="o">&gt;</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="s2">&quot;ok&quot;</span> <span class="o">:</span> <span class="mi">1</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Otherwise, <a class="reference internal" href="command/shardingState.html#dbcmd.shardingState" title="shardingState"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardingState</span></tt></a> will return the following
document:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="s2">&quot;note&quot;</span> <span class="o">:</span> <span class="s2">&quot;from execCommand&quot;</span><span class="p">,</span> <span class="s2">&quot;ok&quot;</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;errmsg&quot;</span> <span class="o">:</span> <span class="s2">&quot;not master&quot;</span> <span class="p">}</span>
</pre></div>
</div>
<p>The response from <a class="reference internal" href="command/shardingState.html#dbcmd.shardingState" title="shardingState"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardingState</span></tt></a> when used with a
<a class="reference internal" href="glossary.html#term-config-database"><em class="xref std std-term">config server</em></a> is:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="s2">&quot;enabled&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="s2">&quot;ok&quot;</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="program/mongos.html#bin.mongos" title="mongos"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongos</span></tt></a> instances do not provide the
<a class="reference internal" href="command/shardingState.html#dbcmd.shardingState" title="shardingState"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">shardingState</span></tt></a>.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This command obtains a write lock on the affected database and
will block other operations until it has completed; however, the
operation is typically short lived.</p>
</div>
</dd></dl>

<dl class="dbcommand">
<dt id="dbcmd.removeShard">
<tt class="descname">removeShard</tt><a class="headerlink" href="#dbcmd.removeShard" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the process of removing a shard from a <a class="reference internal" href="glossary.html#term-sharded-cluster"><em class="xref std std-term">cluster</em></a>. This
is a multi-stage process. Begin by issuing the following command:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">removeShard</span> <span class="o">:</span> <span class="s2">&quot;[shardName]&quot;</span> <span class="p">}</span>
</pre></div>
</div>
<p>The balancer will then migrate chunks from the shard specified by
<tt class="docutils literal"><span class="pre">[shardName]</span></tt>. This process happens slowly to avoid placing
undue load on the overall cluster.</p>
<p>The command returns immediately, with the following message:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">msg</span> <span class="o">:</span> <span class="s2">&quot;draining started successfully&quot;</span> <span class="p">,</span> <span class="nx">state</span><span class="o">:</span> <span class="s2">&quot;started&quot;</span> <span class="p">,</span> <span class="nx">shard</span><span class="o">:</span> <span class="s2">&quot;shardName&quot;</span> <span class="p">,</span> <span class="nx">ok</span> <span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
<p>If you run the command again, you&#8217;ll see the following progress
output:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">msg</span><span class="o">:</span> <span class="s2">&quot;draining ongoing&quot;</span> <span class="p">,</span> <span class="nx">state</span><span class="o">:</span> <span class="s2">&quot;ongoing&quot;</span> <span class="p">,</span> <span class="nx">remaining</span><span class="o">:</span> <span class="p">{</span> <span class="nx">chunks</span><span class="o">:</span> <span class="mi">23</span> <span class="p">,</span> <span class="nx">dbs</span><span class="o">:</span> <span class="mi">1</span> <span class="p">},</span> <span class="nx">ok</span><span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">remaining</span></tt> <a class="reference internal" href="glossary.html#term-document"><em class="xref std std-term">document</em></a> specifies how many chunks and
databases remain on the shard. Use <a class="reference internal" href="method/db.printShardingStatus.html#db.printShardingStatus" title="db.printShardingStatus()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">db.printShardingStatus()</span></tt></a>
to list the databases that you must move from the shard.</p>
<p>Each database in a sharded cluster has a primary shard. If the
shard you want to remove is also the primary of one of the cluster&#8217;s
databases, then you must manually move the database to a new
shard. This can be only after the shard is empty. See the
<a class="reference internal" href="command/movePrimary.html#dbcmd.movePrimary" title="movePrimary"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">movePrimary</span></tt></a> command for details.</p>
<p>After removing all chunks and databases from the shard, you
may issue the command again, to return:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span> <span class="nx">msg</span><span class="o">:</span> <span class="s2">&quot;remove shard completed successfully&quot;</span><span class="p">,</span> <span class="nx">stage</span><span class="o">:</span> <span class="s2">&quot;completed&quot;</span><span class="p">,</span> <span class="nx">host</span><span class="o">:</span> <span class="s2">&quot;shardName&quot;</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:</span> <span class="mi">1</span> <span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


    <div id="btnv">
        <ul id="btnvl">
              <li id="btnvpr"><a href="../tutorial/shard-gridfs-data.html" title="Previous Section: Shard GridFS Data Store">&lt; &nbsp; Shard GridFS Data Store</a></li>
              <li id="btnvup"><a href="../sharding.html" title="Parent Section: Sharding" >&#47;&#92;&nbsp; Sharding</a></li>
              <li id="btnvnx"><a href="config-database.html" title="Next Section: Config Database">Config Database &nbsp;&gt;</a></li>
        </ul>
    </div></div></div>
           </div>
       <div class="sphinxsidebar">
         <div class="sphinxsidebarwrapper">
  <h3>
    <a href="../index.html">MongoDB Manual</a> <span id="vn">2.4</span>
  </h3>



<div class="site-contents"><a href="../contents.html">Contents</a></div>


<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Install MongoDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../administration.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crud.html">Core MongoDB Operations (CRUD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-modeling.html">Data Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aggregation.html">Aggregation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../indexes.html">Indexes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../replication.html">Replication</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../sharding.html">Sharding</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core/sharded-clusters.html">Sharded Cluster Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core/sharded-cluster-architectures.html">Sharded Cluster Architectures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core/sharded-cluster-query-routing.html">Query Routing in Sharded Clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core/sharded-cluster-security.html">Security Practices for Sharded Clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core/sharded-cluster-internals.html">Sharded Cluster Internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../administration/sharded-clusters.html">Sharded Cluster Administration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Sharding Commands</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="config-database.html">Config Database</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../applications.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mongo.html">The <tt class="docutils literal"><span class="pre">mongo</span></tt> Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use-cases.html">Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About MongoDB Documentation</a></li>
</ul>



<div class="site-index"><a href="../genindex.html">Index</a></div>
<h3>Formats</h3>
<ul class="this-page-menu">
  <li><a href="/manual/single/">MongoDB Manual, Single HTML Page</a></li>
  <li><a href="http://docs.mongodb.org/master/MongoDB-Manual-master.pdf" rel="nofollow">MongoDB Manual, PDF Format</a></li>
  <li><a href="http://docs.mongodb.org/master/MongoDB-Manual-master.epub" rel="nofollow">MongoDB Manual, ePub Format</a></li>
</ul>
<h3><a href="http://www.mongodb.org/about/">About MongoDB</a></h3>
<ul>
  <li><a href="http://www.mongodb.org/about/introduction">Introduction</a></li>
  <li><a href="http://www.mongodb.org/about/community">User Community</a></li>
  <li><a href="http://mongodb.org/about/community/masters">MongoDB Masters</a></li>
  <li><a href="http://planet.mongodb.org">Planet MongoDB</a></li>
</ul>
<h3><a href="http://docs.mongodb.org/ecosystem/">MongoDB Ecosystem</a></h3>
<ul>
 <li><a href="http://docs.mongodb.org/ecosystem/drivers/">Drivers and Client libraries</a>
   <ul>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/c">C</a> (<a href="http://api.mongodb.org/c/current/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/cpp">C++</a> (<a href="http://api.mongodb.org/cplusplus/current/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/csharp">C#</a> (<a href="http://api.mongodb.org/csharp/current/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/erlang">Erlang</a> (<a href="http://api.mongodb.org/erlang">docs</a>)</li>
     <li><a href="http://hackage.haskell.org/package/mongoDB">Haskell</a> (<a href="http://api.mongodb.org/haskell">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/java">Java</a> (<a href="http://api.mongodb.org/java/current">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/javascript">JavaScript</a> (<a href="http://api.mongodb.org/js/current">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/perl">Perl</a> (<a href="http://api.mongodb.org/perl/current/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/php">PHP</a> (<a href="http://php.net/mongo/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/python">Python</a> (<a href="http://api.mongodb.org/python/current">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/ruby">Ruby</a> (<a href="http://api.mongodb.org/ruby/current">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/scala">Scala</a> (<a href="http://api.mongodb.org/scala/casbah/current/">docs</a>)</li>
   </ul>
 </li>
 <li><a href="http://docs.mongodb.org/ecosystem/tools/">Tools and Integration</a></li>
 <li><a href="http://docs.mongodb.org/ecosystem/platforms/">Platform Integration</a></li>
</ul><h3>MongoDB Resources</h3>
<ul>
  <li><a href="http://www.mongodb.org/downloads">Downloads</a></li>
  <li><a href="http://www.10gen.com/events">MongoDB Events</a></li>
  <li><a href="http://www.10gen.com/presentations">Slides and Video</a></li>
  <li><a href="http://www.10gen.com/products/mms/">MongoDB Monitoring Service</a> (<a href="http://mms.10gen.com/help/">docs</a>)</li>
</ul>
         </div>
       </div>
        <div class="clearer"></div>
      </div><div id="top-right">
        <div class="user-right">
          <ul id="header-menu-bar" class="ajs-menu-bar">
            <li class="normal"><a target="_blank" href="http://groups.google.com/group/mongodb-user">Forums</a></li>
            <li class="normal"><a target="_blank" href="http://blog.mongodb.org/">Blog</a></li>
            <li class="normal"><a href="http://www.mongodb.org/downloads">Download</a></li>
            <li class="normal"><a href="http://docs.mongodb.org/ecosystem/drivers/">Drivers</a></li>
            <li class="normal"><a href="http://www.10gen.com/events">Events</a></li>
            <li class="normal last"><a class="last" href="http://docs.mongodb.org/manual/meta/translation">Translations</a></li>
          </ul>
        </div>
      </div>
      <div class="search-db"><gcse:searchbox></gcse:searchbox></div>
          <div id="etp">
            <ul>
              <li><a href="https://github.com/mongodb/docs/blob/master/source/reference/sharding-commands.txt" target="_blank" title="Edit reference/sharding-commands.txt on GitHub">Edit this Page</a></li>
              <li><a href="http://github.com/mongodb/docs" target="_blank" title="Fork the documentation on GitHub and contribute.">GitHub</a></li>
              <li><a id="jirafeedback" href="https://jira.mongodb.org/secure/CreateIssueDetails!init.jspa?pid=10380&issuetype=4&priority=4&summary=Comment+on%3a+%22reference/sharding-commands%2Etxt%22" target="_blank" title="Report a problem with reference/sharding-commands.txt on Jira">Report a Problem</a></li>
            </ul>
          </div>
      <div class="footer">
        <p>
          &copy; <a href="">Copyright</a> 2011-2013, 10gen, Inc. 
          MongoDB&reg;, Mongo&reg;, and the leaf logo are registered trademarks of <a href="http://www.10gen.com/">10gen, Inc.</a>
        </p>
      </div><script type="text/javascript">
var _gaq = _gaq || [];
var pluginUrl = (('https:' == document.location.protocol) ? 'https://ssl.' : 'http://www.') + 'google-analytics.com/plugins/ga/inpage_linkid.js';
_gaq.push(['_require', 'inpage_linkid', pluginUrl]);
_gaq.push(['_setAccount', 'UA-7301842-8']);
_gaq.push(['_setDomainName', 'docs.mongodb.org']);
_gaq.push(['_trackPageview']);
(function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
        })();
</script>

<script type="text/javascript">var _kiq = _kiq || [];</script>
<script type="text/javascript">
(function(){
setTimeout(function(){ var d = document, f = d.getElementsByTagName('script')[0], s = d.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = '//s3.amazonaws.com/ki.js/49119/a7n.js'; f.parentNode.insertBefore(s, f); }, 1);
})();
</script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-7301842-14', 'mongodb.org');
ga('send', 'pageview');
</script>

<script type="text/javascript">
document.write(unescape("%3Cscript src='" + document.location.protocol + "//munchkin.marketo.net/munchkin.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script>try { mktoMunchkin("017-HGS-593"); } catch(e) {}</script><script type="text/javascript">
jQuery.ajax({
	 url: "https://jira.mongodb.org/s/en_UScn8g8x/782/6/1.2.5/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?collectorId=298ba4e7",
	 type: "get",
	 cache: true,
	 dataType: "script"
	});
window.ATL_JQ_PAGE_PROPS =  {
	"triggerFunction": function(showCollectorDialog) {
		jQuery("#jirafeedback").click(function(e) {e.preventDefault();showCollectorDialog();});},
		fieldValues: {component: 'mongodb-manual', summary: 'Comment on: "manual/reference/sharding-commands.txt"'},
		environment: {'repo': 'docs','source': 'reference/sharding-commands'}
		};
</script><script type="text/javascript">
var versions = [{'t': '2.4 (current)', 'v': 'v2.4'}, {'t': '2.2', 'v': 'v2.2'}]
var pagename = 'reference/sharding-commands'
var stable = 'v2.4'

function vfnav() {
    if ( pagename=='index' ) {
        pn = ''
    }
    else {
        pn = pagename
    }

    v = $(this).children("option:selected").attr('value')

    if ( (v==0) || (v==stable) ) {
        uri = '/manual/' + pn
    }
    else {
        uri = '/' + v + '/' + pn
    }
    window.location.href= uri;
}

$(document).ready(function(){
    $("#vn").html(function(){
        s=$("<select/>");
        o='<option/>';

        $.each(versions,function(index, version) {
            if ( version.v==stable ) {
                dv=true;
            }
            $(o,{value:version.v,text: version.t}).appendTo(s);
        });

        if ( dv==false ) {
            $(o, {value:0,text:'(stable)'}).appendTo(s);
        }
        return(s);
    });

    $("#vn select").bind('change', vfnav);
    $('#vn select').val('v2.4');
});
</script>
</body>
</html>