<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head><title>Replica Set Configuration &mdash; MongoDB Manual 2.4.3</title><link rel="shortcut icon" href="http://media.mongodb.org/favicon.ico" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="robots" content="index" />
  <meta name="release" content="2.4.3"/>
  <meta name="DC.Source" content="https://github.com/mongodb/docs/blob/master/source/reference/replica-configuration.txt"/>
      <link rel="canonical" href="http://docs.mongodb.org/manual/reference/replica-configuration" />
  
   <link rel="stylesheet" href="../_static/mongodb-docs.css" type="text/css" />
   <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      
   <script type="text/javascript">
     var DOCUMENTATION_OPTIONS = {
         URL_ROOT:    '../',
         VERSION:     '2.4',
         COLLAPSE_INDEX: false,
         FILE_SUFFIX: '.html',
         HAS_SOURCE:  false,
     };
   </script>
       <script type="text/javascript" src="../_static/jquery.js"></script>
       <script type="text/javascript" src="../_static/underscore.js"></script>
       <script type="text/javascript" src="../_static/doctools.js"></script>
          <link rel="search" type="application/opensearchdescription+xml" href="http://docs.mongodb.org/osd.xml" title="MongoDB Help"/>
<link rel="author" title="About these documents" href="../about.html" />
<link rel="top" title="MongoDB Manual" href="../index.html" />
<link rel="up" title="Replication" href="../replication.html" />
<link rel="next" title="Replica Set Commands" href="replica-commands.html" />
<link rel="prev" title="Reconfigure a Replica Set with Unavailable Members" href="../tutorial/reconfigure-replica-set-with-unavailable-members.html" />
          <script>
            (function() {
               var cx = '017213726194841070573:WMX6838984';
               var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
               gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;
               var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
            })();
          </script></head>
<body>
      <div id="header-db" class="spread">
        <div class="split">
          <div id="logo">
            <div><a href="http://www.mongodb.org/"><img class="logo" src="http://media.mongodb.org/logo-mongodb.png" alt="MongoDB Logo"/></a></div>
          </div>
        </div>
      </div>  
      <div class="document">
           <div class="documentwrapper"><div class="bodywrapper">
               <div class="body">
                 
    <div class="bc">
      <ul>
          <li><a href="../replication.html">Replication</a><span class="bcpoint"> > </span></li>
          <li>Replica Set Configuration</li> 
      </ul>
    </div>
                 <div id="cse-results">
                   <gcse:searchresults linkTarget="_top"></gcse:searchresults>
                 </div>
                 
  <div class="section" id="replica-set-configuration">
<h1>Replica Set Configuration<a class="headerlink" href="#replica-set-configuration" title="Permalink to this headline">¶</a></h1>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p>This reference provides an overview of replica set
configuration options and settings.</p>
<p>Use <a class="reference internal" href="method/rs.conf.html#rs.conf" title="rs.conf()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.conf()</span></tt></a> in the <a class="reference internal" href="program/mongo.html#bin.mongo" title="mongo"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongo</span></tt></a> shell to retrieve this
configuration. Note that default values are not explicitly displayed.</p>
</div>
<div class="section" id="configuration-variables">
<span id="replica-set-configuration-variables"></span><h2>Configuration Variables<a class="headerlink" href="#configuration-variables" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt id="local.system.replset._id">
<tt class="descclassname">local.system.replset.</tt><tt class="descname">_id</tt><a class="headerlink" href="#local.system.replset._id" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Type</strong>: string</p>
<p><strong>Value</strong>: &lt;setname&gt;</p>
<p>An <tt class="docutils literal"><span class="pre">_id</span></tt> field holding the name of the replica set. This reflects
the set name configured with <a class="reference internal" href="configuration-options.html#replSet" title="replSet"><tt class="xref mongodb mongodb-setting docutils literal"><span class="pre">replSet</span></tt></a> or
<a class="reference internal" href="program/mongod.html#cmdoption-mongod--replSet"><em class="xref std std-option">mongod --replSet</em></a>.</p>
</dd></dl>

<dl class="data">
<dt id="local.system.replset.members">
<tt class="descclassname">local.system.replset.</tt><tt class="descname">members</tt><a class="headerlink" href="#local.system.replset.members" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Type</strong>: array</p>
<p>Contains an array holding an embedded <a class="reference internal" href="glossary.html#term-document"><em class="xref std std-term">document</em></a> for each
member of the replica set. The <tt class="docutils literal"><span class="pre">members</span></tt> document contains a
number of fields that describe the configuration of each member of
the replica set.</p>
<p>The <tt class="xref mongodb mongodb-data docutils literal"><span class="pre">members</span></tt> field in the replica set
configuration document is a zero-indexed array.</p>
</dd></dl>

<dl class="data">
<dt id="local.system.replset.members[n]._id">
<tt class="descclassname">local.system.replset.members[n].</tt><tt class="descname">_id</tt><a class="headerlink" href="#local.system.replset.members[n]._id" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Type</strong>: ordinal</p>
<p>Provides the zero-indexed identifier of every member in the replica
set.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>When updating the replica configuration object, address all members
of the set using the index value in the array. The array index
begins with <tt class="docutils literal"><span class="pre">0</span></tt>. Do not confuse this index value with the value
of the <tt class="xref mongodb mongodb-data docutils literal"><span class="pre">_id</span></tt> field in each document in the
<tt class="xref mongodb mongodb-data docutils literal"><span class="pre">members</span></tt> array.</p>
<p class="last">The <tt class="xref mongodb mongodb-data docutils literal"><span class="pre">_id</span></tt> rarely corresponds to the array
index.</p>
</div>
</dd></dl>

<dl class="data">
<dt id="local.system.replset.members[n].host">
<tt class="descclassname">local.system.replset.members[n].</tt><tt class="descname">host</tt><a class="headerlink" href="#local.system.replset.members[n].host" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Type</strong>: &lt;hostname&gt;&lt;:port&gt;</p>
<p>Identifies the host name of the set member with a hostname and port
number. This name must be resolvable for every host in the replica
set.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last"><tt class="xref mongodb mongodb-data docutils literal"><span class="pre">host</span></tt> cannot hold a value that resolves to
<tt class="docutils literal"><span class="pre">localhost</span></tt> or the local interface unless <em>all</em> members of the
set are on hosts that resolve to localhost.</p>
</div>
</dd></dl>

<dl class="data">
<dt id="local.system.replset.members[n].arbiterOnly">
<tt class="descclassname">local.system.replset.members[n].</tt><tt class="descname">arbiterOnly</tt><a class="headerlink" href="#local.system.replset.members[n].arbiterOnly" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Optional</em>.</p>
<p><strong>Type</strong>: boolean</p>
<p><strong>Default</strong>: false</p>
<p>Identifies an arbiter. For arbiters, this value is <tt class="docutils literal"><span class="pre">true</span></tt>, and
is automatically configured by <a class="reference internal" href="method/rs.addArb.html#rs.addArb" title="rs.addArb()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.addArb()</span></tt></a>&#8221;.</p>
</dd></dl>

<dl class="data">
<dt id="local.system.replset.members[n].buildIndexes">
<tt class="descclassname">local.system.replset.members[n].</tt><tt class="descname">buildIndexes</tt><a class="headerlink" href="#local.system.replset.members[n].buildIndexes" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Optional</em>.</p>
<p><strong>Type</strong>: boolean</p>
<p><strong>Default</strong>: true</p>
<p>Determines whether the <a class="reference internal" href="program/mongod.html#bin.mongod" title="mongod"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongod</span></tt></a> builds <a class="reference internal" href="glossary.html#term-index"><em class="xref std std-term">indexes</em></a> on this member. Do not set to <tt class="docutils literal"><span class="pre">false</span></tt> if a replica set
<em>can</em> become a primary, or if any clients ever issue queries against
this instance.</p>
<p>Omitting index creation, and thus this setting, may be useful,
<strong>if</strong>:</p>
<ul class="simple">
<li>You are only using this instance to perform backups using
<a class="reference internal" href="program/mongodump.html#bin.mongodump" title="mongodump"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongodump</span></tt></a>,</li>
<li>this instance will receive no queries, <em>and</em></li>
<li>index creation and maintenance overburdens the host
system.</li>
</ul>
<p>If set to <tt class="docutils literal"><span class="pre">false</span></tt>, secondaries configured with this option <em>do</em>
build indexes on the <tt class="docutils literal"><span class="pre">_id</span></tt> field, to facilitate operations
required for replication.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>You may only set this value when adding a member to a replica
set. You may not reconfigure a replica set to change the value
of the <tt class="xref mongodb mongodb-data docutils literal"><span class="pre">buildIndexes</span></tt> field after adding the
member to the set.</p>
<p class="last">Other secondaries cannot replicate from
a members where <tt class="xref mongodb mongodb-data docutils literal"><span class="pre">buildIndexes</span></tt> is false.</p>
</div>
</dd></dl>

<dl class="data">
<dt id="local.system.replset.members[n].hidden">
<tt class="descclassname">local.system.replset.members[n].</tt><tt class="descname">hidden</tt><a class="headerlink" href="#local.system.replset.members[n].hidden" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Optional</em>.</p>
<p><strong>Type</strong>: boolean</p>
<p><strong>Default</strong>: false</p>
<p>When this value is <tt class="docutils literal"><span class="pre">true</span></tt>, the replica set hides this instance,
and does not include the member in the output of
<a class="reference internal" href="method/db.isMaster.html#db.isMaster" title="db.isMaster()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">db.isMaster()</span></tt></a> or <a class="reference internal" href="command/isMaster.html#dbcmd.isMaster" title="isMaster"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">isMaster</span></tt></a>. This
prevents read operations (i.e. queries) from ever reaching this
host by way of secondary <a class="reference internal" href="glossary.html#term-read-preference"><em class="xref std std-term">read preference</em></a>.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">&#8220;<a class="reference internal" href="../core/replication.html#replica-set-hidden-members"><em>Hidden Replica Set Members</em></a>&#8220;</p>
</div>
</dd></dl>

<dl class="data">
<dt id="local.system.replset.members[n].priority">
<tt class="descclassname">local.system.replset.members[n].</tt><tt class="descname">priority</tt><a class="headerlink" href="#local.system.replset.members[n].priority" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Optional</em>.</p>
<p><strong>Type</strong>: Number, between 0 and 100.0 including decimals.</p>
<p><strong>Default</strong>: 1</p>
<p>Specify higher values to make a member <em>more</em> eligible to become
<a class="reference internal" href="glossary.html#term-primary"><em class="xref std std-term">primary</em></a>, and lower values to make the member <em>less</em> eligible
to become primary. Priorities are only used in comparison to each
other. Members of the set will veto election requests from members when
another eligible member has a higher priority
value. Changing the balance of priority in a replica set will trigger
an election.</p>
<p>A <tt class="xref mongodb mongodb-data docutils literal"><span class="pre">priority</span></tt> of <tt class="docutils literal"><span class="pre">0</span></tt> makes it impossible for a
member to become primary.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">&#8220;<a class="reference internal" href="../core/replication.html#replica-set-node-priority"><em>Replica Set Member Priority</em></a>&#8221; and &#8220;<a class="reference internal" href="../core/replication.html#replica-set-elections"><em>Replica Set Elections</em></a>.&#8221;</p>
</div>
</dd></dl>

<dl class="data">
<dt id="local.system.replset.members[n].tags">
<tt class="descclassname">local.system.replset.members[n].</tt><tt class="descname">tags</tt><a class="headerlink" href="#local.system.replset.members[n].tags" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Optional</em>.</p>
<p><strong>Type</strong>: <a class="reference internal" href="glossary.html#term-document"><em class="xref std std-term">MongoDB Document</em></a></p>
<p><strong>Default</strong>: none</p>
<p>Used to represent arbitrary values for describing or tagging members
for the purposes of extending <a class="reference internal" href="glossary.html#term-write-concern"><em class="xref std std-term">write concern</em></a>
to allow configurable data center
awareness.</p>
<p>Use in conjunction with <tt class="xref mongodb mongodb-data docutils literal"><span class="pre">getLastErrorModes</span></tt> and
<tt class="xref mongodb mongodb-data docutils literal"><span class="pre">getLastErrorDefaults</span></tt> and
<a class="reference internal" href="method/db.getLastError.html#db.getLastError" title="db.getLastError()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">db.getLastError()</span></tt></a>
(i.e. <a class="reference internal" href="command/getLastError.html#dbcmd.getLastError" title="getLastError"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">getLastError</span></tt></a>.)</p>
<p>For procedures on configuring tag sets, see
<a class="reference internal" href="../tutorial/configure-replica-set-tag-sets.html"><em>Configure Replica Set Tag Sets</em></a>.</p>
</dd></dl>

<dl class="data">
<dt id="local.system.replset.members[n].slaveDelay">
<tt class="descclassname">local.system.replset.members[n].</tt><tt class="descname">slaveDelay</tt><a class="headerlink" href="#local.system.replset.members[n].slaveDelay" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Optional</em>.</p>
<p><strong>Type</strong>: Integer. (seconds.)</p>
<p><strong>Default</strong>: 0</p>
<p>Describes the number of seconds &#8220;behind&#8221; the primary that this
replica set member should &#8220;lag.&#8221; Use this option to create
<a class="reference internal" href="../core/replication.html#replica-set-delayed-members"><em>delayed members</em></a>, that
maintain a copy of the data that reflects the state of the data set
at some amount of time in the past, specified in seconds. Typically such delayed members
help protect against human error, and provide some measure
of insurance against the unforeseen consequences of changes and
updates.</p>
</dd></dl>

<dl class="data">
<dt id="local.system.replset.members[n].votes">
<tt class="descclassname">local.system.replset.members[n].</tt><tt class="descname">votes</tt><a class="headerlink" href="#local.system.replset.members[n].votes" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Optional</em>.</p>
<p><strong>Type</strong>: Integer</p>
<p><strong>Default</strong>: 1</p>
<p>Controls the number of votes a server will cast in a <a class="reference internal" href="../core/replication.html#replica-set-elections"><em>replica set
election</em></a>. The number of votes each member
has can be any non-negative integer, but it is highly recommended
each member has 1 or 0 votes.</p>
<p>If you need more than 7 members in one replica set, use this setting to add additional
non-voting members with a <tt class="xref mongodb mongodb-data docutils literal"><span class="pre">votes</span></tt> value of <tt class="docutils literal"><span class="pre">0</span></tt>.</p>
<p>For most deployments and most members, use the default value,
<tt class="docutils literal"><span class="pre">1</span></tt>, for <tt class="xref mongodb mongodb-data docutils literal"><span class="pre">votes</span></tt>.</p>
</dd></dl>

<dl class="data">
<dt id="local.system.replset.settings">
<tt class="descclassname">local.system.replset.</tt><tt class="descname">settings</tt><a class="headerlink" href="#local.system.replset.settings" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Optional</em>.</p>
<p><strong>Type</strong>: <a class="reference internal" href="glossary.html#term-document"><em class="xref std std-term">MongoDB Document</em></a></p>
<p>The <tt class="docutils literal"><span class="pre">settings</span></tt> document configures options that apply to the whole
replica set.</p>
</dd></dl>

<dl class="data">
<dt id="local.system.replset.settings.chainingAllowed">
<tt class="descclassname">local.system.replset.settings.</tt><tt class="descname">chainingAllowed</tt><a class="headerlink" href="#local.system.replset.settings.chainingAllowed" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Optional</em>.</p>
<p><strong>Type</strong>: boolean</p>
<p><strong>Default</strong>: true</p>
<p class="versionadded">
<span class="versionmodified">New in version 2.2.2.</span></p>
<p>When <tt class="xref mongodb mongodb-data docutils literal"><span class="pre">chainingAllowed</span></tt> is
<tt class="docutils literal"><span class="pre">true</span></tt>, the replica set allows <a class="reference internal" href="glossary.html#term-secondary"><em class="xref std std-term">secondary</em></a> members to
replicate from other secondary members. When
<tt class="xref mongodb mongodb-data docutils literal"><span class="pre">chainingAllowed</span></tt> is
<tt class="docutils literal"><span class="pre">false</span></tt>, secondaries can replicate only from the <a class="reference internal" href="glossary.html#term-primary"><em class="xref std std-term">primary</em></a>.</p>
<p>When you run <a class="reference internal" href="method/rs.conf.html#rs.config" title="rs.config()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.config()</span></tt></a> to view a replica set&#8217;s
configuration, the
<tt class="xref mongodb mongodb-data docutils literal"><span class="pre">chainingAllowed</span></tt> field
appears only when set to <tt class="docutils literal"><span class="pre">false</span></tt>. If not set,
<tt class="xref mongodb mongodb-data docutils literal"><span class="pre">chainingAllowed</span></tt> is <tt class="docutils literal"><span class="pre">true</span></tt>.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="../tutorial/manage-chained-replication.html"><em>Manage Chained Replication</em></a></p>
</div>
</dd></dl>

<dl class="data">
<dt id="local.system.replset.settings.getLastErrorDefaults">
<tt class="descclassname">local.system.replset.settings.</tt><tt class="descname">getLastErrorDefaults</tt><a class="headerlink" href="#local.system.replset.settings.getLastErrorDefaults" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Optional</em>.</p>
<p><strong>Type</strong>: <a class="reference internal" href="glossary.html#term-document"><em class="xref std std-term">MongoDB Document</em></a></p>
<p>Specify arguments to the <a class="reference internal" href="command/getLastError.html#dbcmd.getLastError" title="getLastError"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">getLastError</span></tt></a> that
members of this replica set will use when no arguments to
<a class="reference internal" href="command/getLastError.html#dbcmd.getLastError" title="getLastError"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">getLastError</span></tt></a> has no arguments. If you specify <em>any</em>
arguments, <a class="reference internal" href="command/getLastError.html#dbcmd.getLastError" title="getLastError"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">getLastError</span></tt></a> , ignores these defaults.</p>
</dd></dl>

<dl class="data">
<dt id="local.system.replset.settings.getLastErrorModes">
<tt class="descclassname">local.system.replset.settings.</tt><tt class="descname">getLastErrorModes</tt><a class="headerlink" href="#local.system.replset.settings.getLastErrorModes" title="Permalink to this definition">¶</a></dt>
<dd><p><em>Optional</em>.</p>
<p><strong>Type</strong>: <a class="reference internal" href="glossary.html#term-document"><em class="xref std std-term">MongoDB Document</em></a></p>
<p>Defines the names and combination of
<tt class="xref mongodb mongodb-data docutils literal"><span class="pre">members</span></tt> for use by the application layer
to guarantee <a class="reference internal" href="glossary.html#term-write-concern"><em class="xref std std-term">write concern</em></a> to database using the
<a class="reference internal" href="command/getLastError.html#dbcmd.getLastError" title="getLastError"><tt class="xref mongodb mongodb-dbcommand docutils literal"><span class="pre">getLastError</span></tt></a> command to provide <a class="reference internal" href="glossary.html#term-data-center-awareness"><em class="xref std std-term">data-center
awareness</em></a>.</p>
</dd></dl>

</div>
<div class="section" id="example-document">
<span id="replica-set-configuration-document"></span><h2>Example Document<a class="headerlink" href="#example-document" title="Permalink to this headline">¶</a></h2>
<p>The following document provides a representation of a replica set
configuration document. Angle brackets (e.g. <tt class="docutils literal"><span class="pre">&lt;</span></tt> and <tt class="docutils literal"><span class="pre">&gt;</span></tt>) enclose
all optional fields.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
  <span class="nx">_id</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">setname</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="nx">version</span><span class="o">:</span> <span class="o">&lt;</span><span class="kr">int</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="nx">members</span><span class="o">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nx">_id</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">ordinal</span><span class="o">&gt;</span><span class="p">,</span>
      <span class="nx">host</span> <span class="o">:</span> <span class="nx">hostname</span><span class="o">&lt;:</span><span class="nx">port</span><span class="o">&gt;</span><span class="p">,</span>
      <span class="o">&lt;</span><span class="nx">arbiterOnly</span> <span class="o">:</span> <span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">buildIndexes</span> <span class="o">:</span> <span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">hidden</span> <span class="o">:</span> <span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">priority</span><span class="o">:</span> <span class="o">&lt;</span><span class="nx">priority</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">tags</span><span class="o">:</span> <span class="p">{</span> <span class="o">&lt;</span><span class="nb">document</span><span class="o">&gt;</span> <span class="p">},</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">slaveDelay</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">number</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&gt;</span>
      <span class="o">&lt;</span><span class="nx">votes</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">number</span><span class="o">&gt;&gt;</span>
    <span class="p">}</span>
    <span class="p">,</span> <span class="p">...</span>
  <span class="p">],</span>
  <span class="o">&lt;</span><span class="nx">settings</span><span class="o">:</span> <span class="p">{</span>
    <span class="o">&lt;</span><span class="nx">getLastErrorDefaults</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">lasterrdefaults</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">chainingAllowed</span> <span class="o">:</span> <span class="o">&lt;</span><span class="kr">boolean</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">getLastErrorModes</span> <span class="o">:</span> <span class="o">&lt;</span><span class="nx">modes</span><span class="o">&gt;&gt;</span>
  <span class="p">}</span><span class="o">&gt;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="example-reconfiguration-operations">
<span id="replica-set-reconfiguration-usage"></span><h2>Example Reconfiguration Operations<a class="headerlink" href="#example-reconfiguration-operations" title="Permalink to this headline">¶</a></h2>
<p>Most modifications of <a class="reference internal" href="glossary.html#term-replica-set"><em class="xref std std-term">replica set</em></a> configuration use the
<a class="reference internal" href="program/mongo.html#bin.mongo" title="mongo"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongo</span></tt></a> shell. Consider the following reconfiguration
operation:</p>
<div class="admonition-example admonition">
<p class="first admonition-title">Example</p>
<p>Given the following replica set configuration:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;rs0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;version&quot;</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;members&quot;</span> <span class="o">:</span> <span class="p">[</span>
             <span class="p">{</span>
                     <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
                     <span class="s2">&quot;host&quot;</span> <span class="o">:</span> <span class="s2">&quot;mongodb0.example.net:27017&quot;</span>
             <span class="p">},</span>
             <span class="p">{</span>
                     <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
                     <span class="s2">&quot;host&quot;</span> <span class="o">:</span> <span class="s2">&quot;mongodb1.example.net:27017&quot;</span>
             <span class="p">},</span>
             <span class="p">{</span>
                     <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
                     <span class="s2">&quot;host&quot;</span> <span class="o">:</span> <span class="s2">&quot;mongodb2.example.net:27017&quot;</span>
             <span class="p">}</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>And the following reconfiguration operation:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">cfg</span> <span class="o">=</span> <span class="nx">rs</span><span class="p">.</span><span class="nx">conf</span><span class="p">()</span>
<span class="nx">cfg</span><span class="p">.</span><span class="nx">members</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">priority</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="nx">cfg</span><span class="p">.</span><span class="nx">members</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="nx">priority</span> <span class="o">=</span> <span class="mi">2</span>
<span class="nx">cfg</span><span class="p">.</span><span class="nx">members</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">priority</span> <span class="o">=</span> <span class="mi">2</span>
<span class="nx">rs</span><span class="p">.</span><span class="nx">reconfig</span><span class="p">(</span><span class="nx">cfg</span><span class="p">)</span>
</pre></div>
</div>
<p>This operation begins by saving the current replica set
configuration to the local variable <tt class="docutils literal"><span class="pre">cfg</span></tt> using the
<a class="reference internal" href="method/rs.conf.html#rs.conf" title="rs.conf()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.conf()</span></tt></a> method. Then it adds priority values to the
<tt class="docutils literal"><span class="pre">cfg</span></tt> <a class="reference internal" href="glossary.html#term-document"><em class="xref std std-term">document</em></a> where for the first three sub-documents in
the <tt class="xref mongodb mongodb-data docutils literal"><span class="pre">members</span></tt> array. Finally, it calls the
<a class="reference internal" href="method/rs.reconfig.html#rs.reconfig" title="rs.reconfig()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.reconfig()</span></tt></a> method with the argument of <tt class="docutils literal"><span class="pre">cfg</span></tt> to
initialize this new configuration. The replica set configuration
after this operation will resemble the following:</p>
<div class="last highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
    <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="s2">&quot;rs0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;version&quot;</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s2">&quot;members&quot;</span> <span class="o">:</span> <span class="p">[</span>
             <span class="p">{</span>
                     <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
                     <span class="s2">&quot;host&quot;</span> <span class="o">:</span> <span class="s2">&quot;mongodb0.example.net:27017&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;priority&quot;</span> <span class="o">:</span> <span class="mf">0.5</span>
             <span class="p">},</span>
             <span class="p">{</span>
                     <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
                     <span class="s2">&quot;host&quot;</span> <span class="o">:</span> <span class="s2">&quot;mongodb1.example.net:27017&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;priority&quot;</span> <span class="o">:</span> <span class="mi">2</span>
             <span class="p">},</span>
             <span class="p">{</span>
                     <span class="s2">&quot;_id&quot;</span> <span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
                     <span class="s2">&quot;host&quot;</span> <span class="o">:</span> <span class="s2">&quot;mongodb2.example.net:27017&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;priority&quot;</span> <span class="o">:</span> <span class="mi">1</span>
             <span class="p">}</span>
     <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>Using the &#8220;dot notation&#8221; demonstrated in the above example, you can
modify any existing setting or specify any of optional <a class="reference internal" href="#replica-set-configuration-variables"><em>replica
set configuration variables</em></a>. Until you run
<tt class="docutils literal"><span class="pre">rs.reconfig(cfg)</span></tt> at the shell, no changes will take effect. You
can issue <tt class="docutils literal"><span class="pre">cfg</span> <span class="pre">=</span> <span class="pre">rs.conf()</span></tt> at any time before using
<a class="reference internal" href="method/rs.reconfig.html#rs.reconfig" title="rs.reconfig()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.reconfig()</span></tt></a> to undo your changes and start from the current
configuration. If you issue <tt class="docutils literal"><span class="pre">cfg</span></tt> as an operation at any point, the
<a class="reference internal" href="program/mongo.html#bin.mongo" title="mongo"><tt class="xref mongodb mongodb-program docutils literal"><span class="pre">mongo</span></tt></a> shell at any point will output the complete
<a class="reference internal" href="glossary.html#term-document"><em class="xref std std-term">document</em></a> with modifications for your review.</p>
<p>The <a class="reference internal" href="method/rs.reconfig.html#rs.reconfig" title="rs.reconfig()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.reconfig()</span></tt></a> operation has a &#8220;force&#8221; option, to make it
possible to reconfigure a replica set if a majority of the replica set
is not visible, and there is no <a class="reference internal" href="glossary.html#term-primary"><em class="xref std std-term">primary</em></a> member of the set.
use the following form:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">rs</span><span class="p">.</span><span class="nx">reconfig</span><span class="p">(</span><span class="nx">cfg</span><span class="p">,</span> <span class="p">{</span> <span class="nx">force</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Forcing a <a class="reference internal" href="method/rs.reconfig.html#rs.reconfig" title="rs.reconfig()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.reconfig()</span></tt></a> can lead to <a class="reference internal" href="glossary.html#term-rollback"><em class="xref std std-term">rollback</em></a>
situations and other difficult to recover from situations. Exercise
caution when using this option.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <a class="reference internal" href="method/rs.reconfig.html#rs.reconfig" title="rs.reconfig()"><tt class="xref mongodb mongodb-method docutils literal"><span class="pre">rs.reconfig()</span></tt></a> shell method can force the current
primary to step down and triggers an election in some
situations. When the primary steps down, all clients will
disconnect. This is by design. Since this typically takes 10-20
seconds, attempt to make such changes during scheduled maintenance
periods.</p>
</div>
</div>
</div>


    <div id="btnv">
        <ul id="btnvl">
              <li id="btnvpr"><a href="../tutorial/reconfigure-replica-set-with-unavailable-members.html" title="Previous Section: Reconfigure a Replica Set with Unavailable Members">&lt; &nbsp; Reconfigure a Replica Set with Unavailable Members</a></li>
              <li id="btnvup"><a href="../replication.html" title="Parent Section: Replication" >&#47;&#92;&nbsp; Replication</a></li>
              <li id="btnvnx"><a href="replica-commands.html" title="Next Section: Replica Set Commands">Replica Set Commands &nbsp;&gt;</a></li>
        </ul>
    </div></div></div>
           </div>
       <div class="sphinxsidebar">
         <div class="sphinxsidebarwrapper">
  <h3>
    <a href="../index.html">MongoDB Manual</a> <span id="vn">2.4</span>
  </h3>



<div class="site-contents"><a href="../contents.html">Contents</a></div>


<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Install MongoDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../administration.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crud.html">Core MongoDB Operations (CRUD)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data-modeling.html">Data Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aggregation.html">Aggregation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../indexes.html">Indexes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../replication.html">Replication</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core/replication.html">Replica Set Fundamental Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core/replica-set-architectures.html">Replica Set Architectures and Deployment Patterns</a></li>
<li class="toctree-l2"><a class="reference internal" href="../applications/replication.html">Replica Set Considerations and Behaviors for Applications and Development</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core/replication-internals.html">Replica Set Internals and Behaviors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core/master-slave.html">Master Slave Replication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../administration/replica-sets.html">Replica Set Administration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Replica Set Configuration</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="replica-commands.html">Replica Set Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="../release-notes/replica-set-features.html">Replica Set Features and Version Compatibility</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sharding.html">Sharding</a></li>
<li class="toctree-l1"><a class="reference internal" href="../applications.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mongo.html">The <tt class="docutils literal"><span class="pre">mongo</span></tt> Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../use-cases.html">Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About MongoDB Documentation</a></li>
</ul>



<div class="site-index"><a href="../genindex.html">Index</a></div>
<h3>Formats</h3>
<ul class="this-page-menu">
  <li><a href="/manual/single/">MongoDB Manual, Single HTML Page</a></li>
  <li><a href="http://docs.mongodb.org/master/MongoDB-Manual-master.pdf" rel="nofollow">MongoDB Manual, PDF Format</a></li>
  <li><a href="http://docs.mongodb.org/master/MongoDB-Manual-master.epub" rel="nofollow">MongoDB Manual, ePub Format</a></li>
</ul>
<h3><a href="http://www.mongodb.org/about/">About MongoDB</a></h3>
<ul>
  <li><a href="http://www.mongodb.org/about/introduction">Introduction</a></li>
  <li><a href="http://www.mongodb.org/about/community">User Community</a></li>
  <li><a href="http://mongodb.org/about/community/masters">MongoDB Masters</a></li>
  <li><a href="http://planet.mongodb.org">Planet MongoDB</a></li>
</ul>
<h3><a href="http://docs.mongodb.org/ecosystem/">MongoDB Ecosystem</a></h3>
<ul>
 <li><a href="http://docs.mongodb.org/ecosystem/drivers/">Drivers and Client libraries</a>
   <ul>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/c">C</a> (<a href="http://api.mongodb.org/c/current/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/cpp">C++</a> (<a href="http://api.mongodb.org/cplusplus/current/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/csharp">C#</a> (<a href="http://api.mongodb.org/csharp/current/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/erlang">Erlang</a> (<a href="http://api.mongodb.org/erlang">docs</a>)</li>
     <li><a href="http://hackage.haskell.org/package/mongoDB">Haskell</a> (<a href="http://api.mongodb.org/haskell">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/java">Java</a> (<a href="http://api.mongodb.org/java/current">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/javascript">JavaScript</a> (<a href="http://api.mongodb.org/js/current">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/perl">Perl</a> (<a href="http://api.mongodb.org/perl/current/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/php">PHP</a> (<a href="http://php.net/mongo/">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/python">Python</a> (<a href="http://api.mongodb.org/python/current">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/ruby">Ruby</a> (<a href="http://api.mongodb.org/ruby/current">docs</a>)</li>
     <li><a href="http://docs.mongodb.org/ecosystem/drivers/scala">Scala</a> (<a href="http://api.mongodb.org/scala/casbah/current/">docs</a>)</li>
   </ul>
 </li>
 <li><a href="http://docs.mongodb.org/ecosystem/tools/">Tools and Integration</a></li>
 <li><a href="http://docs.mongodb.org/ecosystem/platforms/">Platform Integration</a></li>
</ul><h3>MongoDB Resources</h3>
<ul>
  <li><a href="http://www.mongodb.org/downloads">Downloads</a></li>
  <li><a href="http://www.10gen.com/events">MongoDB Events</a></li>
  <li><a href="http://www.10gen.com/presentations">Slides and Video</a></li>
  <li><a href="http://www.10gen.com/products/mms/">MongoDB Monitoring Service</a> (<a href="http://mms.10gen.com/help/">docs</a>)</li>
</ul>
         </div>
       </div>
        <div class="clearer"></div>
      </div><div id="top-right">
        <div class="user-right">
          <ul id="header-menu-bar" class="ajs-menu-bar">
            <li class="normal"><a target="_blank" href="http://groups.google.com/group/mongodb-user">Forums</a></li>
            <li class="normal"><a target="_blank" href="http://blog.mongodb.org/">Blog</a></li>
            <li class="normal"><a href="http://www.mongodb.org/downloads">Download</a></li>
            <li class="normal"><a href="http://docs.mongodb.org/ecosystem/drivers/">Drivers</a></li>
            <li class="normal"><a href="http://www.10gen.com/events">Events</a></li>
            <li class="normal last"><a class="last" href="http://docs.mongodb.org/manual/meta/translation">Translations</a></li>
          </ul>
        </div>
      </div>
      <div class="search-db"><gcse:searchbox></gcse:searchbox></div>
          <div id="etp">
            <ul>
              <li><a href="https://github.com/mongodb/docs/blob/master/source/reference/replica-configuration.txt" target="_blank" title="Edit reference/replica-configuration.txt on GitHub">Edit this Page</a></li>
              <li><a href="http://github.com/mongodb/docs" target="_blank" title="Fork the documentation on GitHub and contribute.">GitHub</a></li>
              <li><a id="jirafeedback" href="https://jira.mongodb.org/secure/CreateIssueDetails!init.jspa?pid=10380&issuetype=4&priority=4&summary=Comment+on%3a+%22reference/replica-configuration%2Etxt%22" target="_blank" title="Report a problem with reference/replica-configuration.txt on Jira">Report a Problem</a></li>
            </ul>
          </div>
      <div class="footer">
        <p>
          &copy; <a href="">Copyright</a> 2011-2013, 10gen, Inc. 
          MongoDB&reg;, Mongo&reg;, and the leaf logo are registered trademarks of <a href="http://www.10gen.com/">10gen, Inc.</a>
        </p>
      </div><script type="text/javascript">
var _gaq = _gaq || [];
var pluginUrl = (('https:' == document.location.protocol) ? 'https://ssl.' : 'http://www.') + 'google-analytics.com/plugins/ga/inpage_linkid.js';
_gaq.push(['_require', 'inpage_linkid', pluginUrl]);
_gaq.push(['_setAccount', 'UA-7301842-8']);
_gaq.push(['_setDomainName', 'docs.mongodb.org']);
_gaq.push(['_trackPageview']);
(function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(ga, s);
        })();
</script>

<script type="text/javascript">var _kiq = _kiq || [];</script>
<script type="text/javascript">
(function(){
setTimeout(function(){ var d = document, f = d.getElementsByTagName('script')[0], s = d.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = '//s3.amazonaws.com/ki.js/49119/a7n.js'; f.parentNode.insertBefore(s, f); }, 1);
})();
</script>
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-7301842-14', 'mongodb.org');
ga('send', 'pageview');
</script>

<script type="text/javascript">
document.write(unescape("%3Cscript src='" + document.location.protocol + "//munchkin.marketo.net/munchkin.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script>try { mktoMunchkin("017-HGS-593"); } catch(e) {}</script><script type="text/javascript">
jQuery.ajax({
	 url: "https://jira.mongodb.org/s/en_UScn8g8x/782/6/1.2.5/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?collectorId=298ba4e7",
	 type: "get",
	 cache: true,
	 dataType: "script"
	});
window.ATL_JQ_PAGE_PROPS =  {
	"triggerFunction": function(showCollectorDialog) {
		jQuery("#jirafeedback").click(function(e) {e.preventDefault();showCollectorDialog();});},
		fieldValues: {component: 'mongodb-manual', summary: 'Comment on: "manual/reference/replica-configuration.txt"'},
		environment: {'repo': 'docs','source': 'reference/replica-configuration'}
		};
</script><script type="text/javascript">
var versions = [{'t': '2.4 (current)', 'v': 'v2.4'}, {'t': '2.2', 'v': 'v2.2'}]
var pagename = 'reference/replica-configuration'
var stable = 'v2.4'

function vfnav() {
    if ( pagename=='index' ) {
        pn = ''
    }
    else {
        pn = pagename
    }

    v = $(this).children("option:selected").attr('value')

    if ( (v==0) || (v==stable) ) {
        uri = '/manual/' + pn
    }
    else {
        uri = '/' + v + '/' + pn
    }
    window.location.href= uri;
}

$(document).ready(function(){
    $("#vn").html(function(){
        s=$("<select/>");
        o='<option/>';

        $.each(versions,function(index, version) {
            if ( version.v==stable ) {
                dv=true;
            }
            $(o,{value:version.v,text: version.t}).appendTo(s);
        });

        if ( dv==false ) {
            $(o, {value:0,text:'(stable)'}).appendTo(s);
        }
        return(s);
    });

    $("#vn select").bind('change', vfnav);
    $('#vn select').val('v2.4');
});
</script>
</body>
</html>