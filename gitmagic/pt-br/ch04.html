
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux (vers 25 March 2009), see www.w3.org">
  <meta http-equiv="Content-Type" content=
  "text/html; charset=utf-8">

  <title>Git Magic - Capítulo 4. Bruxarias com branch</title>
  <link rel="stylesheet" type="text/css" href="default.css">
  <meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
  <link rel="home" href="index.html" title="Magia Git">
  <link rel="up" href="index.html" title="Magia Git">
  <link rel="prev" href="ch03.html" title=
  "Capítulo 3. Um pouco de clonagem">
  <link rel="next" href="ch05.html" title=
  "Capítulo 5. Lições de historia">
</head>

<body bgcolor="white" text="black" link="#0000FF" vlink="#840084"
alink="#0000FF">
    <div class="toc">
      <ul>
<li><b>Git Magic</b></li>
        <li>
          <span class="preface"><a href=
          "index.html">Prefácio</a></span>

          <ul>
            <li><span class="section"><a href=
            "index.html#_agradecimentos">Agradecimentos!</a></span></li>

            <li><span class="section"><a href=
            "index.html#_licen%C3%A7a">Licença</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch01.html">1.
          Introdução</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch01.html#_trabalhar_%C3%A9_divertido">Trabalhar é
            Divertido</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_controle_de_vers%C3%B5es">Controle de
            Versões</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_controle_distribu%C3%ADdo">Controle
            distribuído</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_uma_supersti%C3%A7%C3%A3o">Uma
            superstição</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_conflitos_de_mesclagem_merge">Conflitos de
            mesclagem (Merge)</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch02.html">2. Truques
          básicos</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch02.html#_salvando_estados">Salvando
            estados</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_adicionar_remover_renomear">Adicionar,
            Remover, Renomear</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_desfazer_refazer_avan%C3%A7ado">Desfazer/Refazer
            avançado</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_revertendo">Revertendo</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_gera%C3%A7%C3%A3o_do_changelog">Geração do
            Changelog</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_download_de_arquivos">Download de
            arquivos</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_a_%C3%BAltima_vers%C3%A3o">A Última
            Versão</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_publica%C3%A7%C3%A3o_instant%C3%A2nea">Publicação
            instantânea</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_o_que_eu_fiz">O que eu fiz?</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_exerc%C3%ADcios">Exercícios</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch03.html">3. Um pouco de
          clonagem</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch03.html#_sincronizando_computadores">Sincronizando
            Computadores</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_controle_cl%C3%A1ssico_de_c%C3%B3digo">Controle
            clássico de código</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_codigo_fonte_secreto">Codigo-fonte
            secreto</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_repositorios_vazios">Repositorios
            Vazios</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_push_versus_pull">Push versus
            Pull</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_fazendo_um_fork_do_projeto">Fazendo um Fork
            do Projeto</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_backup_supremos">Backup
            Supremos</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_multitarefa_na_velocidade_da_luz">Multitarefa
            na velocidade da luz</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_controle_de_vers%C3%B5es_de_guerrilha">Controle
            de Versões de Guerrilha</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_mercurial">Mercurial</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_bazaar">Bazaar</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_por_que_uso_o_git">Por que uso o
            Git?</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch04.html">4. Bruxarias
          com branch</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch04.html#_a_tecla_chefe">A “tecla”
            chefe</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_trabalho_porco">Trabalho
            porco</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_corre%C3%A7%C3%B5es_r%C3%A1pidas">Correções
            rápidas</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_merging">Merging</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_fluxo_ininterrupto">Fluxo
            ininterrupto</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_reorganizando_uma_bagun%C3%A7a">Reorganizando
            uma Bagunça</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_gerenciando_os_branches">Gerenciando os
            Branches</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_branches_tempor%C3%A1rios">Branches
            Temporários</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_trabalhe_como_quiser">Trabalhe como
            quiser</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch05.html">5. Lições de
          historia</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch05.html#_eu_corrijo">Eu corrijo</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_8230_e_tem_mais">… e tem
            mais</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_altera%C3%A7%C3%B5es_locais_por_%C3%BAltimo">
            Alterações locais por último</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_reescrevendo_o_hist%C3%B3rico">Reescrevendo
            o histórico</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_fazendo_hist%C3%B3ria">Fazendo
            história</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_onde_foi_que_tudo_deu_errado">Onde foi que
            tudo deu errado?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_quem_fez_tudo_dar_errado">Quem fez tudo dar
            errado?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_experi%C3%AAncia_pessoal">Experiência
            pessoal</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch06.html">6. Git
          Multiplayer</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch06.html#_quem_sou_eu">Quem sou eu?</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_sob_ssh_http">Git sob SSH,
            HTTP</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_sobre_qualquer_coisa">Git sobre
            qualquer coisa</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_patches_a_moeda_universal">Patches: A moeda
            Universal</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_sinto_muito_mas_mudamos">Sinto muito, mas
            mudamos</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_branches_remotos">Branches
            Remotos</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_remotos_m%C3%BAltiplos">Remotos
            Múltiplos</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_minhas_preferencias">Minhas
            preferencias</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch07.html">7. Grão-Mestre
          Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch07.html#_disponibiliza%C3%A7%C3%A3o_de_c%C3%B3digo">Disponibilização
            de Código</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_commit_do_que_mudou">Commit do que
            Mudou</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_meu_commit_%C3%A9_muito_grande">Meu Commit
            é muito Grande!</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_o_indice_a_%C3%A1rea_de_atua%C3%A7%C3%A3o_do_git">
            O Indice: A Área de Atuação do Git</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_n%C3%A3o_perca_a_cabe%C3%A7a_head">Não
            perca a CABEÇA (HEAD)</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_explorando_o_head">Explorando o
            HEAD</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_baseando_se_no_git">Baseando se no
            Git</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_manobras_radicais">Manobras
            Radicais</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_preven%C3%A7%C3%A3o_a_maus_commits">Prevenção
            a maus Commits</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch08.html">8. Segredos
          Revelados</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch08.html#_invisibilidade">Invisibilidade</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_integridade">Integridade</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_intelig%C3%AAncia">Inteligência</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_indexando">Indexando</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_origem_do_git">Origem do
            Git</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_o_banco_de_dados_de_objetos">O Banco de
            Dados de Objetos</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_blobs">Blobs</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%C3%A1rvores">Árvores</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_commits">Commits</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_indistingu%C3%ADvel_da_magia">Indistinguível
            da Magia</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch09.html">9. Apêndice A:
          Deficiências do Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch09.html#_pontos_fracos_do_sha1">Pontos fracos do
            SHA1</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_microsoft_windows">Microsoft
            Windows</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_arquivos_independentes">Arquivos
            Independentes</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_quem_est%C3%A1_editando_o_que">Quem Está
            Editando O Que?</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_arquivo_do_hist%C3%B3rico">Arquivo do
            Histórico</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_clone_inicial">Clone
            Inicial</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_projetos_vol%C3%A1teis">Projetos
            Voláteis</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_contador_global">Contador
            Global</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_subdiret%C3%B3rios_vazios">Subdiretórios
            Vazios</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_commit_inicial">Commit
            Inicial</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_peculiaridades_da_interface">Peculiaridades
            da Interface</a></span></li>
          </ul>
        </li>

        <li><span class="chapter"><a href="ch10.html">10. Apendice
        B: Traduzindo esse guia</a></span></li>
      </ul>
    </div>
<div class="content">
  <div class="chapter" title="Capítulo 4. Bruxarias com branch">
    <div class="titlepage">
      <div>
        <div>
          <h2 class="title"><a name=
          "_bruxarias_com_branch"></a>Capítulo 4. Bruxarias com
          branch</h2>
        </div>
      </div>
    </div>

    <p>Ramificações (Branch) e mesclagens (merge) instantâneos são
    as características mais fantásticas do Git.</p>

    <p><span class="strong"><strong>Problema</strong></span>:
    Fatores externos inevitavelmente exigem mudanças de contexto.
    Um erro grave que se manifesta sem aviso, em uma versão já
    liberada. O prazo final é diminuído. Um desenvolvedor que o
    ajuda, em uma função chave do seu projeto, precisa sair. Em
    todos esses casos, você deixará de lado bruscamente o que esta
    fazendo e focará em uma tarefa completamente diferente.</p>

    <p>Interromper sua linha de pensamento provavelmente
    prejudicará sua produtividade, e quanto mais trabalhoso for
    trocar de contexto, maior será a perda. Com um controle de
    versões centralizado precisamos pegar uma nova cópia do
    servidor central. Sistemas distribuídos fazem melhor, já que
    podemos clonar o que quisermos localmente.</p>

    <p>Mais clonar ainda implica copiar todo o diretório de
    trabalho, bem como todo o histórico até o ponto determinado.
    Mesmo que o Git reduza o custo disso com o compartilhamento de
    arquivos e hardlinks, os arquivos do projeto devem ser
    recriados completamente no novo diretório de trabalho.</p>

    <p><span class="strong"><strong>Solução</strong></span>: O Git
    tem a melhor ferramenta para estas situações que é muito mais
    rápida e mais eficiente no uso de espaço do que a clonagem:
    <span class="strong"><strong>git branch</strong></span>.</p>

    <p>Com esta palavra mágica, os arquivos em seu diretório de
    repente mudam de forma, de uma versão para outra. Esta
    transformação pode fazer mais do que apenas avançar ou
    retroceder no histórico. Seus arquivos podem mudar a partir da
    última liberação para a versão experimental, para a versão
    atualmente em desenvolvimento, ou para a versão dos seus
    amigos, etc.</p>

    <div class="section" title="A “tecla” chefe">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name="_a_tecla_chefe"></a>A
            “tecla” chefe</h2>
          </div>
        </div>
      </div>

      <p>Sempre joguei um desses jogos que ao apertar de um botão
      (“a tecla chefe”), a tela instantaneamente mudará para uma
      planilha ou algo mais sério. Assim se o chefe passar pelo seu
      escritório enquanto você estiver jogando, poderá rapidamente
      esconder o jogo.</p>

      <p>Em algum diretório:</p>
      <pre class="literallayout">
$ echo "I'm smarter than my boss" &gt; myfile.txt
$ git init
$ git add .
$ git commit -m "Initial commit"
</pre>

      <p>Criamos um repositório Git que rastreará um arquivo texto
      contendo uma certa mensagem. Agora digite:</p>
      <pre class="literallayout">
$ git checkout -b boss  # nothing seems to change after this
$ echo "My boss is smarter than me" &gt; myfile.txt
$ git commit -a -m "Another commit"
</pre>

      <p>ficou parecendo que nós sobrescrevemos nosso arquivo e
      fizemos um commit. Mas isto é um ilusão. Digite:</p>
      <pre class="literallayout">
$ git checkout master  # switch to original version of the file
</pre>

      <p>e tcham tcham tcham! O arquivo texto foi restaurado. E se
      o chefe decidir bisbilhotar este diretório. Digite:</p>
      <pre class="literallayout">
$ git checkout boss  # switch to version suitable for boss' eyes
</pre>

      <p>Você pode trocar entre as duas versões do arquivo quantas
      vezes quiser, e fazer commit independentes para cada uma.</p>
    </div>

    <div class="section" title="Trabalho porco">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_trabalho_porco"></a>Trabalho porco</h2>
          </div>
        </div>
      </div>

      <p><a name="branch" id="branch"></a>Digamos que você está
      trabalhando em alguma função, e por alguma razão, precisa
      voltar 3 versões, e temporariamente colocar algumas
      declarações de controle para ver como algo funciona.
      Então:</p>
      <pre class="literallayout">
$ git commit -a
$ git checkout HEAD~3
</pre>

      <p>Agora você pode adicionar temporariamente código feio em
      qualquer lugar. Pode até fazer commit destas mudanças. Quando
      estiver tudo pronto,</p>
      <pre class="literallayout">
$ git checkout master
</pre>

      <p>para voltar para o trabalho original. Observe que qualquer
      mudança sem commit são temporárias.</p>

      <p>E se você desejasse salvar as mudanças temporárias depois
      de tudo? Fácil:</p>
      <pre class="literallayout">
$ git checkout -b dirty
</pre>

      <p>e faça commit antes de voltar ao branch master. Sempre que
      quiser voltar à sujeira, simplesmente digite:</p>
      <pre class="literallayout">
$ git checkout dirty
</pre>

      <p>Nós já falamos deste comando num capítulo anterior, quando
      discutimos carregamento de estados antigos salvos. Finalmente
      podemos contar toda a história: os arquivos mudam para o
      estado requisitado, porém saímos do branch master. Cada
      commit realizado a partir deste ponto nos seus arquivos o
      levarão em outra direção, que nomearemos mais adiante.</p>

      <p>Em outra palavras, depois de fazer checkout em um estado
      antigo, o Git automaticamente o colocará em um novo branch
      não identificado, que pode ser identificado e salvo com
      <span class="strong"><strong>git checkout
      -b</strong></span>.</p>
    </div>

    <div class="section" title="Correções rápidas">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_corre%C3%A7%C3%B5es_r%C3%A1pidas"></a>Correções
            rápidas</h2>
          </div>
        </div>
      </div>

      <p>Você está fazendo algo quando mandam largar o que quer que
      seja e corrigir um erro recém-descoberto no commit
      <code class="literal">1b6d...</code>:</p>
      <pre class="literallayout">
$ git commit -a
$ git checkout -b fixes 1b6d
</pre>

      <p>Então assim que tiver corrigido o erro:</p>
      <pre class="literallayout">
$ git commit -a -m "Bug fixed"
$ git checkout master
</pre>

      <p>e volte a trabalhar no que estava fazendo anteriormente.
      Você pode até fazer um merge na correção realizada:</p>
      <pre class="literallayout">
$ git merge fixes
</pre>
    </div>

    <div class="section" title="Merging">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name="_merging"></a>Merging</h2>
          </div>
        </div>
      </div>

      <p>Com alguns sistemas de controle de versões, a criação de
      ramos (branching) é fácil mas realizar o merge de volta é
      dificil. Com o Git, o merge é tão trivial que você pode nem
      perceber que ele acontece.</p>

      <p>Nós, na realidade encontramos o merge há bastante tempo. O
      comando <span class="strong"><strong>pull</strong></span> na
      realidade <span class="emphasis"><em>busca</em></span>
      (<span class="emphasis"><em>fetches</em></span>) um commit e
      faz um merge no ramo (branch) atual. Se você não tem nenhuma
      alteração local, então ele faz um merge rápido, que é um caso
      especial parecido a buscar a ultima versão em um sistema de
      controle de versões centralizado. Mas se você tem mudanças
      locais, o Git irá automaticamente fazer o merge, e reportar
      qualquer conflito.</p>

      <p>Comumente, um commit possui exatamente um <span class=
      "emphasis"><em>commit pai</em></span>, que recebe o nome de
      commit anterior. Fazer o merge de ramos (branches) juntos
      produz um commit com no mínimo dois pais. Isso levanta a
      questão: a que commit <code class="literal">HEAD~10</code>
      estamos nos referindo? Um commit pode ter vários pais, e qual
      deles vamos seguir?</p>

      <p>Acontece que essa notação escolhe o primeiro pai a cada
      vez. Isso é o desejável porque o ramo atual se torna o
      primeiro pai durante o merge; frequentemente você estará
      preocupado com as alterações que realizou no ramo atual, em
      oposição às alterações merged de outros ramos.</p>

      <p>Podemos referenciar um pai especifico com um circunflexo.
      Por exemplo, para mostrar os logs do segundo pai:</p>
      <pre class="literallayout">
$ git log HEAD^2
</pre>

      <p>Podemos omitir o número para o primeiro pai. Por exemplo,
      para mostrar as diferenças com o primeiro pai:</p>
      <pre class="literallayout">
$ git diff HEAD^
</pre>

      <p>Podemos combinar essa notação com outras. Por exemplo:</p>
      <pre class="literallayout">
$ git checkout 1b6d^^2~10 -b ancient
</pre>

      <p>inicia um novo ramo “ancient” representando o estado 10
      commit atrás para o segundo pai do primeiro pai do commit
      iniciando com 1b6d.</p>
    </div>

    <div class="section" title="Fluxo ininterrupto">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_fluxo_ininterrupto"></a>Fluxo ininterrupto</h2>
          </div>
        </div>
      </div>

      <p>Frequentemente em projetos de hardware, o segundo passo de
      um plano deve esperar que o primeiro passo termine. Um carro
      que esta esperando uma peça do fabricante deve permanecer na
      oficina até que a peça chegue. Um protótipo deve esperar até
      que o chip seja fabricado para que a montagem possa
      continuar.</p>

      <p>Os projetos de software pode ser semelhantes a isso. A
      segunda parte de uma nova função pode ter que esperar até que
      a primeira parte seja testada e liberada. Alguns projetos
      requerem que o código seja revisto antes de seu aceite, de
      modo que você deve esperar até que a primeira parte seja
      aprovada antes de iniciar a segunda parte.</p>

      <p>Graças à facilidade de realizar branch e merge, podemos
      “desviar” das regras e trabalhar na parte 2 antes da parte 1
      estar oficialmente pronta. Suponha que fizemos o commit da
      parte 1 e enviamos para a revisão. Vamos dizer que estamos no
      ramo (branch) <code class="literal">master</code>. Então
      podemos ramificar:</p>
      <pre class="literallayout">
$ git checkout -b part2
</pre>

      <p>Em seguida, trabalhamos na parte 2, fazendo commit das
      alterações durante o desenvolvimento. Mas errar é humano, e
      frequentemente você vai querer retornar e corrigir alguma
      coisa na parte 1. Se você estiver com sorte, ou for realmente
      bom, pode saltar esses comandos:</p>
      <pre class="literallayout">
$ git checkout master  # Go back to Part I.
$ fix_problem
$ git commit -a        # Commit the fixes.
$ git checkout part2   # Go back to Part II.
$ git merge master     # Merge in those fixes.
</pre>

      <p>Eventualmente, quando a parte 1 for aprovada:</p>
      <pre class="literallayout">
$ git checkout master  # Go back to Part I.
$ submit files         # Release to the world!
$ git merge part2      # Merge in Part II.
$ git branch -d part2  # Delete "part2" branch.
</pre>

      <p>Agora, você estará no ramo <code class=
      "literal">master</code> novamente, com a parte 2 no diretório
      de trabalho.</p>

      <p>É fácil de estender esse truque para qualquer número de
      partes. É fácil também fazer branching retroativos: suponha
      que você percebeu tardiamente que deveria ter criado um
      branch 7 commits atrás. Então digite:</p>
      <pre class="literallayout">
$ git branch -m master part2  # Rename "master" branch to "part2".
$ git branch master HEAD~7    # Create new "master", 7 commits upstream.
</pre>

      <p>O branch <code class="literal">master</code> agora contém
      somente a parte 1, e o branch <code class=
      "literal">part2</code> contém todo o resto. Estamos no ultimo
      branch; criamos o <code class="literal">master</code> sem
      mudar para ele, porque queremos continuar a trabalhar na
      <code class="literal">part2</code>. Isso não é comum. Até
      agora, nós trocamos de ramos imediatamente após a sua
      criação, como em:</p>
      <pre class="literallayout">
$ git checkout HEAD~7 -b master  # Create a branch, and switch to it.
</pre>
    </div>

    <div class="section" title="Reorganizando uma Bagunça">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_reorganizando_uma_bagun%C3%A7a"></a>Reorganizando uma
            Bagunça</h2>
          </div>
        </div>
      </div>

      <p>Talvez você goste de trabalhar com todos os aspectos de um
      projeto num mesmo branch. E gostaria de manter seu trabalho
      para você mesmo e que os outros só vejam seus commit, apenas
      quando eles estiverem organizados. Inicie um par de
      branch:</p>
      <pre class="literallayout">
$ git branch sanitized    # Create a branch for sanitized commits.
$ git checkout -b medley  # Create and switch to a branch to work in.
</pre>

      <p>A seguir, trabalhe em alguma coisa: corrigindo erros,
      adicionando funções, adicionando código temporário, e assim
      por diante, faça commit muitas vezes ao longo do caminho.
      Então:</p>
      <pre class="literallayout">
$ git checkout sanitized
$ git cherry-pick medley^^
</pre>

      <p>aplique o comit avô ao commit HEAD do ramo “medley” para o
      ramo “sanitized”. Com os cherry-picks apropriados você pode
      construir um branch que contêm apenas código permanente, e
      tem os commit relacionados agrupados juntos.</p>
    </div>

    <div class="section" title="Gerenciando os Branches">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_gerenciando_os_branches"></a>Gerenciando os
            Branches</h2>
          </div>
        </div>
      </div>

      <p>Para listar todos os branch, digite:</p>
      <pre class="literallayout">
$ git branch
</pre>

      <p>Por default, você deve iniciar em um branch chamado
      “master”. Alguns defendem que o branch “master” deve
      permanecer intocado e que a seja criado novos branchs para
      suas próprias mudanças.</p>

      <p>As opções <span class="strong"><strong>-d</strong></span>
      e <span class="strong"><strong>-m</strong></span> permitem a
      você deletar ou mover (renomear) um branch. Veja <span class=
      "strong"><strong>git help branch</strong></span>.</p>

      <p>O branch “master” é uma personalização útil. Outros podem
      assumir que seu repositório possui um branch com esse nome e
      que ele contém a versão oficial de seu projeto. Embora
      possamos renomear ou apagar o branch “master”, você deve
      procurar respeitar essa convenção.</p>
    </div>

    <div class="section" title="Branches Temporários">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_branches_tempor%C3%A1rios"></a>Branches
            Temporários</h2>
          </div>
        </div>
      </div>

      <p>Depois de um tempo você perceberá que está criando um
      branch de curta duração, frequentemente e por motivos
      parecidos: cada novo branch serve apenas para guardar o
      estado atual, assim você pode rapidamente voltar para estados
      antigos para corrigir um erro ou algo assim.</p>

      <p>É semelhante a mudar o canal da TV temporariamente para
      ver o que está passando nos outros canais. Mas, ao invés de
      apertar dois botões, você está criando, checando e apagando
      branchs temporários e seus commit. Felizmente, o Git tem um
      atalho que é tão conveniente como um controle remoto de
      TV:</p>
      <pre class="literallayout">
$ git stash
</pre>

      <p>Isto salva o estado atual num local temporário (um
      <span class="emphasis"><em>stash</em></span>) e restaura o
      estado anterior. Seu diretório de trabalho parece ter voltado
      ao estado anteriormente salvo, e você pode corrigir erros,
      puxar as mudanças mais novas, e assim por diante. Quando
      quiser retornar ao estado anterior ao uso do stash,
      digite:</p>
      <pre class="literallayout">
$ git stash apply  # You may need to resolve some conflicts.
</pre>

      <p>Você pode ter múltiplos stash, e manipulá-los de várias
      formas. Veja <span class="strong"><strong>git help
      stash</strong></span>. Como deve ter adivinhado, o Git usa
      branch por traz dos panos para fazer este truque.</p>
    </div>

    <div class="section" title="Trabalhe como quiser">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_trabalhe_como_quiser"></a>Trabalhe como quiser</h2>
          </div>
        </div>
      </div>

      <p>Você pode se perguntar se os ramos valem a pena. Afinal,
      os clones são quase tão rápidos e você pode trocar entre eles
      com um comando cd ao invés de um comando esotérico do
      Git.</p>

      <p>Considere um navegador web. Por que suportar abas
      múltiplas bem como janelas múltiplas? É porque ao permitir
      ambas as características podemos acomodar uma variedade de
      estilos. Alguns usuários gostam de manter somente uma janela
      aberta do navegador, e utilizar varias abas para as páginas
      web. Outros preferem o outro extremo, várias janelas sem
      nenhuma aba. Outros podem preferir uma mistura dos
      estilos.</p>

      <p>Branching é como as abas para seu diretório de trabalho, e
      o clone é como uma nova janela do navegador. Essas operações
      são rápidas e locais, de modo que por que não experimentar
      para encontrar a combinação que melhor se adequa a você? O
      Git permite que você trabalhe exatamente do jeito que você
      desejar.</p>
    </div>
  </div><script type="text/javascript" src="find_selflink.js">
</script><script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1901330-2");
  pageTracker._initData();
  pageTracker._trackPageview();
  </script>
</div>
</div><div class="footer"><a href="/~blynn/">Ben Lynn</a></div>
</body>
</html>

