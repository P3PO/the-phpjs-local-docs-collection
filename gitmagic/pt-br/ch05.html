
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux (vers 25 March 2009), see www.w3.org">
  <meta http-equiv="Content-Type" content=
  "text/html; charset=utf-8">

  <title>Git Magic - Capítulo 5. Lições de historia</title>
  <link rel="stylesheet" type="text/css" href="default.css">
  <meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
  <link rel="home" href="index.html" title="Magia Git">
  <link rel="up" href="index.html" title="Magia Git">
  <link rel="prev" href="ch04.html" title=
  "Capítulo 4. Bruxarias com branch">
  <link rel="next" href="ch06.html" title=
  "Capítulo 6. Git Multiplayer">
</head>

<body bgcolor="white" text="black" link="#0000FF" vlink="#840084"
alink="#0000FF">
    <div class="toc">
      <ul>
<li><b>Git Magic</b></li>
        <li>
          <span class="preface"><a href=
          "index.html">Prefácio</a></span>

          <ul>
            <li><span class="section"><a href=
            "index.html#_agradecimentos">Agradecimentos!</a></span></li>

            <li><span class="section"><a href=
            "index.html#_licen%C3%A7a">Licença</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch01.html">1.
          Introdução</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch01.html#_trabalhar_%C3%A9_divertido">Trabalhar é
            Divertido</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_controle_de_vers%C3%B5es">Controle de
            Versões</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_controle_distribu%C3%ADdo">Controle
            distribuído</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_uma_supersti%C3%A7%C3%A3o">Uma
            superstição</a></span></li>

            <li><span class="section"><a href=
            "ch01.html#_conflitos_de_mesclagem_merge">Conflitos de
            mesclagem (Merge)</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch02.html">2. Truques
          básicos</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch02.html#_salvando_estados">Salvando
            estados</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_adicionar_remover_renomear">Adicionar,
            Remover, Renomear</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_desfazer_refazer_avan%C3%A7ado">Desfazer/Refazer
            avançado</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_revertendo">Revertendo</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_gera%C3%A7%C3%A3o_do_changelog">Geração do
            Changelog</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_download_de_arquivos">Download de
            arquivos</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_a_%C3%BAltima_vers%C3%A3o">A Última
            Versão</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_publica%C3%A7%C3%A3o_instant%C3%A2nea">Publicação
            instantânea</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_o_que_eu_fiz">O que eu fiz?</a></span></li>

            <li><span class="section"><a href=
            "ch02.html#_exerc%C3%ADcios">Exercícios</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch03.html">3. Um pouco de
          clonagem</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch03.html#_sincronizando_computadores">Sincronizando
            Computadores</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_controle_cl%C3%A1ssico_de_c%C3%B3digo">Controle
            clássico de código</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_codigo_fonte_secreto">Codigo-fonte
            secreto</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_repositorios_vazios">Repositorios
            Vazios</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_push_versus_pull">Push versus
            Pull</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_fazendo_um_fork_do_projeto">Fazendo um Fork
            do Projeto</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_backup_supremos">Backup
            Supremos</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_multitarefa_na_velocidade_da_luz">Multitarefa
            na velocidade da luz</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_controle_de_vers%C3%B5es_de_guerrilha">Controle
            de Versões de Guerrilha</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_mercurial">Mercurial</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_bazaar">Bazaar</a></span></li>

            <li><span class="section"><a href=
            "ch03.html#_por_que_uso_o_git">Por que uso o
            Git?</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch04.html">4. Bruxarias
          com branch</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch04.html#_a_tecla_chefe">A “tecla”
            chefe</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_trabalho_porco">Trabalho
            porco</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_corre%C3%A7%C3%B5es_r%C3%A1pidas">Correções
            rápidas</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_merging">Merging</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_fluxo_ininterrupto">Fluxo
            ininterrupto</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_reorganizando_uma_bagun%C3%A7a">Reorganizando
            uma Bagunça</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_gerenciando_os_branches">Gerenciando os
            Branches</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_branches_tempor%C3%A1rios">Branches
            Temporários</a></span></li>

            <li><span class="section"><a href=
            "ch04.html#_trabalhe_como_quiser">Trabalhe como
            quiser</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch05.html">5. Lições de
          historia</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch05.html#_eu_corrijo">Eu corrijo</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_8230_e_tem_mais">… e tem
            mais</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_altera%C3%A7%C3%B5es_locais_por_%C3%BAltimo">
            Alterações locais por último</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_reescrevendo_o_hist%C3%B3rico">Reescrevendo
            o histórico</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_fazendo_hist%C3%B3ria">Fazendo
            história</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_onde_foi_que_tudo_deu_errado">Onde foi que
            tudo deu errado?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_quem_fez_tudo_dar_errado">Quem fez tudo dar
            errado?</a></span></li>

            <li><span class="section"><a href=
            "ch05.html#_experi%C3%AAncia_pessoal">Experiência
            pessoal</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch06.html">6. Git
          Multiplayer</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch06.html#_quem_sou_eu">Quem sou eu?</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_sob_ssh_http">Git sob SSH,
            HTTP</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_git_sobre_qualquer_coisa">Git sobre
            qualquer coisa</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_patches_a_moeda_universal">Patches: A moeda
            Universal</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_sinto_muito_mas_mudamos">Sinto muito, mas
            mudamos</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_branches_remotos">Branches
            Remotos</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_remotos_m%C3%BAltiplos">Remotos
            Múltiplos</a></span></li>

            <li><span class="section"><a href=
            "ch06.html#_minhas_preferencias">Minhas
            preferencias</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch07.html">7. Grão-Mestre
          Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch07.html#_disponibiliza%C3%A7%C3%A3o_de_c%C3%B3digo">Disponibilização
            de Código</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_commit_do_que_mudou">Commit do que
            Mudou</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_meu_commit_%C3%A9_muito_grande">Meu Commit
            é muito Grande!</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_o_indice_a_%C3%A1rea_de_atua%C3%A7%C3%A3o_do_git">
            O Indice: A Área de Atuação do Git</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_n%C3%A3o_perca_a_cabe%C3%A7a_head">Não
            perca a CABEÇA (HEAD)</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_explorando_o_head">Explorando o
            HEAD</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_baseando_se_no_git">Baseando se no
            Git</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_manobras_radicais">Manobras
            Radicais</a></span></li>

            <li><span class="section"><a href=
            "ch07.html#_preven%C3%A7%C3%A3o_a_maus_commits">Prevenção
            a maus Commits</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch08.html">8. Segredos
          Revelados</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch08.html#_invisibilidade">Invisibilidade</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_integridade">Integridade</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_intelig%C3%AAncia">Inteligência</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_indexando">Indexando</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_origem_do_git">Origem do
            Git</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_o_banco_de_dados_de_objetos">O Banco de
            Dados de Objetos</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_blobs">Blobs</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_%C3%A1rvores">Árvores</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_commits">Commits</a></span></li>

            <li><span class="section"><a href=
            "ch08.html#_indistingu%C3%ADvel_da_magia">Indistinguível
            da Magia</a></span></li>
          </ul>
        </li>

        <li>
          <span class="chapter"><a href="ch09.html">9. Apêndice A:
          Deficiências do Git</a></span>

          <ul>
            <li><span class="section"><a href=
            "ch09.html#_pontos_fracos_do_sha1">Pontos fracos do
            SHA1</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_microsoft_windows">Microsoft
            Windows</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_arquivos_independentes">Arquivos
            Independentes</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_quem_est%C3%A1_editando_o_que">Quem Está
            Editando O Que?</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_arquivo_do_hist%C3%B3rico">Arquivo do
            Histórico</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_clone_inicial">Clone
            Inicial</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_projetos_vol%C3%A1teis">Projetos
            Voláteis</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_contador_global">Contador
            Global</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_subdiret%C3%B3rios_vazios">Subdiretórios
            Vazios</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_commit_inicial">Commit
            Inicial</a></span></li>

            <li><span class="section"><a href=
            "ch09.html#_peculiaridades_da_interface">Peculiaridades
            da Interface</a></span></li>
          </ul>
        </li>

        <li><span class="chapter"><a href="ch10.html">10. Apendice
        B: Traduzindo esse guia</a></span></li>
      </ul>
    </div>
<div class="content">
  <div class="chapter" title="Capítulo 5. Lições de historia">
    <div class="titlepage">
      <div>
        <div>
          <h2 class="title"><a name=
          "_li%C3%A7%C3%B5es_de_historia"></a>Capítulo 5. Lições de
          historia</h2>
        </div>
      </div>
    </div>

    <p>Uma consequência da natureza distribuída do Git é que o
    histórico pode ser editado facilmente. Mas se você adulterar o
    passado, tenha cuidado: apenas rescreva a parte do histórico
    que só você possui. Assim como as nações sempre argumentam
    sobre quem comete atrocidades, se alguém tiver um clone cuja
    versão do histórico seja diferente do seu, você pode ter
    problemas para conciliar suas árvores quando interagirem.</p>

    <p>Alguns desenvolvedores acreditam que o histórico deva ser
    imutável, com falhas ou não. Outros, acreditam que suas árvores
    devem estar apresentáveis antes de liberá-las ao público. O Git
    contempla ambos pontos de vista. Tal como a clonagem, branch e
    merge, rescrever o histórico é simplesmente outro poder que o
    Git lhe concede. Cabe a você a usá-lo sabiamente.</p>

    <div class="section" title="Eu corrijo">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name="_eu_corrijo"></a>Eu
            corrijo</h2>
          </div>
        </div>
      </div>

      <p>Acabou de fazer um commit, mas queria ter escrito uma
      mensagem diferente? Então execute:</p>
      <pre class="literallayout">
$ git commit --amend
</pre>

      <p>para mudar a última mensagem. Percebeu que esqueceu de
      adicionar um arquivo? Execute <span class=
      "strong"><strong>git add</strong></span> para adicioná-lo, e
      então execute o comando acima.</p>

      <p>Quer incluir mais algumas modificações no último commit?
      Faça-as e então execute:</p>
      <pre class="literallayout">
$ git commit --amend -a
</pre>
    </div>

    <div class="section" title="… e tem mais">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name="_8230_e_tem_mais"></a>… e
            tem mais</h2>
          </div>
        </div>
      </div>

      <p>Suponha que o problema anterior é dez vezes pior. Após uma
      longa sessão onde você fez um monte de commit. E você não
      está muito satisfeito com a organização deles, e algumas das
      mensagens dos commit poderiam ser reformuladas. Então
      execute:</p>
      <pre class="literallayout">
$ git rebase -i HEAD~10
</pre>

      <p>e os últimos 10 commit aparecerão em seu $EDITOR favorito.
      Trecho de exemplo:</p>
      <pre class="literallayout">
pick 5c6eb73 Added repo.or.cz link
pick a311a64 Reordered analogies in "Work How You Want"
pick 100834f Added push target to Makefile
</pre>

      <p>Os commit antigos precedem os mais novos nessa lista,
      diferentemente do comando <code class="literal">log</code>.
      Aqui, 5c6eb73 é o commit mais velho e o 100834f é o commit
      mais novo. Então:</p>

      <div class="itemizedlist">
        <ul class="itemizedlist">
          <li class="listitem">Remova os commit deletando as
          linhas. Como o comando revert, mas sem fazer o registro:
          será como se o commit nunca tenha existido.</li>

          <li class="listitem">Reorganize os commit reorganizando
          as linhas.</li>

          <li class="listitem">
            <p class="simpara">Substitua <code class=
            "literal">pick</code> com:</p>

            <div class="itemizedlist">
              <ul class="itemizedlist">
                <li class="listitem"><code class=
                "literal">edit</code> para modificar a mensagem do
                commit;</li>

                <li class="listitem"><code class=
                "literal">reword</code> para alterar a mensagem de
                log;</li>

                <li class="listitem"><code class=
                "literal">squash</code> para fazer o merge de um
                commit com o commit anterior;</li>

                <li class="listitem"><code class=
                "literal">fixup</code> para fazer o merge de um
                commit com o anterior e descartar a mensagem de
                log.</li>
              </ul>
            </div>
          </li>
        </ul>
      </div>

      <p>Por exemplo, queremos substituir o segundo <code class=
      "literal">pick</code> por <code class=
      "literal">squash</code>:</p>
      <pre class="literallayout">
pick 5c6eb73 Added repo.or.cz link
squash a311a64 Reordered analogies in "Work How You Want"
pick 100834f Added push target to Makefile
</pre>

      <p>Após salvar e sair, o Git ira fazer o merge a311a64 com o
      5c6eb73. Assim <span class=
      "strong"><strong>squash</strong></span> faz o merge no
      próximo commit: pense como “squash up”.</p>

      <p>O Git, então combina suas mensagens de logs e apresenta
      para edição. O comando <span class=
      "strong"><strong>fixup</strong></span> salta essa etapa; a
      mensagem de log squashed é simplesmente descartada.</p>

      <p>Se marcar um commit com <span class=
      "strong"><strong>edit</strong></span>, o Git retorna você ao
      passado, ao commit mais velho. Você pode emendar o commit
      velho como descrito na seção anterior, e até mesmo criar um
      novo commit que pertença a esse. Uma vez que esteja
      satisfeito com o “retcon”, siga adiante executando:</p>
      <pre class="literallayout">
$ git rebase --continue
</pre>

      <p>O Git reenvia os commits até o próximo <span class=
      "strong"><strong>edit</strong></span>, ou ao presente se não
      restar nenhum.</p>

      <p>Você pode também, abandonar o rebase com:</p>
      <pre class="literallayout">
$ git rebase --abort
</pre>

      <p>Portanto, faça commit cedo e com frequência: e arrume tudo
      facilmente mais tarde com um rebase.</p>
    </div>

    <div class="section" title="Alterações locais por último">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_altera%C3%A7%C3%B5es_locais_por_%C3%BAltimo"></a>Alterações
            locais por último</h2>
          </div>
        </div>
      </div>

      <p>Você está trabalhando em um projeto ativo. Faz alguns
      commit locais ao longo do tempo, e sincroniza com a árvore
      oficial com merge. Este ciclo se repete algumas vezes até
      estar tudo pronto para ser enviado à árvore central.</p>

      <p>Mas agora o histórico no seu clone local está uma confusão
      com o emaranhado de modificações locais e oficiais. Você
      gostaria de ver todas as suas modificações em uma seção
      contínua e depois todas as modificações oficiais.</p>

      <p>Este é um trabalho para <span class="strong"><strong>git
      rebase</strong></span> conforme descrito acima. Em muitos
      casos pode-se usar a opção <span class=
      "strong"><strong>--onto</strong></span> e evitar sua
      interação.</p>

      <p>Veja também <span class="strong"><strong>git help
      rebase</strong></span> com exemplos detalhados deste incrível
      comando. Você pode dividir commit. Ou até reorganizar branch
      de uma árvore.</p>

      <p>Tome cuidado: o comando rebase é muito poderoso. Para
      rebases complicados, primeiro faça um backup com <span class=
      "strong"><strong>git clone</strong></span>.</p>
    </div>

    <div class="section" title="Reescrevendo o histórico">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_reescrevendo_o_hist%C3%B3rico"></a>Reescrevendo o
            histórico</h2>
          </div>
        </div>
      </div>

      <p>Eventualmente, será necessário que seu controle de código
      tenha algo equivalente ao modo Stanlinesco de retirada de
      pessoas das fotos oficiais, apagando-os da história. Por
      exemplo, suponha que temos a intenção de lançar um projeto,
      mas este envolve um arquivo que deve ser mantido privado por
      algum motivo. Talvez eu deixe meu número do cartão de crédito
      num arquivo texto e acidentalmente adicione-o ao projeto.
      Apagá-lo é insuficiente, pois, pode ser acessado pelos commit
      anteriores. Temos que remover o arquivo de todos os
      commit:</p>
      <pre class="literallayout">
$ git filter-branch --tree-filter 'rm top/secret/file' HEAD
</pre>

      <p>Veja <span class="strong"><strong>git help
      filter-branch</strong></span>, que discute este exemplo e
      mostra um método mais rápido. No geral, <span class=
      "strong"><strong>filter-branch</strong></span> permite que
      você altere grandes seções do histórico só com um
      comando.</p>

      <p>Depois, o diretório <code class=
      "literal">.git/refs/original</code> descreve o estado dos
      casos antes da operação. Verifique se o comando filter-branch
      faz o que você deseja, e então apague esse diretório se você
      deseja executar mais comandos filter-branch.</p>

      <p>Por ultimo, você deve substituir os clones do seu projeto
      pela versão revisada se desejar interagir com eles
      depois.</p>
    </div>

    <div class="section" title="Fazendo história">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_fazendo_hist%C3%B3ria"></a>Fazendo história</h2>
          </div>
        </div>
      </div>

      <p><a name="makinghistory" id="makinghistory"></a>Quer migrar
      um projeto para Git? Se ele for gerenciado por um algum dos
      sistemas mais conhecidos, então é possível que alguém já
      tenha escrito um script para exportar todo o histórico para o
      Git.</p>

      <p>Caso contrário, dê uma olhada em <span class=
      "strong"><strong>git fast-import</strong></span>, que lê um
      texto num formato especifico para criar o histórico Git do
      zero. Normalmente um script usando este comando é feito as
      pressas sem muita frescura e é executado apenas uma vez,
      migrando o projeto de uma só vez.</p>

      <p>Por exemplo, cole a listagem a seguir num arquivo
      temporário, como <code class=
      "literal">/tmp/history</code>:</p>
      <pre class="screen">
commit refs/heads/master
committer Alice &lt;alice@example.com&gt; Thu, 01 Jan 1970 00:00:00 +0000
data &lt;&lt;EOT
Initial commit.
EOT

M 100644 inline hello.c
data &lt;&lt;EOT
#include &lt;stdio.h&gt;

int main() {
  printf("Hello, world!\n");
  return 0;
}
EOT


commit refs/heads/master
committer Bob &lt;bob@example.com&gt; Tue, 14 Mar 2000 01:59:26 -0800
data &lt;&lt;EOT
Replace printf() with write().
EOT

M 100644 inline hello.c
data &lt;&lt;EOT
#include &lt;unistd.h&gt;

int main() {
  write(1, "Hello, world!\n", 14);
  return 0;
}
EOT
</pre>

      <p>Em seguida crie um repositório Git a partir deste arquivo
      temporário digitando:</p>
      <pre class="literallayout">
$ mkdir project; cd project; git init
$ git fast-import --date-format=rfc2822 &lt; /tmp/history
</pre>

      <p>Faça um checkout da última versão do projeto com:</p>
      <pre class="literallayout">
$ git checkout master .
</pre>

      <p>O comando <span class="strong"><strong>git
      fast-export</strong></span> converte qualquer repositório
      para o formato do <span class="strong"><strong>git
      fast-import</strong></span> format, cujo resultado você pode
      estudar para escrever seus exportadores, e também para
      converter repositórios Git para um formato legível aos
      humanos. Na verdade, estes comandos podem enviar repositórios
      de arquivos de texto por canais exclusivamente textuais.</p>
    </div>

    <div class="section" title="Onde foi que tudo deu errado?">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_onde_foi_que_tudo_deu_errado"></a>Onde foi que tudo
            deu errado?</h2>
          </div>
        </div>
      </div>

      <p>Você acabou de descobrir uma função errada em seu
      programa, que você sabe com certeza que estava funcionando há
      alguns meses atrás. Merda! Onde será que este erro começou?
      Se só você estivesse testando a funcionalidade que
      desenvolveu.</p>

      <p>Agora é tarde para reclamar. No entanto, se você estiver
      fazendo commit, o Git pode localizar o problema:</p>
      <pre class="literallayout">
$ git bisect start
$ git bisect bad HEAD
$ git bisect good 1b6d
</pre>

      <p>O Git verifica um estado intermediário entre as duas
      versões. Testa a função, e se ainda estiver errada:</p>
      <pre class="literallayout">
$ git bisect bad
</pre>

      <p>Senão, substitua "bad" por "good". O Git novamente o
      levará até um estado intermediário entre as versões definidas
      como good e bad, diminuindo as possibilidades. Após algumas
      iterações, esta busca binária o guiará até o commit onde
      começou o problema. Uma vez terminada sua investigação, volte
      ao estado original digitando:</p>
      <pre class="literallayout">
$ git bisect reset
</pre>

      <p>Ao invés de testar todas as mudanças manualmente,
      automatize a busca com:</p>
      <pre class="literallayout">
$ git bisect run my_script
</pre>

      <p>O Git usa o valor de retorno do comando utilizado,
      normalmente um único script, para decidir se uma mudança é
      good ou bad: o comando deve terminar retornando com o código
      0 se for good, 125 se a mudança for ignorável e qualquer
      coisa entre 1 e 127 se for bad. Um valor negativo abortará a
      bissecção.</p>

      <p>Podemos fazer muito mais: a página de ajuda explica como
      visualizar as bissecções, examinar ou reproduzir o log da
      bissecção, e eliminar mudanças reconhecidamente inocentes
      para acelerar a busca.</p>
    </div>

    <div class="section" title="Quem fez tudo dar errado?">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_quem_fez_tudo_dar_errado"></a>Quem fez tudo dar
            errado?</h2>
          </div>
        </div>
      </div>

      <p>Tal como outros sistema de controle de versões, o Git tem
      um comando blame (culpado):</p>
      <pre class="literallayout">
$ git blame bug.c
</pre>

      <p>que marca cada linha do arquivo mostrando quem o modificou
      por último e quando. Ao contrário de outros sistemas de
      controle de versões, esta operação ocorre offline, lendo
      apenas do disco local.</p>
    </div>

    <div class="section" title="Experiência pessoal">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title"><a name=
            "_experi%C3%AAncia_pessoal"></a>Experiência
            pessoal</h2>
          </div>
        </div>
      </div>

      <p>Em um sistema de controle de versões centralizado,
      modificações no histórico são operações difíceis, e
      disponíveis apenas para administradores. Clonagem, branch e
      merge são impossíveis sem uma rede de comunicação. Bem como
      as operações básicas: navegar no histórico ou fazer commit
      das mudanças. Em alguns sistemas, é exigido do usuário uma
      conexão via rede, apenas para visualizar suas próprias
      modificações ou abrir um arquivo para edição.</p>

      <p>Sistemas centralizados impedem o trabalho offline, e
      exigem um infraestrutura de rede mais cara, especialmente
      quando o número de desenvolvedores aumenta. Mais importante,
      todas a operações são mais lentas, até certo ponto,
      geralmente até o ponto onde os usuários evitam comandos mais
      avançados até serem absolutamente necessários. Em casos
      extremos, esta é a regra até para a maioria dos comandos
      básicos. Quando os usuários devem executar comandos lento, a
      produtividade sofre por causa de uma interrupção no fluxo de
      trabalho.</p>

      <p>Já experimentei este fenômeno na pele. O Git foi o
      primeiro sistema de controle de versões que usei. E
      rapidamente cresci acostumado a ele, tomando muitas de suas
      características como normais. Simplesmente assumi que os
      outros sistemas eram semelhante: escolher um sistema de
      controle de versões deveria ser igual a escolher um novo
      editor de texto ou navegador para internet.</p>

      <p>Fiquei chocado quando, posteriormente, fui forçado a usar
      um sistema centralizado. Uma conexão ruim com a Internet
      pouco importa com o Git, mas torna o desenvolvimento
      insuportável quando precisa ser tão confiável quanto o disco
      local. Além disso, me condicionava a evitar determinados
      comandos devido a latência envolvida, o que me impediu, em
      última instância, de continuar seguindo meu fluxo de
      trabalho.</p>

      <p>Quando executava um comando lento, a interrupção na minha
      linha de pensamento causava um enorme prejuízo. Enquanto
      espero a comunicação com o servidor concluir, faço algo para
      passar o tempo, como checar email ou escrever documentação.
      Na hora em que retorno a tarefa original, o comando já havia
      finalizado há muito tempo, e perco mais tempo lembrando o que
      estava fazendo. Os seres humanos são ruins com trocas de
      contexto.</p>

      <p>Houve também um interessante efeito da tragédia dos
      comuns: antecipando o congestionamento da rede, os indivíduos
      consomem mais banda que o necessário em varias operações numa
      tentativa de reduzir atrasos futuros. Os esforços combinados
      intensificam o congestionamento, encorajando os indivíduos a
      consumir cada vez mais banda da próxima vez para evitar os
      longos atrasos.</p>
    </div>
  </div><script type="text/javascript" src="find_selflink.js">
</script><script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
  document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script><script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1901330-2");
  pageTracker._initData();
  pageTracker._trackPageview();
  </script>
</div>
</div><div class="footer"><a href="/~blynn/">Ben Lynn</a></div>
</body>
</html>

