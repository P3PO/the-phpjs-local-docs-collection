
<!DOCTYPE html>

<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <title>Routing &mdash; phpDocumentor</title>

    <link rel="stylesheet" href="../../_static/default.css" type="text/css"/>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css"/>
    <!--<link rel="stylesheet" href="../../_static/configurationblock.css" type="text/css"/>-->

    <link href="../../_static/css/template.css" rel="stylesheet" media="all">
    <style>
        h1 {
            font-family: serif;
            margin-bottom: 15px;
            border-bottom: 1px solid #eee;
            color: #333;
        }
        h2:first-of-type {
            margin-top: 25px;
        }
        h2 {
            font-family: serif;
            color: #333;
            border: none;
            font-style: italic;
            margin-top: 15px;
        }
        .well table.docutils {
            width: 100%;
        }
    </style>

    <script src="../../_static/js/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="../../_static/js/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script>
    <script src="../../_static/js/bootstrap.js" type="text/javascript"></script>
    <script src="../../_static/js/prettify/prettify.min.js" type="text/javascript"></script>
    <script type="text/javascript">

        function equalHeight(group) {
            var tallest = 0;

            group.each(function() {
                var thisHeight = $(this).height();
                if(thisHeight > tallest) {
                    tallest = thisHeight;
                }
            });

            group.height(tallest);
        }

        $(document).ready(function() {
            $('.contents .row').each(function() {
                equalHeight(jQuery(this).find('.well'));
            });

            // remove the classes added by Sphinx; the container class is
            // used in Twitter bootstrap and this collides
            $('.container .container').removeClass('container');
        });
    </script>

    <link rel="shortcut icon" href="http://demo.phpdoc.org/Responsive/img/favicon.ico">
    <link rel="apple-touch-icon" href="http://demo.phpdoc.org/Responsive/img/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="http://demo.phpdoc.org/Responsive/img/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="http://demo.phpdoc.org/Responsive/img/apple-touch-icon-114x114.png">
        <link rel="top" title="phpDocumentor" href="../../index.html"/>
        <link rel="up" title="Specification" href="../specifications.html"/>
        <link rel="next" title="Research" href="../research.html"/>
        <link rel="prev" title="Extensions" href="extensions.html"/> 
</head>
<body>

<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>
            <a class="brand" href="/">phpDocumentor</a>

            <div class="nav-collapse">
                <ul class="nav">
                    <li class="dropdown">
                        <a href="#documentation" class="dropdown-toggle" data-toggle="dropdown"> Documentation<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="/docs/"><i class="icon-th"></i> phpDocumentor 2</a></li>
                            <li><a href="http://manual.phpdoc.org"><i class="icon-th"></i> phpDocumentor 1</a></li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#demo" class="dropdown-toggle" data-toggle="dropdown"> Demo<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="http://demo.phpdoc.org/Responsive/"><i class="icon-list-alt"></i> Responsive</a></li>
                        </ul>
                    </li>
                    <li><a href="/templates"><i class="icon-list-alt"></i> Templates</a></li>
                    <li><a href="/contact"><i class="icon-list-alt"></i> Contact</a></li>
                    <li><a href="/about"><i class="icon-list-alt"></i> About</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div class="go_to_top"><a href="#___" style="color: inherit">Back to top <i class="icon-upload icon-white"></i></a></div>
</div>
<div id="___" class="container">
    <noscript>
        <div class="alert alert-warning">
            Javascript is disabled; several features are only available if Javascript is enabled.
        </div>
    </noscript>

    <div class="row">
        <div class="span3">
        <h3><a href="../../index.html">Table Of Contents</a>
        </h3>
        <ul>
<li><a class="reference internal" href="#">Routing</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#goals">Goals</a></li>
</ul>
</li>
<li><a class="reference internal" href="#process">Process</a><ul>
<li><a class="reference internal" href="#in-a-template-file">In a template file</a></li>
<li><a class="reference internal" href="#in-the-template-definition">In the template definition</a></li>
<li><a class="reference internal" href="#example-scenario">Example scenario</a></li>
</ul>
</li>
<li><a class="reference internal" href="#components">Components</a></li>
<li><a class="reference internal" href="#defining-routers">Defining routers</a></li>
<li><a class="reference internal" href="#priorities">Priorities</a></li>
<li><a class="reference internal" href="#todo">TODO</a></li>
</ul>
</li>
</ul>

        <h4>Previous topic</h4>

        <p class="topless"><a href="extensions.html"
                              title="previous chapter">Extensions</a></p>
        <h4>Next topic</h4>

        <p class="topless"><a href="../research.html"
                              title="next chapter">Research</a></p>
        <div id="searchbox" style="display: none">
            <h3>Search</h3>

            <form class="search" action="../../search.html" method="get">
                <input type="text" name="q" size="18"/>
                <input type="submit" value="Go"/>
                <input type="hidden" name="check_keywords" value="yes"/>
                <input type="hidden" name="area" value="default"/>
            </form>
        </div>
        <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
        <div class="span9 contents">
            <div class="breadcrumb">
<div class="related">
    <h3>Navigation</h3>
    <ul>
        <li class="right" style="margin-right: 10px; margin-top: 6px;">
            <a href="../../genindex.html" title="General Index" accesskey="I">
                index
            </a>
        </li>
        <li class="right" style="margin-right: 10px; margin-top: 6px;">
            <a href="../research.html" title="Research" accesskey="N">
                next
            </a> |
        </li>
        <li class="right" style="margin-right: 10px; margin-top: 6px;">
            <a href="extensions.html" title="Extensions" accesskey="P">
                previous
            </a> |
        </li>
        <li>
            <a href="http://www.phpdoc.org">Homepage</a>  &raquo;
        </li>
        <li>
            <a href="../../index.html">Documentation</a>  &raquo;
        </li>
        <li>
            <a href="../../for-developers.html" >
                For developers
            </a>  &raquo;
        </li>
        <li>
            <a href="../specifications.html" accesskey="U">
                Specification
            </a>  &raquo;
        </li> 
    </ul>
</div>
            </div>

            
            <div class="well">
            

            
  <div class="section" id="routing">
<h1>Routing<a class="headerlink" href="#routing" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Template builders should have the freedom to choose any URL structure that they desire. As such phpDocumentor should
facilitate in a component that allows them to generate routes in templates for Structural Elements; as to be able
to link to other parts of the documentation.</p>
<div class="section" id="goals">
<h3>Goals<a class="headerlink" href="#goals" title="Permalink to this headline">¶</a></h3>
<p>The following goals have been defined as functional parameters to enable routing,</p>
<ol class="arabic simple">
<li>Map Structural Elements to a path relative to the destination location&#8217;s root, or a well-formed URL.</li>
<li>Map specific Structural Elements to different routes, based on their Fully Qualified Structural Element Name or parts
thereof.</li>
<li>Prevent documentation files from being generated, useful for included libraries.</li>
<li>Allow multiple routers to be applied.</li>
</ol>
<p>With these goals it is possible to allow for a fine-grained routing system where the user can decide to separate
namespaces into separate component directories, or even to link to external documentation by routing a name to an
external URL.</p>
</div>
</div>
<div class="section" id="process">
<h2>Process<a class="headerlink" href="#process" title="Permalink to this headline">¶</a></h2>
<p>The process of routing can be executed in two different locations:</p>
<ol class="arabic simple">
<li>In a template file.</li>
<li>For a transformation declaration in the template definition file.</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Routing support is provided by a writer, as such it is possible that this functionality is not available everywhere.
The documentation of a writer should indicate whether that writer supports the routing mechanism.</p>
</div>
<p>By using routes in both of the above locations will phpDocumentor know exactly where to generate files and how to link
individual parts of the documentation to other parts.</p>
<div class="section" id="in-a-template-file">
<h3>In a template file<a class="headerlink" href="#in-a-template-file" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">A signal in a template indicates the use of a route; for twig that will be a filter called <tt class="docutils literal"><span class="pre">route</span></tt>.</p>
</li>
<li><p class="first">All declared routers will be called in sequence of priority with the value of the given <em>node</em>.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">this may be an object or string</p>
</div>
</li>
<li><p class="first">the first router will try to find a <em>match</em> for the given <em>node</em>.</p>
</li>
<li><p class="first">if not found, go to the next router.</p>
</li>
<li><p class="first">if a <em>match</em> is found with a specific <em>route</em> in the router then <em>generate</em> a url according to the
<em>scheme</em> that is associated with that <em>route</em>.</p>
</li>
<li><p class="first">The generated URL is returned and a link is created pointing to that URL</p>
</li>
</ol>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Every writer may have their own mechanism for calling custom pieces of code. Please consult the
documentation of your desired writer to learn how to apply routes.</p>
</div>
</div>
<div class="section" id="in-the-template-definition">
<h3>In the template definition<a class="headerlink" href="#in-the-template-definition" title="Permalink to this headline">¶</a></h3>
<ol class="arabic">
<li><p class="first">if a transformation lacks an <tt class="docutils literal"><span class="pre">artifact</span></tt> attribute then the router will be invoked by the writer</p>
</li>
<li><p class="first">All declared routers will be called in sequence of priority with the value of the given <em>node</em>.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">this may be an object or string</p>
</div>
</li>
<li><p class="first">the first router will try to find a <em>match</em> for the given <em>node</em>.</p>
</li>
<li><p class="first">if not found, go to the next router.</p>
</li>
<li><p class="first">if a <em>match</em> is found with a specific <em>route</em> in the router then <em>generate</em> a url according to the
<em>scheme</em> that is associated with that <em>route</em>.</p>
</li>
<li><p class="first">the writer will use the generated url if it is relative; in case of an absolute URL or the value false will no
template be generated.</p>
</li>
</ol>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Only writers that support the router can be used in this way. Please consult the
documentation of your desired writer to learn how to apply routes.</p>
</div>
</div>
<div class="section" id="example-scenario">
<h3>Example scenario<a class="headerlink" href="#example-scenario" title="Permalink to this headline">¶</a></h3>
<p>In a template definition is a transformation to generate artifacts for all classes in a project using Twig templates.
When I omit the artifact attribute the Twig writer will invoke the <em>router</em> for each class that it processes and pass
an object of the class <tt class="docutils literal"><span class="pre">ClassDescriptor</span></tt>.</p>
<p>The router will iterate through every <em>Routing Rule</em> and try to match the ClassDescriptor to that <em>rule</em>.</p>
<p>When a <em>matching</em> <em>rule</em> is found (such as: for every ClassDescriptor), then the ClassDescriptor is passed to the
<em>UrlGenerator</em>. The <em>UrlGenerator</em> will subsequently try to convert the given object to an URL (as string) and return
that back to the writer.</p>
<p>The writer will determine whether the returned URL is relative. If the returned URL is absolute or the boolean value
false, than the writer must not generate an artifact.</p>
<p>If the provided URL is relative then the writer will generate an artifact at the given URL. During generation the writer
will check for special markers or indicators that a node in the template should be converted to a link to another part
of the application.</p>
<p>If such a marker is found, such as the <tt class="docutils literal"><span class="pre">route</span></tt> filter in the Twig writer, then the writer will iterate through each
<em>Routing Rule</em> and try to match that <em>node</em>.</p>
<p>When a <em>matching</em> <em>rule</em> is found, then the node is passed to the <em>UrlGenerator</em>. The <em>UrlGenerator</em> will subsequently
try to convert the given object to an URL (as string) and return that back to the writer.</p>
<p>If the returned URL contains the boolean value false, than the writer must not generate a link and ignore the
directive, otherwise the writer will generate a link pointing to the given URL.</p>
</div>
</div>
<div class="section" id="components">
<h2>Components<a class="headerlink" href="#components" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Node</dt>
<dd>The element that is passed to a router, this may be a string or a child class of DescriptorAbstract.</dd>
<dt>Router</dt>
<dd>A container that houses a series of logically connected Routing Rules</dd>
<dt>Routing Rules (Routes)</dt>
<dd>The relation between a Matcher and a UrlGenerator; represents the conversion of a single Node to a URL</dd>
<dt>Matcher</dt>
<dd>A component that is responsible for determining whether the given Node triggers the parent Routing Rule.</dd>
<dt>UrlGenerator</dt>
<dd>A component that is responsible for converting a given Node to a URL representation.</dd>
</dl>
</div>
<div class="section" id="defining-routers">
<h2>Defining routers<a class="headerlink" href="#defining-routers" title="Permalink to this headline">¶</a></h2>
<p>By default phpDocumentor imposes its default routers on a template, so unless you want to configure your own
routers you can ignore the following section.</p>
<p>If you want to ship your own routers then they can be defined by adding <tt class="docutils literal"><span class="pre">&lt;router&gt;</span></tt> elements to your application
configuration. Each router element should have a priority attribute that indicates where in the execution order the
router should be placed.</p>
</div>
<div class="section" id="priorities">
<h2>Priorities<a class="headerlink" href="#priorities" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="todo">
<h2>TODO<a class="headerlink" href="#todo" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Show router queue using a command</li>
<li>Define routes inline in a template</li>
<li>How to handle destination types? How does a writer know what type of destination we are dealing with?</li>
</ul>
</div>
</div>



            
            </div>
            
        </div>
    </div>

  <div class="row">
    <footer class="span12">
        <p>
            Created using <a
                href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
        </p>
    </footer>
  </div>
</div>

</body>
</html>