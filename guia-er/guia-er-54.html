<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD><meta charset=utf-8>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>EXPRESSÕES REGULARES: Linguagens de programação: Ruby (NOVO!)</TITLE>
 <LINK HREF="guia-er-55.html" REL=next>
 <LINK HREF="guia-er-53.html" REL=previous>
 <LINK HREF="guia-er.html#toc7" REL=contents>
</HEAD>
<body bgcolor="white" text=black>
<A HREF="guia-er-55.html">Página seguinte</A>
<A HREF="guia-er-53.html">Página anterior</A>
<A HREF="guia-er.html#toc7">Índice</A>
<HR>
<H2>7.3 Ruby (NOVO!)</H2>

<P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
característica  como fazer
------------------------------------------------
busca           método scan
substituição    métodos sub, sub!, gsub e gsub!
divisão         método split
ER crua         'entre aspas simples'
ignore M/m      modificador i e $=
global          modificador g, método gsub
</PRE>
</CODE></BLOCKQUOTE>
<P>Ruby é uma linguagem nova, que nasceu para ser um Perl orientado a objeto, em 1993. Desde então evoluiu bastante, com um desenvolvimento muito ativo, sendo considerada por muitos a nova estrela das linguagens interpretadas.
<P>Para ignorar a diferença entre maiúsculas e minúsculas, pode ser utilizado o modificador <CODE>i</CODE>, ou basta definir a variável <CODE>$=</CODE> como <CODE>true</CODE>.
<P>Na substituição, temos o <CODE>sub</CODE> e o <CODE>gsub</CODE>, sendo a única diferença entre eles que o <CODE>gsub</CODE> faz uma substituição global, ou seja, troca todas as ocorrências do padrão, e não apenas a primeira. A exclamação no nome indica que o método é "destrutiva", pois o resultado da substituição é gravado direto no objeto, ao invés de ser um valor de retorno.
<P>
<BLOCKQUOTE><CODE>
<PRE>
puts 'Ruby &amp; Perl'.gsub!(/r/i,'.')   # mostra: .uby &amp; Pe.l
</PRE>
</CODE></BLOCKQUOTE>
<P>Assim como Perl, aceita os modificadores <CODE>x</CODE> para comentários e <CODE>m</CODE> para multilinha, e os retrovisores são <CODE>$1</CODE>, <CODE>$2</CODE>, ... e <CODE>\1</CODE>, <CODE>\2</CODE>, ..., sendo também idêntica a busca com o <CODE>~=</CODE>:
<P>
<BLOCKQUOTE><CODE>
<PRE>
if comida ~= /macarronada|churrasco/ then
  puts "me convide!"
end
</PRE>
</CODE></BLOCKQUOTE>
<P>Se tiver <EM>macarronada</EM> ou <EM>churrasco</EM> na <CODE>comida</CODE>, me convide! &amp;:) Para a busca também pode ser utilizado o formato <CODE>if /er/</CODE> que significa o mesmo que <CODE>if $_ ~= /er/</CODE>. Ou ainda, temos o método <CODE>scan</CODE>, que retorna uma matriz ("array") com o conteúdo dos grupos da expressão:
<P>
<BLOCKQUOTE><CODE>
<PRE>
er_hora = /(..):(..)/
matriz = "23:59".scan(er_hora)

# matriz vai conter [ "23", "59" ]
</PRE>
</CODE></BLOCKQUOTE>
<P>Temos ainda o método <CODE>index</CODE> para saber a posição de um padrão e o <CODE>split</CODE> para fazer a divisão, que pode receber o número máximo de divisões a serem feitas:
<P>
<BLOCKQUOTE><CODE>
<PRE>
"bacana".index(/ca/)       # retorna 2 (a contagem começa em zero)
"1:2:3:4:5".split(':',3)   # retorna a matriz [ "1", "2", "3:4:5" ]
</PRE>
</CODE></BLOCKQUOTE>
<P>Na omissão do padrão, o <CODE>split</CODE> usa o valor da variável <CODE>$;</CODE>, ou ainda o espaço em branco.
<P>Encontre mais informações em:
<UL>
<LI>
<A HREF="http://www.ruby-lang.org">http://www.ruby-lang.org</A></LI>
<LI>
<A HREF="http://www.pragmaticprogrammer.com/ruby/downloads/book.html">http://www.pragmaticprogrammer.com/ruby/downloads/book.html</A></LI>
</UL>
<HR>
<A HREF="guia-er-55.html">Página seguinte</A>
<A HREF="guia-er-53.html">Página anterior</A>
<A HREF="guia-er.html#toc7">Índice</A>
</BODY>
</HTML>
