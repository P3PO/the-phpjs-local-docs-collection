<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>EXPRESSÕES REGULARES: Editores de texto: Vim</TITLE>
 <LINK HREF="guia-er-49.html" REL=next>
 <LINK HREF="guia-er-47.html" REL=previous>
 <LINK HREF="guia-er.html#toc6" REL=contents>
</HEAD>
<body bgcolor="white" text=black>
<A HREF="guia-er-49.html">Página seguinte</A>
<A HREF="guia-er-47.html">Página anterior</A>
<A HREF="guia-er.html#toc6">Índice</A>
<HR>
<H2>6.1 Vim</H2>

<P>
<P>O vim herdou a base das expressões do vi e estendeu muito seu poder, criando metacaracteres novos e permitindo o uso de ERs na maioria de seus comandos, como endereçamento. Tudo o que você precisa saber sobre ERs no vim está documentado no próprio programa, bastando digitar <CODE>:help regexp</CODE> para ter acesso a essas informações.
<P>A primeira dica é ligar duas opções imbatíveis que são a <CODE>hlsearch</CODE> e <CODE>incsearch</CODE>. A primeira deixa iluminado ("highlight") o texto casado, para termos uma visualização do que nossa ER casou, e a segunda faz o vim ir iluminando e mostrando o texto casado dinamicamente, enquanto você digita a ER! Experimente, é muito bom: <CODE>:set hls is</CODE>.
<P>Além destas, temos opções que modificam a sintaxe dos metacaracteres, são elas: <CODE>magic</CODE> e <CODE>nomagic</CODE>. A primeira é a opção-padrão, e é a que se aconselha usar, não mude. Ao usar a segunda, suas ERs serão tão cheias de escapes que serão imprestáveis em outros programas.
<P>A função de pesquisa é feita pelo comando <CODE>/</CODE> e o <CODE>?</CODE> e a de substituição pelo <CODE>:s///</CODE>. O detalhe é que a substituição vale apenas para a linha atual onde está o cursor, a não ser que você selecione o texto desejado, ou aplique um endereçamento que dirá ao comando <CODE>s</CODE> em quais linhas fazer a substituição.
<P>Esse endereçamento vem imediatamente após o <CODE>:</CODE> e pode ser números de linha, padrões de texto entre barras, e alguns caracteres representantes de: linha atual (.), última linha ($) e arquivo todo (%).Veja alguns exemplos:
<P>
<BLOCKQUOTE><CODE>
<PRE>
:s/a/b/g        troca todos os a por b na linha atual
:1,5s/^/#/      comenta as 5 primeiras linhas
:.,$s/^/#/      comenta até o final do arquivo
:%s/^.//        apaga a primeira letra de cada linha
:%s/^./\u&amp;/c        torna maiúsculo o 1° caractere
</PRE>
</CODE></BLOCKQUOTE>
<P>Esse último é utilíssimo. Colocando um <CODE>c</CODE> no final de qualquer substituição, o vim mostrará um "prompt" na tela e lhe pedirá uma confirmação antes de fazer qualquer uma das substituições. Você vai respondendo sim ou não e vai vendo o texto ser alterado. Evita substituições cegas e vicia, cuidado! Veja <CODE>:help :s_flags</CODE> para conhecer outros modificadores.
<P>No vim apenas as chaves têm similares não-gulosos. Mas como já vimos que com elas conseguimos emular todos os outros quantificadores, isso não é problema. A sintaxe é simplesmente adicionar um traço como primeiro caractere dentro delas.
<P>
<BLOCKQUOTE><CODE>
<PRE>
meta            mnemônico
------------------------------------------
\{-,1}          opcional não-guloso
\{-}            asterisco não-guloso
\{-1,}          mais não-guloso
\{-n,m}         chaves não-gulosas
</PRE>
</CODE></BLOCKQUOTE>
<P>Ele possui também diversos arquivos de sintaxe para vários tipos de arquivo, que é onde são guardadas as regras complicadas que dizem "o quê é válido onde", e fazem os arquivos ficarem coloridos, respeitando a sintaxe da linguagem de programação ou arquivo de registros ou configuração sendo editados.
<P>Adivinha como são feitas essas regras complicadas? Com ERs, é claro! Este é um tópico muito interessante e exige conhecimentos sólidos do assunto. Caso queira dar uma olhada, todos os arquivos de sintaxe estão no subdiretório <CODE>syntax</CODE> e têm a extensão <CODE>.vim</CODE>.
<P>A central vim encontra-se em 
<A HREF="http://www.vim.org">http://www.vim.org</A>.
<P>
<HR>
<A HREF="guia-er-49.html">Página seguinte</A>
<A HREF="guia-er-47.html">Página anterior</A>
<A HREF="guia-er.html#toc6">Índice</A>
</BODY>
</HTML>
