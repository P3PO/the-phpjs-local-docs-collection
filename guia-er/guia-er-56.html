<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>EXPRESSÕES REGULARES: Linguagens de programação: Javascript</TITLE>
 <LINK HREF="guia-er-57.html" REL=next>
 <LINK HREF="guia-er-55.html" REL=previous>
 <LINK HREF="guia-er.html#toc7" REL=contents>
</HEAD>
<body bgcolor="white" text=black>
<A HREF="guia-er-57.html">Página seguinte</A>
<A HREF="guia-er-55.html">Página anterior</A>
<A HREF="guia-er.html#toc7">Índice</A>
<HR>
<H2>7.5 Javascript</H2>

<P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
característica  como fazer
-------------------------------------------------------
busca           métodos test, search, exec, match
substituição    método replace
divisão         método split
ER crua         /entre barras/
ignore M/m      modificador i
global          modificador g
</PRE>
</CODE></BLOCKQUOTE>
<P>O suporte a ERs no Javascript foi incluído nos dois navegadores mais famosos desde as seguintes versões: <EM>Netscape 4.0x</EM> e <EM>Internet Explorer 4.0</EM>, e o nosso personagem principal agora vai ser o objeto global <CODE>RegExp</CODE>.
<P>Para definir uma ER no formato cru, basta colocá-la entre /barras/, e logo após a segunda barra, podemos colocar os modificadores de maiúsculas e minúsculas e substituição global, assim: <B><CODE>/[a-z]/ig</CODE></B>.
<P>Para criar um objeto do tipo <CODE>RegExp</CODE>, basta definir uma variável com uma /ER/. O método <CODE>test</CODE> é um dos que fazem a busca de padrões:
<P>
<BLOCKQUOTE><CODE>
<PRE>
var er = /^[a-z]+$/i;
if (er.test("JAVA"))
  alert("casou!");
</PRE>
</CODE></BLOCKQUOTE>
<P>Fácil, não? Então para complicar, se você quiser fazer uma substituição, o método <CODE>replace</CODE> deve ser usado. Detalhe: ele é um método de uma <EM>string</EM> e não de uma /ER/, mas recebe ERs. Não entendeu? Veja:
<P>
<BLOCKQUOTE><CODE>
<PRE>
var eu = "estou com fome";
document.write(eu.replace(/....$/, "sono"));
</PRE>
</CODE></BLOCKQUOTE>
<P>Em Javascript, temos uma simetria entre os objetos <CODE>regexp</CODE> e <CODE>string</CODE>, com métodos de mesma função, mas nomes diferentes. Os "gêmeos siameses" são <CODE>test</CODE> e <CODE>search</CODE> para busca simples e <CODE>exec</CODE> e <CODE>match</CODE> para busca com pescagem de dados. E lembre-se de que um método <CODE>regexp</CODE> recebe como parâmetro uma <CODE>string</CODE> e vice-versa, veja:
<P>
<BLOCKQUOTE><CODE>
<PRE>
regexp.test("string")
string.search(/regexp/)

regexp.exec("string")
string.match(/regexp/)
</PRE>
</CODE></BLOCKQUOTE>
<P>Cuidado para não confundir! Falando em confundir, vamos ver o mais complicado de todos: o <CODE>exec</CODE>, que, além de fazer o casamento, povoa uma matriz com vários dados que podem ser recuperados posteriormente. Acompanhe o exemplo a seguir e note que o <CODE>matriz[1]</CODE> é o similar Javascript para o retrovisor <B><CODE>\1</CODE></B>:
<P>
<BLOCKQUOTE><CODE>
<PRE>
var er = /^(\w+) (\w+)/;
var matriz = er.exec("um dois três");
document.write(matriz.index, "&lt;BR&gt;",
               matriz.input, "&lt;BR&gt;",
               matriz[0],    "&lt;BR&gt;",
               matriz[1],    "&lt;BR&gt;",
               matriz[2]);

//Resultado:
// 0              // índice do casamento
// um dois três   // texto original
// um dois        // trecho casado
// um             // conteúdo do grupo 1
// dois           // conteúdo do grupo 2
</PRE>
</CODE></BLOCKQUOTE>
<P>Mais informações podem ser encontradas em:
<UL>
<LI>
<A HREF="http://www.webreference.com/js/column5">http://www.webreference.com/js/column5</A></LI>
<LI>
<A HREF="http://www.zdnet.com/devhead/stories/articles/0,4413,2354285,00.html">http://www.zdnet.com/devhead/stories/articles/0,4413,2354285,00.html</A></LI>
</UL>
<HR>
<A HREF="guia-er-57.html">Página seguinte</A>
<A HREF="guia-er-55.html">Página anterior</A>
<A HREF="guia-er.html#toc7">Índice</A>
</BODY>
</HTML>
