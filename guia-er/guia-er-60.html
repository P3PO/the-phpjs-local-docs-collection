<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>EXPRESSÕES REGULARES: Linguagens de programação: Sed</TITLE>
 <LINK HREF="guia-er-61.html" REL=next>
 <LINK HREF="guia-er-59.html" REL=previous>
 <LINK HREF="guia-er.html#toc7" REL=contents>
</HEAD>
<body bgcolor="white" text=black>
<A HREF="guia-er-61.html">Página seguinte</A>
<A HREF="guia-er-59.html">Página anterior</A>
<A HREF="guia-er.html#toc7">Índice</A>
<HR>
<H2>7.9 Sed</H2>

<P>
<P>
<BLOCKQUOTE><CODE>
<PRE>
característica  como fazer
--------------------------------------
busca           /endereçamento/
substituição    comando s///
divisão         -
ER crua         já é crua
ignore M/m      modificador I
global          modificador g
</PRE>
</CODE></BLOCKQUOTE>
<P>Bem, eu sou meio suspeito para falar do sed, pois é meu programa preferido, então vou tentar ser breve.
<P>O sed é um editor de texto não-interativo, orientado a linha, que usa uma linguagem de programação em que se definem as regras de edição. Pode-se usar ERs delimitadas por barras para endereçar as linhas nas quais o comando será aplicado.
<P>
<BLOCKQUOTE><CODE>
<PRE>
sed '1,/[0-9]\{3\}/d' arquivo.txt
</PRE>
</CODE></BLOCKQUOTE>
<P>Este sed lê dados do <CODE>arquivo.txt</CODE> e apaga (comando d) desde a primeira linha, até a linha que contenha 3 números seguidos, jogando o resultado na tela. Se quiser gravar o resultado, redirecione-o para outro arquivo, não o próprio <CODE>arquivo.txt</CODE>.
<P>A substituição de padrões é feita com o comando <CODE>s///</CODE>, em que as barras separam a ER do trecho substituto. Como exemplo, vamos trocar duas letras de lugar:
<P>
<BLOCKQUOTE><CODE>
<PRE>
prompt$ echo ZZzz | sed 's/\([a-z]\)\1/./Ig'
..
</PRE>
</CODE></BLOCKQUOTE>
<P>Note lá no final os modificadores <CODE>I</CODE> para ignorar a diferença de maiúsculas e minúsculas e o <CODE>g</CODE> para substituir todas as ocorrências encontradas.
<P>O sed também é útil para testes dinâmicos de ERs, em que você digita o texto e ele aplica a ER na hora. Basta omitir o nome do arquivo, então ele esperará os dados do teclado. Assim:
<P>
<BLOCKQUOTE><CODE>
<PRE>
prompt$ sed 's/$/!!!/; s/[0-9]\+//g'
exclamação no fim
exclamação no fim!!!
e números 1, 23 e 4567 são apagados
e números ,  e  são apagados!!!
^c
</PRE>
</CODE></BLOCKQUOTE>
<P>Então após cada linha que você digita, o sed já a edita e coloca o resultado embaixo. Note que temos dois comandos de substituição que são aplicados seqüencialmente, então testes de várias ERs em um mesmo texto são triviais.
<P>Bom para testes rápidos de ERs recém-construídas, ou até para tentar adivinhar o que faz uma ER pronta que você não conseguiu entender direito.
<P>Mais informações sobre obtenção e uso do sed você encontra no sed-HOWTO (em português):
<UL>
<LI>
<A HREF="http://aurelio.net/sed/sed-HOWTO">http://aurelio.net/sed/sed-HOWTO</A></LI>
</UL>
<HR>
<A HREF="guia-er-61.html">Página seguinte</A>
<A HREF="guia-er-59.html">Página anterior</A>
<A HREF="guia-er.html#toc7">Índice</A>
</BODY>
</HTML>
